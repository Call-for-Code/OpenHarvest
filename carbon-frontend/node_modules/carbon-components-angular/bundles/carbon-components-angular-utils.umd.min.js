/**
 *
 * carbon-angular v0.0.0 | carbon-components-angular-utils.umd.min.js
 *
 * Copyright 2014, 2021 IBM
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0

 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */


!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@carbon/utils-position"),require("rxjs/operators"),require("@angular/core"),require("rxjs")):"function"==typeof define&&define.amd?define("carbon-components-angular/utils",["exports","@carbon/utils-position","rxjs/operators","@angular/core","rxjs"],t):t((e["carbon-components-angular"]=e["carbon-components-angular"]||{},e["carbon-components-angular"].utils={}),e.utilsPosition,e.rxjs.operators,e.ng.core,e.rxjs)}(this,function(e,t,n,r,o){"use strict";function i(e,t){if(e[t])return e[t].classList.contains("disabled")?i(e[t],t):e[t]}function s(e,t){var n;void 0===t&&(t=null),e&&((n=e.querySelector("[tabindex='0']"))?n.focus():a(e,t))}function a(e,t){var n,r,o;void 0===t&&(t=null),e&&((n=e.nextElementSibling)?(r=n.querySelector("[tabindex='0']"))?r.focus():a(n,t):!t||(o=t.nextElementSibling)&&s(o,t))}var l=(c.prototype.ngOnDestroy=function(){cancelAnimationFrame(this.animationFrameId)},c.prototype.doTick=function(e){var t=this;this.frameSource.next(e),this.ngZone.runOutsideAngular(function(){requestAnimationFrame(t.doTick.bind(t))})},c.decorators=[{type:r.Injectable}],c.ctorParameters=function(){return[{type:r.NgZone}]},c);function c(e){var t=this;this.ngZone=e,this.frameSource=new o.Subject,this.tick=this.frameSource.asObservable(),this.ngZone.runOutsideAngular(function(){t.animationFrameId=requestAnimationFrame(t.doTick.bind(t))})}var u=(d.decorators=[{type:r.Injectable}],d.ctorParameters=function(){return[{type:l}]},d);function d(e){this.singleton=e,this.tick=o.from(this.singleton.tick)}function f(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function p(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return s}(arguments[t]));return e}var v=function(e){for(var t,n,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];try{for(var i=f(r),s=i.next();!s.done;s=i.next()){var a=s.value;for(var l in a)a.hasOwnProperty(l)&&(a[l]instanceof Object?(e[l]||(e[l]={}),e[l]=v(e[l],a[l])):e[l]=a[l])}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=i["return"])&&n.call(i)}finally{if(t)throw t.error}}return e},m=function(e){var t=getComputedStyle(e);return"auto"===t.overflow||"scroll"===t.overflow||"auto"===t["overflow-y"]||"scroll"===t["overflow-y"]||"auto"===t["overflow-x"]||"scroll"===t["overflow-x"]},h=function(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect();if("BODY"!==t.tagName&&"HTML"!==t.tagName)return n.bottom-e.clientHeight<=r.bottom+(t.offsetHeight-t.clientHeight)/2&&n.top>=-e.clientHeight;var o=n.top<0&&n.top+e.clientHeight<0,i=n.left<0,s=n.bottom-e.clientHeight>(window.innerHeight||document.documentElement.clientHeight),a=n.right>(window.innerWidth||document.documentElement.clientWidth);return!(o||s||i||a)},b=function(e){for(var t=[document.body];e.parentElement&&e!==document.body;)m(e)&&t.push(e),e=e.parentElement;return t};var g=(y.prototype.visibility=function(s,e){void 0===e&&(e=s);var a=b(e);return this.tick.pipe(n.map(function(){var e,t;try{for(var n=f(a),r=n.next();!r.done;r=n.next()){var o=r.value;if(!h(s,o))return{visible:!1}}}catch(i){e={error:i}}finally{try{r&&!r.done&&(t=n["return"])&&t.call(n)}finally{if(e)throw e.error}}return{visible:!0}}))},y.decorators=[{type:r.Injectable}],y.ctorParameters=function(){return[{type:l}]},y);function y(e){this.singleton=e,this.tick=o.from(this.singleton.tick)}var E=function(e,t){switch(t){case"scroll":case"resize":case"touchstart":case"touchmove":case"touchend":return o.fromEvent(e,t,{passive:!0});default:return o.fromEvent(e,t)}},S=(w.prototype.handleEvent=function(e,t){this.globalEvents.has(e)||(this.documentRef?this.globalEvents.set(e,E(this.documentRef,e)):this.globalEvents.set(e,new o.Observable));var n=this.globalEvents.get(e);this.subscriptions.add(n.subscribe(t))},w.prototype.handleClick=function(e){this.handleEvent("click",e)},w.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe(),this.globalEvents=null},w.decorators=[{type:r.Injectable}],w);function w(){this.globalEvents=new Map,this.documentRef=document,this.subscriptions=new o.Subscription}var x=(O.prototype.on=function(e,t,n){this.targets.has(e)||this.targets.set(e,new Map);var r=this.targets.get(e);r.has(t)||r.set(t,E(e,t));var o=r.get(t).subscribe(n);this.subscriptions.add(o)},O.prototype.onDocument=function(e,t){this.documentService.handleEvent(e,t)},O.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe()},O.decorators=[{type:r.Injectable}],O.ctorParameters=function(){return[{type:S}]},O);function O(e){this.documentService=e,this.subscriptions=new o.Subscription,this.targets=new WeakMap}function C(e){return e||new S}var N={provide:S,deps:[[new r.Optional,new r.SkipSelf,S]],useFactory:C};function I(e,t){return e||new l(t)}var P={provide:l,deps:[[new r.Optional,new r.SkipSelf,l],r.NgZone],useFactory:I},R=(A.decorators=[{type:r.NgModule,args:[{providers:[N,P,l,S,u,g,x]}]}],A);function A(){}var k=-1;e.PLACEMENTS=t.PLACEMENTS,e.Position=t.Position,e.defaultPositions=t.defaultPositions,e.position=t.position,e.HcModeChecker=function(){var e=document.createElement("div");e.classList.add("hc-checker"),document.body.appendChild(e),"rgb(255, 0, 0)"!==window.getComputedStyle(e).backgroundColor.toString()&&document.body.classList.add("a11y"),document.body.removeChild(e)},e.findNextElem=function(e){return i(e,"nextElementSibling")},e.findPrevElem=function(e){return i(e,"previousElementSibling")},e.focusNextElem=a,e.focusNextTree=s,e.focusPrevElem=function j(e,t){if(void 0===t&&(t=null),e){var n=e.previousElementSibling;if(n){var r=n.querySelector("[tabindex='0']");if(r){if("true"===r.getAttribute("aria-expanded"))for(var o=n.querySelectorAll("[tabindex='0']"),i=o.length-1;0<=i;i--)if(o[i].offsetWidth||o[i].offsetHeight||o[i].getClientRects().length){r=o[i];break}r.focus()}else j(n,t)}else t&&t.querySelector("[tabindex='0']").focus()}},e.AnimationFrameService=u,e.AnimationFrameServiceSingleton=l,e.merge=v,e.getScrollableParents=b,e.hasScrollableParents=function(e){for(;e.parentElement&&e!==document.body;){if(m(e))return!0;e=e.parentElement}return!1},e.isScrollableElement=m,e.isVisibleInContainer=h,e.scrollableParentsObservable=function(e){for(var t=[o.fromEvent(window,"scroll",{passive:!0}).pipe(n.map(function(e){return Object.assign({},e,{target:document.body})}))];e.parentElement&&e!==document.body;)m(e)&&t.push(o.fromEvent(e,"scroll",{passive:!0})),e=e.parentElement;return o.merge.apply(void 0,p(t))},e.clone=function(e){return JSON.parse(JSON.stringify(e))},e.closestAttr=function(e,t,n){var r,o,i,s,a=n;if(!n)return null;do{if(r=a,o=e,i=t,s=void 0,s=window.getComputedStyle(r),i.includes(s[o]))return a;a=a.parentElement||a.parentNode}while(null!==a&&1===a.nodeType);return null},e.ANIMATION_FRAME_SERVICE_SINGLETON_PROVIDER=P,e.ANIMATION_FRAME_SERVICE_SINGLETON_PROVIDER_FACTORY=I,e.DOCUMENT_SERVICE_PROVIDER=N,e.DOCUMENT_SERVICE_PROVIDER_FACTORY=C,e.UtilsModule=R,e.getScrollbarWidth=function(){if(0<=k)return k;var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",e.appendChild(n);var r=n.offsetWidth;return e.parentNode.removeChild(e),k=t-r},e.ElementService=g,e.EventService=x,e.getEventObservable=E,e.DocumentService=S,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=carbon-components-angular-utils.umd.min.js.map
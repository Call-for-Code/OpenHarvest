/**
 *
 * carbon-angular v0.0.0 | carbon-components-angular-dropdown.umd.min.js
 *
 * Copyright 2014, 2021 IBM
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0

 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */


!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@carbon/utils-position"),require("rxjs"),require("rxjs/operators"),require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("carbon-components-angular/i18n"),require("carbon-components-angular/placeholder"),require("carbon-components-angular/utils"),require("carbon-components-angular/icon")):"function"==typeof define&&define.amd?define("carbon-components-angular/dropdown",["exports","@carbon/utils-position","rxjs","rxjs/operators","@angular/core","@angular/common","@angular/forms","carbon-components-angular/i18n","carbon-components-angular/placeholder","carbon-components-angular/utils","carbon-components-angular/icon"],e):e((t["carbon-components-angular"]=t["carbon-components-angular"]||{},t["carbon-components-angular"].dropdown={}),t.utilsPosition,t.rxjs,t.rxjs.operators,t.ng.core,t.ng.common,t.ng.forms,t["carbon-components-angular"].i18n,t["carbon-components-angular"].placeholder,t["carbon-components-angular"].utils,t["carbon-components-angular"].icon)}(this,function(t,a,s,i,r,e,n,o,l,p,c){"use strict";function f(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function u(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,s=n.call(t),r=[];try{for(;(void 0===e||0<e--)&&!(i=s.next()).done;)r.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(n=s["return"])&&n.call(s)}finally{if(o)throw o.error}}return r}(arguments[e]));return t}var d=(Object.defineProperty(h.prototype,"items",{get:function(){},set:function(t){},enumerable:!0,configurable:!0}),h.prototype.getNextItem=function(){},h.prototype.hasNextElement=function(){},h.prototype.getNextElement=function(){},h.prototype.getPrevItem=function(){},h.prototype.hasPrevElement=function(){},h.prototype.getPrevElement=function(){},h.prototype.getSelected=function(){},h.prototype.getCurrentItem=function(){},h.prototype.getCurrentElement=function(){},h.prototype.getListItems=function(){},h.prototype.propagateSelected=function(t){},h.prototype.filterBy=function(t){},h.prototype.initFocus=function(){},h.prototype.onItemsReady=function(t){},h.prototype.reorderSelected=function(t){},h.decorators=[{type:r.Directive,args:[{selector:"[ibmAbstractDropdownView]"}]}],h.propDecorators={items:[{type:r.Input}],select:[{type:r.Output}],blurIntent:[{type:r.Output}]},h);function h(){this.type="single",this.size="md"}var m={top:0,left:0},y=(Object.defineProperty(g.prototype,"offset",{get:function(){return this._offset},set:function(t){this._offset=Object.assign({},m,t)},enumerable:!0,configurable:!0}),g.prototype.appendToBody=function(t,e,n){var i=this;e.style.display="block";var o=document.createElement("div");return o.className="dropdown "+n,o.style.width=t.offsetWidth+"px",o.style.position="absolute",o.appendChild(e),this.placeholderService.hasPlaceholderRef()?this.placeholderService.appendElement(o):document.body.appendChild(o),this.menuInstance=o,this.animationFrameSubscription=this.animationFrameService.tick.subscribe(function(){i.positionDropdown(t,o)}),this.positionDropdown(t,o),o},g.prototype.appendToDropdown=function(t){if(this.menuInstance){var e=this.menuInstance,n=e.firstElementChild;return this.menuInstance=null,n.style.display="none",t.appendChild(n),this.animationFrameSubscription.unsubscribe(),this.placeholderService.hasPlaceholderRef()&&this.placeholderService.hasElement(e)?this.placeholderService.removeElement(e):document.body.contains(e)&&document.body.removeChild(e),e}},g.prototype.updatePosition=function(t){this.positionDropdown(t,this.menuInstance)},g.prototype.ngOnDestroy=function(){this.animationFrameSubscription.unsubscribe()},g.prototype.positionDropdown=function(t,e){var n,i,o,s,r,l;e&&(n=0,(i=e.querySelector(".bx--list-box__menu"))&&(t.getBoundingClientRect().left!==i.getBoundingClientRect().left?t.getBoundingClientRect().left-i.getBoundingClientRect().left+i.getBoundingClientRect().right>(window.innerWidth||document.documentElement.clientWidth)&&(n=t.offsetWidth-i.offsetWidth):i.getBoundingClientRect().right>(window.innerWidth||document.documentElement.clientWidth)&&(n=t.offsetWidth-i.offsetWidth)),s=(o=p.closestAttr("position",["relative","fixed","absolute"],e.parentElement))?-1*o.getBoundingClientRect().top:this.offset.top,r=o?-1*o.getBoundingClientRect().left:this.offset.left+n,l=a.position.findAbsolute(t,e,"bottom"),l=a.position.addOffset(l,s,r),a.position.setElement(e,l))},g.decorators=[{type:r.Injectable}],g.ctorParameters=function(){return[{type:l.PlaceholderService},{type:p.AnimationFrameService}]},g);function g(t,e){this.placeholderService=t,this.animationFrameService=e,this.animationFrameSubscription=new s.Subscription,this._offset=m}var b=(Object.defineProperty(v.prototype,"value",{get:function(){return this.itemValueKey},set:function(t){console.warn("Dropdown `value` property has been deprecated. Use `itemValueKey` instead"),this.itemValueKey=t},enumerable:!0,configurable:!0}),v.prototype.ngOnInit=function(){this.view&&(this.view.type=this.type)},v.prototype.ngAfterContentInit=function(){var n=this;this.view&&((this.writtenValue&&this.writtenValue.length||"number"==typeof this.writtenValue)&&this.writeValue(this.writtenValue),this.view.type=this.type,this.view.size=this.size,this.view.select.subscribe(function(t){var e;"multi"===n.type?n.itemValueKey&&n.view.getSelected()?(e=n.view.getSelected().map(function(t){return t[n.itemValueKey]}),n.propagateChange(e)):n.propagateChange(n.view.getSelected()):(n.closeMenu(),t.item&&t.item.selected?n.itemValueKey?n.propagateChange(t.item[n.itemValueKey]):n.propagateChange(t.item):n.propagateChange(null)),t&&!t.isUpdate&&(n.checkForReorder(),n.selected.emit(t)),n.appRef.tick()}))},v.prototype.ngAfterViewInit=function(){null===this.appendInline&&p.hasScrollableParents(this.elementRef.nativeElement)?this.appendInline=!1:null===this.appendInline&&(this.appendInline=!0),this.checkForReorder()},v.prototype.ngOnDestroy=function(){this.appendInline||this._appendToDropdown()},v.prototype.writeValue=function(m){var y=this;this.writtenValue=m,this.view.onItemsReady(function(){var t,e,n,i,o;if(m)if("single"===y.type)y.itemValueKey?((o=Object.assign({},y.view.getListItems().find(function(t){return t[y.itemValueKey]===m}))).selected=!0,y.view.propagateSelected([o])):y.view.propagateSelected([m]);else if(y.itemValueKey){var s=[];try{for(var r=f(m),l=r.next();!l.done;l=r.next()){var a=l.value;try{for(var p=f(y.view.getListItems()),c=p.next();!c.done;c=p.next()){var u=c.value;u[y.itemValueKey]===a&&s.push(Object.assign({},u,{selected:!0}))}}catch(d){n={error:d}}finally{try{c&&!c.done&&(i=p["return"])&&i.call(p)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{l&&!l.done&&(e=r["return"])&&e.call(r)}finally{if(t)throw t.error}}y.view.propagateSelected(s)}else y.view.propagateSelected(m);else y.view.propagateSelected([m]);y.checkForReorder()})},v.prototype.onBlur=function(){this.onTouchedCallback()},v.prototype.registerOnChange=function(t){this.propagateChange=t},v.prototype.registerOnTouched=function(t){this.onTouchedCallback=t},v.prototype.setDisabledState=function(t){this.disabled=t},v.prototype.onKeyDown=function(t){if("Escape"!==t.key&&"Esc"!==t.key||this.menuIsClosed||t.stopImmediatePropagation(),"Escape"===t.key||"Esc"===t.key)t.preventDefault(),this.closeMenu(),this.dropdownButton.nativeElement.focus();else if(this.menuIsClosed&&(" "===t.key||"ArrowDown"===t.key||"ArrowUp"===t.key||"Spacebar"===t.key||"Down"===t.key||"Up"===t.key)){if(this.disableArrowKeys&&("ArrowDown"===t.key||"ArrowUp"===t.key||"Down"===t.key||"Up"===t.key))return;t.preventDefault(),this.openMenu()}!this.menuIsClosed&&"Tab"===t.key&&this.dropdownMenu.nativeElement.contains(t.target)&&this.closeMenu(),!this.menuIsClosed&&"Tab"===t.key&&t.shiftKey&&this.closeMenu(),"multi"!==this.type&&this.menuIsClosed&&this.closedDropdownNavigation(t)},v.prototype.closedDropdownNavigation=function(t){var e;"ArrowDown"===t.key||"Down"===t.key?(t.preventDefault(),this.view.getCurrentItem().selected=!1,(e=this.view.getNextItem())&&(e.selected=!0)):"ArrowUp"!==t.key&&"Up"!==t.key||(t.preventDefault(),this.view.getCurrentItem().selected=!1,(e=this.view.getPrevItem())&&(e.selected=!0))},v.prototype.getDisplayStringValue=function(){if(this.view){var t=this.view.getSelected();return!t.length||this.displayValue&&this.isRenderString()?t.length&&this.isRenderString()?s.of(this.displayValue):s.of(this.placeholder):"multi"===this.type?s.of(this.placeholder):s.of(t[0].content)}},v.prototype.isRenderString=function(){return"string"==typeof this.displayValue},v.prototype.getRenderTemplateContext=function(){if(this.view){var t=this.view.getSelected();return"multi"===this.type?{items:t}:t&&0<t.length?{item:t[0]}:{}}},v.prototype.getSelectedCount=function(){if(this.view.getSelected())return this.view.getSelected().length},v.prototype.clearSelected=function(){var t,e;if(!this.disabled){try{for(var n=f(this.view.getListItems()),i=n.next();!i.done;i=n.next())i.value.selected=!1}catch(o){t={error:o}}finally{try{i&&!i.done&&(e=n["return"])&&e.call(n)}finally{if(t)throw t.error}}this.selected.emit([]),this.propagateChange([])}},v.prototype.valueSelected=function(){return!!this.view.getSelected()},v.prototype._noop=function(){},v.prototype._outsideClick=function(t){this.elementRef.nativeElement.contains(t.target)||this.dropdownMenu.nativeElement.contains(t.target)||this.closeMenu()},v.prototype._outsideKey=function(t){!this.menuIsClosed&&"Tab"===t.key&&this.dropdownMenu.nativeElement.contains(t.target)&&this.closeMenu()},v.prototype._keyboardNav=function(t){"Escape"!==t.key&&"Esc"!==t.key||this.menuIsClosed||t.stopImmediatePropagation(),"Escape"===t.key||"Esc"===t.key?(t.preventDefault(),this.closeMenu(),this.dropdownButton.nativeElement.focus()):this.menuIsClosed||"Tab"!==t.key||(this.dropdownButton.nativeElement.focus(),this.dropdownButton.nativeElement.dispatchEvent(new KeyboardEvent("keydown",{bubbles:!0,cancelable:!0,key:"Tab"})),this.closeMenu())},v.prototype._appendToDropdown=function(){this.dropdownService.appendToDropdown(this.elementRef.nativeElement),this.dropdownMenu.nativeElement.removeEventListener("keydown",this.keyboardNav,!0)},v.prototype._appendToBody=function(){var t="light"===this.theme?" bx--list-box--light":"",e=this.menuIsClosed?"":" bx--list-box--expanded";this.dropdownService.appendToBody(this.dropdownButton.nativeElement,this.dropdownMenu.nativeElement,this.elementRef.nativeElement.className+t+e),this.dropdownMenu.nativeElement.addEventListener("keydown",this.keyboardNav,!0)},v.prototype._shouldDropUp=function(){var t=this.dropdownMenu&&this.dropdownMenu.nativeElement.querySelector(".bx--list-box__menu"),o=t&&t.getBoundingClientRect();return!(!t||!o)&&p.getScrollableParents(t).reduce(function(t,e){var n=e.getBoundingClientRect(),i=!(o.bottom<=n.bottom);return t||i},!1)},v.prototype.openMenu=function(){var t,e,n=this;0!==this.view.getListItems().length&&(this._dropUp=!1,this.menuIsClosed=!1,this.appendInline||(t=this.dropdownButton.nativeElement,e=this.elementRef.nativeElement,this.visibilitySubscription=this.elementService.visibility(t,e).subscribe(function(t){t.visible||n.closeMenu()}),this._appendToBody()),setTimeout(function(){null!==n.dropUp&&n.dropUp!==undefined||(n._dropUp=n._shouldDropUp())},0),document.body.firstElementChild.addEventListener("click",this.noop,!0),document.body.firstElementChild.addEventListener("keydown",this.noop,!0),document.addEventListener("click",this.outsideClick,!0),document.addEventListener("keydown",this.outsideKey,!0),setTimeout(function(){return n.view.initFocus()},0))},v.prototype.closeMenu=function(){this.menuIsClosed||(this.menuIsClosed=!0,this.checkForReorder(),this.onClose.emit(),this.close.emit(),this.dropdownButton.nativeElement.focus(),this.view.disableScroll&&this.view.disableScroll(),this.appendInline||(this.visibilitySubscription.unsubscribe(),this._appendToDropdown()),document.body.firstElementChild.removeEventListener("click",this.noop,!0),document.body.firstElementChild.removeEventListener("keydown",this.noop,!0),document.removeEventListener("click",this.outsideClick,!0),document.removeEventListener("keydown",this.outsideKey,!0))},v.prototype.toggleMenu=function(){this.menuIsClosed?this.openMenu():this.closeMenu()},v.prototype.isTemplate=function(t){return t instanceof r.TemplateRef},v.prototype.checkForReorder=function(){var t=this.menuIsClosed&&"top-after-reopen"===this.selectionFeedback;"multi"!==this.type||!t&&"top"!==this.selectionFeedback||this.view.reorderSelected("top"===this.selectionFeedback)},v.dropdownCount=0,v.decorators=[{type:r.Component,args:[{selector:"ibm-dropdown",template:'\n\t<label *ngIf="label" [for]="id" class="bx--label">\n\t\t<ng-container *ngIf="!isTemplate(label)">{{label}}</ng-container>\n\t\t<ng-template *ngIf="isTemplate(label)" [ngTemplateOutlet]="label"></ng-template>\n\t</label>\n\t<div\n\t\tclass="bx--list-box"\n\t\t[ngClass]="{\n\t\t\t\'bx--dropdown\': type !== \'multi\',\n\t\t\t\'bx--multiselect\': type === \'multi\',\n\t\t\t\'bx--multi-select--selected\': type === \'multi\' && getSelectedCount() > 0,\n\t\t\t\'bx--dropdown--light\': theme === \'light\',\n\t\t\t\'bx--list-box--light\': theme === \'light\',\n\t\t\t\'bx--list-box--inline\': inline,\n\t\t\t\'bx--skeleton\': skeleton,\n\t\t\t\'bx--dropdown--disabled bx--list-box--disabled\': disabled,\n\t\t\t\'bx--dropdown--invalid\': invalid,\n\t\t\t\'bx--dropdown--xl bx--list-box--xl\': size === \'xl\',\n\t\t\t\'bx--dropdown--sm bx--list-box--sm\': size === \'sm\',\n\t\t\t\'bx--list-box--expanded\': !menuIsClosed\n\t\t}">\n\t\t<button\n\t\t\t#dropdownButton\n\t\t\t[id]="id"\n\t\t\ttype="button"\n\t\t\tclass="bx--list-box__field"\n\t\t\t[ngClass]="{\'a\': !menuIsClosed}"\n\t\t\t[attr.aria-expanded]="!menuIsClosed"\n\t\t\t[attr.aria-disabled]="disabled"\n\t\t\taria-haspopup="listbox"\n\t\t\t(click)="disabled ? $event.stopPropagation() : toggleMenu()"\n\t\t\t(blur)="onBlur()"\n\t\t\t[attr.disabled]="disabled ? true : null">\n\t\t\t<div\n\t\t\t\t(click)="clearSelected()"\n\t\t\t\t(keydown.enter)="clearSelected()"\n\t\t\t\t*ngIf="type === \'multi\' && getSelectedCount() > 0"\n\t\t\t\tclass="bx--list-box__selection bx--tag--filter bx--list-box__selection--multi"\n\t\t\t\ttabindex="0"\n\t\t\t\t[title]="clearText">\n\t\t\t\t{{getSelectedCount()}}\n\t\t\t\t<svg\n\t\t\t\t\tfocusable="false"\n\t\t\t\t\tpreserveAspectRatio="xMidYMid meet"\n\t\t\t\t\tstyle="will-change: transform;"\n\t\t\t\t\trole="img"\n\t\t\t\t\txmlns="http://www.w3.org/2000/svg"\n\t\t\t\t\twidth="16"\n\t\t\t\t\theight="16"\n\t\t\t\t\tviewBox="0 0 16 16"\n\t\t\t\t\taria-hidden="true">\n\t\t\t\t\t<path d="M12 4.7l-.7-.7L8 7.3 4.7 4l-.7.7L7.3 8 4 11.3l.7.7L8 8.7l3.3 3.3.7-.7L8.7 8z"></path>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t\t<span *ngIf="isRenderString()" class="bx--list-box__label">{{getDisplayStringValue() | async}}</span>\n\t\t\t<ng-template\n\t\t\t\t*ngIf="!isRenderString()"\n\t\t\t\t[ngTemplateOutletContext]="getRenderTemplateContext()"\n\t\t\t\t[ngTemplateOutlet]="displayValue">\n\t\t\t</ng-template>\n\t\t\t<svg\n\t\t\t\t*ngIf="invalid"\n\t\t\t\tclass="bx--dropdown__invalid-icon"\n\t\t\t\tibmIcon="warning--filled"\n\t\t\t\tsize="16">\n\t\t\t</svg>\n\t\t\t<svg\n\t\t\t\t*ngIf="!skeleton"\n\t\t\t\tibmIcon="chevron--down"\n\t\t\t\tsize="16"\n\t\t\t\tclass="bx--list-box__menu-icon"\n\t\t\t\t[attr.aria-label]="menuButtonLabel"\n\t\t\t\t[ngClass]="{\'bx--list-box__menu-icon--open\': !menuIsClosed }">\n\t\t\t</svg>\n\t\t</button>\n\t\t<div\n\t\t\t#dropdownMenu\n\t\t\t[ngClass]="{\n\t\t\t\t\'bx--list-box--up\': this.dropUp !== null && this.dropUp !== undefined ? dropUp : _dropUp\n\t\t\t}">\n\t\t\t<ng-content *ngIf="!menuIsClosed"></ng-content>\n\t\t</div>\n\t</div>\n\t<div *ngIf="helperText && !invalid" class="bx--form__helper-text">\n\t\t<ng-container *ngIf="!isTemplate(helperText)">{{helperText}}</ng-container>\n\t\t<ng-template *ngIf="isTemplate(helperText)" [ngTemplateOutlet]="helperText"></ng-template>\n\t</div>\n\t<div *ngIf="invalid" class="bx--form-requirement">\n\t\t<ng-container *ngIf="!isTemplate(invalidText)">{{ invalidText }}</ng-container>\n\t\t<ng-template *ngIf="isTemplate(invalidText)" [ngTemplateOutlet]="invalidText"></ng-template>\n\t</div>\n\t',providers:[{provide:n.NG_VALUE_ACCESSOR,useExisting:v,multi:!0}]}]}],v.ctorParameters=function(){return[{type:r.ElementRef},{type:o.I18n},{type:y},{type:r.ApplicationRef},{type:p.ElementService}]},v.propDecorators={id:[{type:r.Input}],label:[{type:r.Input}],helperText:[{type:r.Input}],placeholder:[{type:r.Input}],displayValue:[{type:r.Input}],clearText:[{type:r.Input}],size:[{type:r.Input}],type:[{type:r.Input}],theme:[{type:r.Input}],disabled:[{type:r.Input}],skeleton:[{type:r.Input}],inline:[{type:r.Input}],disableArrowKeys:[{type:r.Input}],invalid:[{type:r.Input}],invalidText:[{type:r.Input}],appendInline:[{type:r.Input}],scrollableContainer:[{type:r.Input}],value:[{type:r.Input}],itemValueKey:[{type:r.Input}],selectionFeedback:[{type:r.Input}],menuButtonLabel:[{type:r.Input}],selectedLabel:[{type:r.Input}],dropUp:[{type:r.Input}],selected:[{type:r.Output}],onClose:[{type:r.Output}],close:[{type:r.Output}],view:[{type:r.ContentChild,args:[d,{"static":!0}]}],dropdownButton:[{type:r.ViewChild,args:["dropdownButton",{"static":!0}]}],dropdownMenu:[{type:r.ViewChild,args:["dropdownMenu",{"static":!0}]}],hostClass:[{type:r.HostBinding,args:["class.bx--dropdown__wrapper"]}],onKeyDown:[{type:r.HostListener,args:["keydown",["$event"]]}]},v);function v(t,e,n,i,o){this.elementRef=t,this.i18n=e,this.dropdownService=n,this.appRef=i,this.elementService=o,this.id="dropdown-"+v.dropdownCount++,this.placeholder="",this.displayValue="",this.clearText=this.i18n.get().DROPDOWN.CLEAR,this.size="md",this.type="single",this.theme="dark",this.disabled=!1,this.skeleton=!1,this.inline=!1,this.disableArrowKeys=!1,this.invalid=!1,this.appendInline=null,this.selectionFeedback="top-after-reopen",this.menuButtonLabel=this.i18n.get().DROPDOWN.OPEN,this.selectedLabel=this.i18n.get().DROPDOWN.SELECTED,this.selected=new r.EventEmitter,this.onClose=new r.EventEmitter,this.close=new r.EventEmitter,this.hostClass=!0,this.menuIsClosed=!0,this._dropUp=!1,this.noop=this._noop.bind(this),this.outsideClick=this._outsideClick.bind(this),this.outsideKey=this._outsideKey.bind(this),this.keyboardNav=this._keyboardNav.bind(this),this.visibilitySubscription=new s.Subscription,this.onTouchedCallback=this._noop,this.writtenValue=[],this.propagateChange=function(t){}}var w=(Object.defineProperty(x.prototype,"items",{get:function(){return this._originalItems},set:function(t){var n=this;s.isObservable(t)?(this._itemsSubscription&&this._itemsSubscription.unsubscribe(),this._itemsReady=new s.Observable(function(e){n._itemsSubscription=t.subscribe(function(t){n.updateList(t),e.next(!0),e.complete()})}),this.onItemsReady(null)):this.updateList(t),this._originalItems=t},enumerable:!0,configurable:!0}),x.prototype.ngAfterViewInit=function(){var t=this;this.index=this.getListItems().findIndex(function(t){return t.selected}),this.setupFocusObservable(),setTimeout(function(){t.doEmitSelect(!0)})},x.prototype.ngOnDestroy=function(){this.focusJump&&this.focusJump.unsubscribe(),this._itemsSubscription&&this._itemsSubscription.unsubscribe()},x.prototype.doEmitSelect=function(t){var e;void 0===t&&(t=!0),"single"===this.type?this.select.emit({item:this._items.find(function(t){return t.selected}),isUpdate:t}):((e=this.getSelected()||[]).isUpdate=t,this.select.emit(e))},x.prototype.updateList=function(t){var e=this;this._items=t.map(function(t){return Object.assign({},t)}),this.displayItems=this._items,this.index=this._items.findIndex(function(t){return t.selected}),this.setupFocusObservable(),setTimeout(function(){e.getSelected()===[]&&e.doEmitSelect()})},x.prototype.filterBy=function(e){void 0===e&&(e=""),this.displayItems=e?this.getListItems().filter(function(t){return t.content.toLowerCase().includes(e.toLowerCase())}):this.getListItems(),this.index=0},x.prototype.setupFocusObservable=function(){var t,e,n;this.list&&(this.focusJump&&this.focusJump.unsubscribe(),t=Array.from(this.list.nativeElement.querySelectorAll("li")),this.focusJump=(e=this.list.nativeElement,n=t,s.fromEvent(e,"keydown").pipe(i.debounceTime(150),i.map(function(e){var t=n.find(function(t){return t.textContent.trim().toLowerCase().startsWith(e.key)});if(t)return t}),i.filter(function(t){return!!t})).subscribe(function(t){t.focus()})))},x.prototype.getNextItem=function(){return this.index<this.displayItems.length-1&&this.index++,this.displayItems[this.index]},x.prototype.hasNextElement=function(){return this.index<this.displayItems.length-1},x.prototype.getNextElement=function(){this.index<this.displayItems.length-1&&this.index++;var t=this.listElementList.toArray()[this.index].nativeElement;return this.displayItems[this.index].disabled?this.getNextElement():t},x.prototype.getPrevItem=function(){return 0<this.index&&this.index--,this.displayItems[this.index]},x.prototype.hasPrevElement=function(){return 0<this.index},x.prototype.getPrevElement=function(){0<this.index&&this.index--;var t=this.listElementList.toArray()[this.index].nativeElement;return this.displayItems[this.index].disabled?this.getPrevElement():t},x.prototype.getCurrentItem=function(){return this.index<0?this.displayItems[0]:this.displayItems[this.index]},x.prototype.getCurrentElement=function(){return this.index<0?this.listElementList.first.nativeElement:this.listElementList.toArray()[this.index].nativeElement},x.prototype.getListItems=function(){return this._items},x.prototype.getSelected=function(){var t=this.getListItems().filter(function(t){return t.selected});return 0===t.length?[]:t},x.prototype.propagateSelected=function(m){var y=this;Array.isArray(m)||console.error(this.constructor.name+".propagateSelected expects an Array<ListItem>, got "+JSON.stringify(m)),this.onItemsReady(function(){var t,e,n,i;try{for(var o=f(y.getListItems()),s=o.next();!s.done;s=o.next()){var r=s.value,l=Object.assign({},r);delete l.selected,l=JSON.stringify(l);try{for(var a=f(m),p=a.next();!p.done;p=a.next()){var c=p.value,u=Object.assign({},c);if(delete u.selected,u=JSON.stringify(u),l.includes(u)){r.selected=c.selected;break}r.selected=!1}}catch(d){n={error:d}}finally{try{p&&!p.done&&(i=a["return"])&&i.call(a)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o["return"])&&e.call(o)}finally{if(t)throw t.error}}})},x.prototype.initFocus=function(){this.index<0&&(this.index=0),this.getCurrentElement().focus()},x.prototype.doKeyDown=function(e,t){"Enter"===e.key||" "===e.key||"Spacebar"===e.key?(this.listElementList.some(function(t){return t.nativeElement===e.target})&&e.preventDefault(),"Enter"===e.key&&this.doClick(e,t)):"ArrowDown"!==e.key&&"ArrowUp"!==e.key&&"Down"!==e.key&&"Up"!==e.key||(e.preventDefault(),"ArrowDown"===e.key||"Down"===e.key?this.hasNextElement()?this.getNextElement().focus():this.blurIntent.emit("bottom"):"ArrowUp"!==e.key&&"Up"!==e.key||(this.hasPrevElement()?this.getPrevElement().focus():this.blurIntent.emit("top")))},x.prototype.doClick=function(t,e){var n,i;if(t.preventDefault(),!e.disabled){if("single"===this.type){e.selected=!0;try{for(var o=f(this.getListItems()),s=o.next();!s.done;s=o.next()){var r=s.value;e!==r&&(r.selected=!1)}}catch(l){n={error:l}}finally{try{s&&!s.done&&(i=o["return"])&&i.call(o)}finally{if(n)throw n.error}}}else e.selected=!e.selected;this.index=this.displayItems.indexOf(e),this.doEmitSelect(!1)}},x.prototype.onItemFocus=function(t){var e=this.listElementList.toArray()[t].nativeElement;e.classList.add("bx--list-box__menu-item--highlighted"),e.tabIndex=0},x.prototype.onItemBlur=function(t){var e=this.listElementList.toArray()[t].nativeElement;e.classList.remove("bx--list-box__menu-item--highlighted"),e.tabIndex=-1},x.prototype.emitScroll=function(t){var e={atTop:0===t.srcElement.scrollTop,atBottom:t.srcElement.scrollHeight-t.srcElement.scrollTop===t.srcElement.clientHeight,event:t};this.scroll.emit(e)},x.prototype.onItemsReady=function(t){(this._itemsReady||s.of(!0)).pipe(i.first()).subscribe(t)},x.prototype.reorderSelected=function(t){var e=this;void 0===t&&(t=!1),this.displayItems=u(this.getSelected(),this.getListItems().filter(function(t){return!t.selected})),t&&setTimeout(function(){return e.getCurrentElement().focus()})},x.decorators=[{type:r.Component,args:[{selector:"ibm-dropdown-list",template:'\n\t\t<ul\n\t\t\t#list\n\t\t\trole="listbox"\n\t\t\tclass="bx--list-box__menu bx--multi-select"\n\t\t\t(scroll)="emitScroll($event)"\n\t\t\t[attr.aria-label]="ariaLabel">\n\t\t\t<li\n\t\t\t\trole="option"\n\t\t\t\t*ngFor="let item of displayItems; let i = index"\n\t\t\t\t(click)="doClick($event, item)"\n\t\t\t\t(keydown)="doKeyDown($event, item)"\n\t\t\t\t(focus)="onItemFocus(i)"\n\t\t\t\t(blur)="onItemBlur(i)"\n\t\t\t\tclass="bx--list-box__menu-item"\n\t\t\t\t[ngClass]="{\n\t\t\t\t\t\'bx--list-box__menu-item--active\': item.selected,\n\t\t\t\t\tdisabled: item.disabled\n\t\t\t\t}"\n\t\t\t\t[title]="item.content">\n\t\t\t\t<div\n\t\t\t\t\t#listItem\n\t\t\t\t\ttabindex="-1"\n\t\t\t\t\tclass="bx--list-box__menu-item__option">\n\t\t\t\t\t<div\n\t\t\t\t\t\t*ngIf="!listTpl && type === \'multi\'"\n\t\t\t\t\t\tclass="bx--form-item bx--checkbox-wrapper">\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t[attr.data-contained-checkbox-state]="item.selected"\n\t\t\t\t\t\t\tclass="bx--checkbox-label">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclass="bx--checkbox"\n\t\t\t\t\t\t\t\ttype="checkbox"\n\t\t\t\t\t\t\t\t[checked]="item.selected"\n\t\t\t\t\t\t\t\t[disabled]="item.disabled"\n\t\t\t\t\t\t\t\ttabindex="-1">\n\t\t\t\t\t\t\t<span class="bx--checkbox-appearance"></span>\n\t\t\t\t\t\t\t<span class="bx--checkbox-label-text">{{item.content}}</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<ng-container *ngIf="!listTpl && type === \'single\'">{{item.content}}</ng-container>\n\t\t\t\t\t<svg\n\t\t\t\t\t\t*ngIf="!listTpl && type === \'single\'"\n\t\t\t\t\t\tibmIcon="checkmark"\n\t\t\t\t\t\tsize="16"\n\t\t\t\t\t\tclass="bx--list-box__menu-item__selected-icon">\n\t\t\t\t\t</svg>\n\t\t\t\t\t<ng-template\n\t\t\t\t\t\t*ngIf="listTpl"\n\t\t\t\t\t\t[ngTemplateOutletContext]="{item: item}"\n\t\t\t\t\t\t[ngTemplateOutlet]="listTpl">\n\t\t\t\t\t</ng-template>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t</ul>',providers:[{provide:d,useExisting:x}]}]}],x.ctorParameters=function(){return[{type:r.ElementRef},{type:o.I18n}]},x.propDecorators={ariaLabel:[{type:r.Input}],items:[{type:r.Input}],listTpl:[{type:r.Input}],select:[{type:r.Output}],scroll:[{type:r.Output}],blurIntent:[{type:r.Output}],list:[{type:r.ViewChild,args:["list",{"static":!0}]}],type:[{type:r.Input}],listElementList:[{type:r.ViewChildren,args:["listItem"]}]},x);function x(t,e){this.elementRef=t,this.i18n=e,this.ariaLabel=this.i18n.get().DROPDOWN_LIST.LABEL,this.listTpl=null,this.select=new r.EventEmitter,this.scroll=new r.EventEmitter,this.blurIntent=new r.EventEmitter,this.type="single",this.size="md",this.displayItems=[],this.index=-1,this._items=[]}var I=(E.prototype.ngOnChanges=function(t){var e=this;t.scrollEnabled&&(t.scrollEnabled.currentValue?(this.list.style.overflow="hidden",this.scrollUpTarget.style.display="flex",this.scrollDownTarget.style.display="flex",this.canScrollUp=!0,this.canScrollDown=!0,this.updateScrollHeight(),this.checkScrollArrows(),setTimeout(function(){e.checkScrollArrows()})):(this.scrollUpTarget.style.display="none",this.scrollDownTarget.style.display="none",this.canScrollUp=!1,this.canScrollDown=!1,this.list.style.height=null,this.list.style.overflow=null,clearInterval(this.hoverScrollInterval)))},E.prototype.ngAfterViewInit=function(){var t=this;this.nScrollableList&&(this.list=this.elementRef.nativeElement.querySelector(this.nScrollableList)),this.scrollUpTarget.addEventListener("mouseover",function(){return t.onHoverUp(!0)}),this.scrollUpTarget.addEventListener("mouseout",function(){return t.onHoverUp(!1)}),this.scrollDownTarget.addEventListener("mouseover",function(){return t.onHoverDown(!0)}),this.scrollDownTarget.addEventListener("mouseout",function(){return t.onHoverDown(!1)})},E.prototype.updateScrollHeight=function(){var t,e,n;this.scrollEnabled&&(t=this.elementRef.nativeElement.parentElement.getBoundingClientRect(),e=this.list.getBoundingClientRect().top-t.top,n=t.height-(t.bottom-window.innerHeight)-e-40,this.list.style.height=n+"px")},E.prototype.checkScrollArrows=function(){var t=this.scrollUpTarget.offsetHeight,e=this.scrollDownTarget.offsetHeight;0===this.list.scrollTop?(this.canScrollUp&&(this.list.style.height=parseInt(this.list.style.height,10)+t+"px"),this.scrollUpTarget.style.display="none",this.canScrollUp=!1):this.list.scrollTop===this.list.scrollTopMax?(this.canScrollDown&&(this.list.style.height=parseInt(this.list.style.height,10)+e+"px"),this.scrollDownTarget.style.display="none",this.canScrollDown=!1):(this.canScrollUp||(this.list.style.height=parseInt(this.list.style.height,10)-t+"px"),this.canScrollDown||(this.list.style.height=parseInt(this.list.style.height,10)-e+"px"),this.scrollUpTarget.style.display="flex",this.scrollDownTarget.style.display="flex",this.canScrollUp=!0,this.canScrollDown=!0)},E.prototype.onWheel=function(t){t.deltaY<0?this.list.scrollTop-=this.scrollBy:this.list.scrollTop+=this.scrollBy,this.list.scrollTop!==this.list.scrollTopMax&&0!==this.list.scrollTop&&(t.preventDefault(),t.stopPropagation()),this.checkScrollArrows()},E.prototype.onTouchStart=function(t){t.touches[0]&&(this.lastTouch=t.touches[0].clientY)},E.prototype.onTouchMove=function(t){var e;t.preventDefault(),t.stopPropagation(),t.touches[0]&&(e=t.touches[0],this.list.scrollTop+=this.lastTouch-e.clientY,this.lastTouch=e.clientY,this.checkScrollArrows())},E.prototype.hoverScrollBy=function(t,e){var n=this;t?this.hoverScrollInterval=setInterval(function(){n.list.scrollTop+=e,n.checkScrollArrows()},1):clearInterval(this.hoverScrollInterval)},E.prototype.onHoverUp=function(t){this.hoverScrollBy(t,-3)},E.prototype.onHoverDown=function(t){this.hoverScrollBy(t,3)},E.prototype.onKeyDown=function(t){"ArrowDown"!==t.key&&"ArrowUp"!==t.key||this.checkScrollArrows()},E.decorators=[{type:r.Directive,args:[{selector:"[ibmScrollableList]",exportAs:"scrollable-list"}]}],E.ctorParameters=function(){return[{type:r.ElementRef}]},E.propDecorators={nScrollableList:[{type:r.Input}],scrollEnabled:[{type:r.Input}],scrollUpTarget:[{type:r.Input}],scrollDownTarget:[{type:r.Input}],scrollBy:[{type:r.Input}],onWheel:[{type:r.HostListener,args:["wheel",["$event"]]}],onTouchStart:[{type:r.HostListener,args:["touchstart",["$event"]]}],onTouchMove:[{type:r.HostListener,args:["touchmove",["$event"]]}],onKeyDown:[{type:r.HostListener,args:["keydown",["$event"]]}]},E);function E(t){this.elementRef=t,this.nScrollableList=null,this.scrollEnabled=!0,this.scrollBy=10,this.canScrollUp=!1,this.canScrollDown=!1,this.list=this.elementRef.nativeElement}var S=(k.decorators=[{type:r.NgModule,args:[{declarations:[b,w,I,d],exports:[b,w,I,d],imports:[e.CommonModule,n.FormsModule,o.I18nModule,l.PlaceholderModule,p.UtilsModule,c.IconModule],providers:[y]}]}],k);function k(){}t.Dropdown=b,t.DropdownList=w,t.ScrollableList=I,t.AbstractDropdownView=d,t.DropdownService=y,t.DropdownModule=S,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=carbon-components-angular-dropdown.umd.min.js.map
{"version":3,"sources":["node_modules/tslib/tslib.es6.js","ng://carbon-components-angular/dropdown/abstract-dropdown-view.class.ts","ng://carbon-components-angular/dropdown/dropdown.service.ts","ng://carbon-components-angular/dropdown/dropdown.component.ts","ng://carbon-components-angular/dropdown/list/dropdown-list.component.ts","ng://carbon-components-angular/dropdown/dropdowntools.ts","ng://carbon-components-angular/dropdown/scrollable-list.directive.ts","ng://carbon-components-angular/dropdown/dropdown.module.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import {\n\tInput,\n\tOutput,\n\tEventEmitter,\n\tDirective\n} from \"@angular/core\";\nimport { ListItem } from \"./list-item.interface\";\nimport { Observable } from \"rxjs\";\n\n\n/**\n * A component that intends to be used within `Dropdown` must provide an implementation that extends this base class.\n * It also must provide the base class in the `@Component` meta-data.\n * ex: `providers: [{provide: AbstractDropdownView, useExisting: forwardRef(() => MyDropdownView)}]`\n */\n@Directive({ selector: \"[ibmAbstractDropdownView]\" })\nexport class AbstractDropdownView {\n\t/**\n\t * The items to be displayed in the list within the `AbstractDropDownView`.\n\t */\n\t@Input() set items(value: Array<ListItem> | Observable<Array<ListItem>>) { }\n\n\tget items(): Array<ListItem> | Observable<Array<ListItem>> { return; }\n\t/**\n\t * Emits selection events to controlling classes\n\t */\n\t@Output() select: EventEmitter<{item: ListItem } | ListItem[]>;\n\t/**\n\t * Event to suggest a blur on the view.\n\t * Emits _after_ the first/last item has been focused.\n\t * ex.\n\t * ArrowUp -> focus first item\n\t * ArrowUp -> emit event\n\t *\n\t * It's recommended that the implementing view include a specific type union of possible blurs\n\t * ex. `@Output() blurIntent = new EventEmitter<\"top\" | \"bottom\">();`\n\t */\n\t@Output() blurIntent: EventEmitter<any>;\n\t/**\n\t * Specifies whether or not the `DropdownList` supports selecting multiple items as opposed to single\n\t * item selection.\n\t */\n\tpublic type: \"single\" | \"multi\" = \"single\";\n\t/**\n\t * Specifies the render size of the items within the `AbstractDropdownView`.\n\t *\n\t * @deprecated since v4\n\t */\n\tpublic size: \"sm\" | \"md\" | \"xl\" = \"md\";\n\t/**\n\t * Returns the `ListItem` that is subsequent to the selected item in the `DropdownList`.\n\t */\n\tgetNextItem(): ListItem { return; }\n\t/**\n\t * Returns a boolean if the currently selected item is preceded by another\n\t */\n\thasNextElement(): boolean { return; }\n\t/**\n\t * Returns the `HTMLElement` for the item that is subsequent to the selected item.\n\t */\n\tgetNextElement(): HTMLElement { return; }\n\t/**\n\t * Returns the `ListItem` that precedes the selected item within `DropdownList`.\n\t */\n\tgetPrevItem(): ListItem { return; }\n\t/**\n\t * Returns a boolean if the currently selected item is followed by another\n\t */\n\thasPrevElement(): boolean { return; }\n\t/**\n\t * Returns the `HTMLElement` for the item that precedes the selected item.\n\t */\n\tgetPrevElement(): HTMLElement { return; }\n\t/**\n\t * Returns the selected leaf level item(s) within the `DropdownList`.\n\t */\n\tgetSelected(): ListItem[] { return; }\n\t/**\n\t * Returns the `ListItem` that is selected within `DropdownList`.\n\t */\n\tgetCurrentItem(): ListItem { return; }\n\t/**\n\t * Returns the `HTMLElement` for the item that is selected within the `DropdownList`.\n\t */\n\tgetCurrentElement(): HTMLElement { return; }\n\t/**\n\t * Guaranteed to return the current items as an Array.\n\t */\n\tgetListItems(): Array<ListItem> { return; }\n\t/**\n\t * Transforms array input list of items to the correct state by updating the selected item(s).\n\t */\n\tpropagateSelected(value: Array<ListItem>): void {}\n\t/**\n\t *\n\t * @param value value to filter the list by\n\t */\n\tfilterBy(value: string): void {}\n\t/**\n\t * Initializes focus in the list\n\t * In most cases this just calls `getCurrentElement().focus()`\n\t */\n\tinitFocus(): void {}\n\t/**\n\t * Subscribe the function passed to an internal observable that will resolve once the items are ready\n\t */\n\tonItemsReady(subcription: () => void): void {}\n\t/**\n\t * Reorder selected items bringing them to the top of the list\n\t */\n\treorderSelected(moveFocus?: boolean): void {}\n}\n","import { Injectable, ElementRef, OnDestroy } from \"@angular/core\";\nimport { PlaceholderService } from \"carbon-components-angular/placeholder\";\nimport { Subscription } from \"rxjs\";\nimport { position } from \"@carbon/utils-position\";\nimport { AnimationFrameService } from \"carbon-components-angular/utils\";\nimport { closestAttr } from \"carbon-components-angular/utils\";\n\nconst defaultOffset = { top: 0, left: 0 };\n\n@Injectable()\nexport class DropdownService implements OnDestroy {\n\tpublic set offset(value: { top?: number, left?: number }) {\n\t\tthis._offset = Object.assign({}, defaultOffset, value);\n\t}\n\n\tpublic get offset() {\n\t\treturn this._offset;\n\t}\n\t/**\n\t * reference to the body appended menu\n\t */\n\tprotected menuInstance: HTMLElement;\n\n\t/**\n\t * Maintains an Event Observable Subscription for the global requestAnimationFrame.\n\t * requestAnimationFrame is tracked only if the `Dropdown` is appended to the body otherwise we don't need it\n\t */\n\tprotected animationFrameSubscription = new Subscription();\n\n\tprotected _offset = defaultOffset;\n\n\tconstructor(\n\t\tprotected placeholderService: PlaceholderService,\n\t\tprotected animationFrameService: AnimationFrameService\n\t) {}\n\n\t/**\n\t * Appends the menu to the body, or a `ibm-placeholder` (if defined)\n\t *\n\t * @param parentRef container to position relative to\n\t * @param menuRef menu to be appended to body\n\t * @param classList any extra classes we should wrap the container with\n\t */\n\tappendToBody(parentRef: HTMLElement, menuRef: HTMLElement, classList): HTMLElement {\n\t\t// build the dropdown list container\n\t\tmenuRef.style.display = \"block\";\n\t\tconst dropdownWrapper = document.createElement(\"div\");\n\t\tdropdownWrapper.className = `dropdown ${classList}`;\n\t\tdropdownWrapper.style.width = parentRef.offsetWidth + \"px\";\n\t\tdropdownWrapper.style.position = \"absolute\";\n\t\tdropdownWrapper.appendChild(menuRef);\n\n\t\t// append it to the placeholder\n\t\tif (this.placeholderService.hasPlaceholderRef()) {\n\t\t\tthis.placeholderService.appendElement(dropdownWrapper);\n\t\t\t// or append it directly to the body\n\t\t} else {\n\t\t\tdocument.body.appendChild(dropdownWrapper);\n\t\t}\n\n\t\tthis.menuInstance = dropdownWrapper;\n\n\t\tthis.animationFrameSubscription = this.animationFrameService.tick.subscribe(() => {\n\t\t\tthis.positionDropdown(parentRef, dropdownWrapper);\n\t\t});\n\n\t\t// run one position in sync, so we're less likely to have the view \"jump\" as we focus\n\t\tthis.positionDropdown(parentRef, dropdownWrapper);\n\n\t\treturn dropdownWrapper;\n\t}\n\n\t/**\n\t * Reattach the dropdown menu to the parent container\n\t * @param hostRef container to append to\n\t */\n\tappendToDropdown(hostRef: HTMLElement): HTMLElement {\n\t\t// if the instance is already removed don't try and remove it again\n\t\tif (!this.menuInstance) { return; }\n\t\tconst instance = this.menuInstance;\n\t\tconst menu = instance.firstElementChild as HTMLElement;\n\t\t// clean up the instance\n\t\tthis.menuInstance = null;\n\t\tmenu.style.display = \"none\";\n\t\thostRef.appendChild(menu);\n\t\tthis.animationFrameSubscription.unsubscribe();\n\t\tif (this.placeholderService.hasPlaceholderRef() && this.placeholderService.hasElement(instance)) {\n\t\t\tthis.placeholderService.removeElement(instance);\n\t\t} else if (document.body.contains(instance)) {\n\t\t\tdocument.body.removeChild(instance);\n\t\t}\n\t\treturn instance;\n\t}\n\n\t/**\n\t * position an open dropdown relative to the given parentRef\n\t */\n\tupdatePosition(parentRef) {\n\t\tthis.positionDropdown(parentRef, this.menuInstance);\n\t}\n\n\tngOnDestroy() {\n\t\tthis.animationFrameSubscription.unsubscribe();\n\t}\n\n\tprotected positionDropdown(parentRef, menuRef) {\n\t\tif (!menuRef) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet leftOffset = 0;\n\n\t\tconst boxMenu = menuRef.querySelector(\".bx--list-box__menu\");\n\n\t\tif (boxMenu) {\n\t\t\t// If the parentRef and boxMenu are in a different left position relative to the\n\t\t\t// window, the the boxMenu position has already been flipped and a check needs to be done\n\t\t\t// to see if it needs to stay flipped.\n\t\t\tif (parentRef.getBoundingClientRect().left !== boxMenu.getBoundingClientRect().left) {\n\t\t\t\t// The getBoundingClientRect().right of the boxMenu if it were hypothetically flipped\n\t\t\t\t// back into the original position before the flip.\n\t\t\t\tconst testBoxMenuRightEdgePos =\n\t\t\t\t\tparentRef.getBoundingClientRect().left - boxMenu.getBoundingClientRect().left + boxMenu.getBoundingClientRect().right;\n\n\t\t\t\tif (testBoxMenuRightEdgePos > (window.innerWidth || document.documentElement.clientWidth)) {\n\t\t\t\t\tleftOffset = parentRef.offsetWidth - boxMenu.offsetWidth;\n\t\t\t\t}\n\t\t\t// If it has not already been flipped, check if it is necessary to flip, ie. if the\n\t\t\t// boxMenu is outside of the right viewPort.\n\t\t\t} else if (boxMenu.getBoundingClientRect().right > (window.innerWidth || document.documentElement.clientWidth)) {\n\t\t\t\tleftOffset = parentRef.offsetWidth - boxMenu.offsetWidth;\n\t\t\t}\n\t\t}\n\n\t\t// If ibm-placeholder has a parent with a position(relative|fixed|absolute) account for the parent offset\n\t\tconst closestMenuWithPos = closestAttr(\"position\", [\"relative\", \"fixed\", \"absolute\"], menuRef.parentElement);\n\t\tconst topPos = closestMenuWithPos ? closestMenuWithPos.getBoundingClientRect().top * -1 : this.offset.top;\n\t\tconst leftPos = closestMenuWithPos ? closestMenuWithPos.getBoundingClientRect().left * -1 : this.offset.left + leftOffset;\n\n\t\tlet pos = position.findAbsolute(parentRef, menuRef, \"bottom\");\n\t\tpos = position.addOffset(pos, topPos, leftPos);\n\n\t\tposition.setElement(menuRef, pos);\n\t}\n}\n","import {\n\tComponent,\n\tInput,\n\tOutput,\n\tEventEmitter,\n\tElementRef,\n\tContentChild,\n\tOnInit,\n\tViewChild,\n\tAfterContentInit,\n\tHostListener,\n\tOnDestroy,\n\tHostBinding,\n\tTemplateRef,\n\tApplicationRef,\n\tAfterViewInit\n} from \"@angular/core\";\nimport { NG_VALUE_ACCESSOR, ControlValueAccessor } from \"@angular/forms\";\n\n// Observable import is required here so typescript can compile correctly\nimport {\n\tObservable,\n\tof,\n\tSubscription\n} from \"rxjs\";\n\nimport { AbstractDropdownView } from \"./abstract-dropdown-view.class\";\nimport { I18n } from \"carbon-components-angular/i18n\";\nimport { ListItem } from \"./list-item.interface\";\nimport { DropdownService } from \"./dropdown.service\";\nimport { ElementService, getScrollableParents } from \"carbon-components-angular/utils\";\nimport { hasScrollableParents } from \"carbon-components-angular/utils\";\n\n/**\n * Drop-down lists enable users to select one or more items from a list.\n *\n * #### Opening behavior/List DOM placement\n * By default the dropdown will try to figure out the best placement for the dropdown list.\n *\n * If it's not contained within any scrolling elements, it will open inline, if it _is_\n * contained within a scrolling container it will try to open in the body, or an `ibm-placeholder`.\n *\n * To control this behavior you can use the `appendInline` input:\n * - `[appendInline]=\"null\"` is the default (auto detection)\n * - `[appendInline]=\"false\"` will always append to the body/`ibm-placeholder`\n * - `[appendInline]=\"true\"` will always append inline (next to the dropdown button)\n *\n * [See demo](../../?path=/story/dropdown--basic)\n *\n * <example-url>../../iframe.html?id=dropdown--basic</example-url>\n */\n@Component({\n\tselector: \"ibm-dropdown\",\n\ttemplate: `\n\t<label *ngIf=\"label\" [for]=\"id\" class=\"bx--label\">\n\t\t<ng-container *ngIf=\"!isTemplate(label)\">{{label}}</ng-container>\n\t\t<ng-template *ngIf=\"isTemplate(label)\" [ngTemplateOutlet]=\"label\"></ng-template>\n\t</label>\n\t<div\n\t\tclass=\"bx--list-box\"\n\t\t[ngClass]=\"{\n\t\t\t'bx--dropdown': type !== 'multi',\n\t\t\t'bx--multiselect': type === 'multi',\n\t\t\t'bx--multi-select--selected': type === 'multi' && getSelectedCount() > 0,\n\t\t\t'bx--dropdown--light': theme === 'light',\n\t\t\t'bx--list-box--light': theme === 'light',\n\t\t\t'bx--list-box--inline': inline,\n\t\t\t'bx--skeleton': skeleton,\n\t\t\t'bx--dropdown--disabled bx--list-box--disabled': disabled,\n\t\t\t'bx--dropdown--invalid': invalid,\n\t\t\t'bx--dropdown--xl bx--list-box--xl': size === 'xl',\n\t\t\t'bx--dropdown--sm bx--list-box--sm': size === 'sm',\n\t\t\t'bx--list-box--expanded': !menuIsClosed\n\t\t}\">\n\t\t<button\n\t\t\t#dropdownButton\n\t\t\t[id]=\"id\"\n\t\t\ttype=\"button\"\n\t\t\tclass=\"bx--list-box__field\"\n\t\t\t[ngClass]=\"{'a': !menuIsClosed}\"\n\t\t\t[attr.aria-expanded]=\"!menuIsClosed\"\n\t\t\t[attr.aria-disabled]=\"disabled\"\n\t\t\taria-haspopup=\"listbox\"\n\t\t\t(click)=\"disabled ? $event.stopPropagation() : toggleMenu()\"\n\t\t\t(blur)=\"onBlur()\"\n\t\t\t[attr.disabled]=\"disabled ? true : null\">\n\t\t\t<div\n\t\t\t\t(click)=\"clearSelected()\"\n\t\t\t\t(keydown.enter)=\"clearSelected()\"\n\t\t\t\t*ngIf=\"type === 'multi' && getSelectedCount() > 0\"\n\t\t\t\tclass=\"bx--list-box__selection bx--tag--filter bx--list-box__selection--multi\"\n\t\t\t\ttabindex=\"0\"\n\t\t\t\t[title]=\"clearText\">\n\t\t\t\t{{getSelectedCount()}}\n\t\t\t\t<svg\n\t\t\t\t\tfocusable=\"false\"\n\t\t\t\t\tpreserveAspectRatio=\"xMidYMid meet\"\n\t\t\t\t\tstyle=\"will-change: transform;\"\n\t\t\t\t\trole=\"img\"\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\twidth=\"16\"\n\t\t\t\t\theight=\"16\"\n\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\taria-hidden=\"true\">\n\t\t\t\t\t<path d=\"M12 4.7l-.7-.7L8 7.3 4.7 4l-.7.7L7.3 8 4 11.3l.7.7L8 8.7l3.3 3.3.7-.7L8.7 8z\"></path>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t\t<span *ngIf=\"isRenderString()\" class=\"bx--list-box__label\">{{getDisplayStringValue() | async}}</span>\n\t\t\t<ng-template\n\t\t\t\t*ngIf=\"!isRenderString()\"\n\t\t\t\t[ngTemplateOutletContext]=\"getRenderTemplateContext()\"\n\t\t\t\t[ngTemplateOutlet]=\"displayValue\">\n\t\t\t</ng-template>\n\t\t\t<svg\n\t\t\t\t*ngIf=\"invalid\"\n\t\t\t\tclass=\"bx--dropdown__invalid-icon\"\n\t\t\t\tibmIcon=\"warning--filled\"\n\t\t\t\tsize=\"16\">\n\t\t\t</svg>\n\t\t\t<svg\n\t\t\t\t*ngIf=\"!skeleton\"\n\t\t\t\tibmIcon=\"chevron--down\"\n\t\t\t\tsize=\"16\"\n\t\t\t\tclass=\"bx--list-box__menu-icon\"\n\t\t\t\t[attr.aria-label]=\"menuButtonLabel\"\n\t\t\t\t[ngClass]=\"{'bx--list-box__menu-icon--open': !menuIsClosed }\">\n\t\t\t</svg>\n\t\t</button>\n\t\t<div\n\t\t\t#dropdownMenu\n\t\t\t[ngClass]=\"{\n\t\t\t\t'bx--list-box--up': this.dropUp !== null && this.dropUp !== undefined ? dropUp : _dropUp\n\t\t\t}\">\n\t\t\t<ng-content *ngIf=\"!menuIsClosed\"></ng-content>\n\t\t</div>\n\t</div>\n\t<div *ngIf=\"helperText && !invalid\" class=\"bx--form__helper-text\">\n\t\t<ng-container *ngIf=\"!isTemplate(helperText)\">{{helperText}}</ng-container>\n\t\t<ng-template *ngIf=\"isTemplate(helperText)\" [ngTemplateOutlet]=\"helperText\"></ng-template>\n\t</div>\n\t<div *ngIf=\"invalid\" class=\"bx--form-requirement\">\n\t\t<ng-container *ngIf=\"!isTemplate(invalidText)\">{{ invalidText }}</ng-container>\n\t\t<ng-template *ngIf=\"isTemplate(invalidText)\" [ngTemplateOutlet]=\"invalidText\"></ng-template>\n\t</div>\n\t`,\n\tproviders: [\n\t\t{\n\t\t\tprovide: NG_VALUE_ACCESSOR,\n\t\t\tuseExisting: Dropdown,\n\t\t\tmulti: true\n\t\t}\n\t]\n})\nexport class Dropdown implements OnInit, AfterContentInit, AfterViewInit, OnDestroy, ControlValueAccessor {\n\tstatic dropdownCount = 0;\n\t@Input() id = `dropdown-${Dropdown.dropdownCount++}`;\n\t/**\n\t * Label for the dropdown.\n\t */\n\t@Input() label: string | TemplateRef<any>;\n\t/**\n\t * Sets the optional helper text.\n\t */\n\t@Input() helperText: string | TemplateRef<any>;\n\t/**\n\t * Value displayed if no item is selected.\n\t */\n\t@Input() placeholder = \"\";\n\t/**\n\t * The selected value from the `Dropdown`. Can be a string or template.\n\t */\n\t@Input() displayValue: string | TemplateRef<any> = \"\";\n\t/**\n\t * Sets the optional clear button tooltip text.\n\t */\n\t@Input() clearText: string = this.i18n.get().DROPDOWN.CLEAR;\n\t/**\n\t * Size to render the dropdown field.\n\t *\n\t * @deprecated since v4\n\t */\n\t@Input() size: \"sm\" | \"md\" | \"xl\" = \"md\";\n\t/**\n\t * Defines whether or not the `Dropdown` supports selecting multiple items as opposed to single\n\t * item selection.\n\t */\n\t@Input() type: \"single\" | \"multi\" = \"single\";\n\t/**\n\t * `light` or `dark` dropdown theme\n\t */\n\t@Input() theme: \"light\" | \"dark\" = \"dark\";\n\t/**\n\t * Set to `true` to disable the dropdown.\n\t */\n\t@Input() disabled = false;\n\t/**\n\t * Set to `true` for a loading dropdown.\n\t */\n\t@Input() skeleton = false;\n\t/**\n\t * Set to `true` for an inline dropdown.\n\t */\n\t@Input() inline = false;\n\t/**\n\t * Set to `true` for a dropdown without arrow key activation.\n\t */\n\t@Input() disableArrowKeys = false;\n\t/**\n\t * Set to `true` for invalid state.\n\t */\n\t@Input() invalid = false;\n\t/**\n\t * Value displayed if dropdown is in invalid state.\n\t */\n\t@Input() invalidText: string | TemplateRef<any>;\n\t/**\n\t * set to `true` to place the dropdown view inline with the component\n\t */\n\t@Input() appendInline: boolean = null;\n\t/**\n\t * Query string for the element that contains the `Dropdown`.\n\t * Used to trigger closing the dropdown if it scrolls outside of the viewport of the `scrollableContainer`.\n\t */\n\t@Input() scrollableContainer: string;\n\t/**\n\t * Deprecated. Use `itemValueKey` instead.\n\t * Specifies the property to be used as the return value to `ngModel`\n\t * @deprecated since v4 use itemValueKey instead\n\t */\n\t@Input() set value (newValue: string) {\n\t\tconsole.warn(\"Dropdown `value` property has been deprecated. Use `itemValueKey` instead\");\n\t\tthis.itemValueKey = newValue;\n\t}\n\n\tget value() {\n\t\treturn this.itemValueKey;\n\t}\n\t/**\n\t * Specifies the property to be used as the return value to `ngModel`\n\t */\n\t@Input() itemValueKey: string;\n\t/**\n     * Specify feedback (mode) of the selection.\n     * `top`: selected item jumps to top\n     * `fixed`: selected item stays at it's position\n     * `top-after-reopen`: selected item jump to top after reopen dropdown\n     */\n\t@Input() selectionFeedback: \"top\" | \"fixed\" | \"top-after-reopen\" = \"top-after-reopen\";\n\t/**\n\t * Accessible label for the button that opens the dropdown list.\n\t * Defaults to the `DROPDOWN.OPEN` value from the i18n service.\n\t */\n\t@Input() menuButtonLabel = this.i18n.get().DROPDOWN.OPEN;\n\t/**\n\t * Provides the label for the \"# selected\" text.\n\t * Defaults to the `DROPDOWN.SELECTED` value from the i18n service.\n\t */\n\t@Input() selectedLabel = this.i18n.get().DROPDOWN.SELECTED;\n\t/**\n\t * Overrides the automatic dropUp.\n\t */\n\t@Input() dropUp: boolean;\n\t/**\n\t * Emits selection events.\n\t */\n\t@Output() selected: EventEmitter<Object> = new EventEmitter<Object>();\n\t/**\n\t * Emits event notifying to other classes that the `Dropdown` has been closed (collapsed).\n\t */\n\t@Output() onClose: EventEmitter<any> = new EventEmitter<any>();\n\t/**\n\t * Emits event notifying to other classes that the `Dropdown` has been closed (collapsed).\n\t */\n\t@Output() close: EventEmitter<any> = new EventEmitter<any>();\n\n\t/**\n\t * Maintains a reference to the `AbstractDropdownView` object within the content DOM.\n\t */\n\t// @ts-ignore\n\t@ContentChild(AbstractDropdownView, { static: true }) view: AbstractDropdownView;\n\t/**\n\t * Maintains a reference to the view DOM element of the `Dropdown` button.\n\t */\n\t// @ts-ignore\n\t@ViewChild(\"dropdownButton\", { static: true }) dropdownButton;\n\t/**\n\t * ViewChid of the dropdown view.\n\t */\n\t// @ts-ignore\n\t@ViewChild(\"dropdownMenu\", { static: true }) dropdownMenu;\n\n\t@HostBinding(\"class.bx--dropdown__wrapper\") hostClass = true;\n\t/**\n\t * Set to `true` if the dropdown is closed (not expanded).\n\t */\n\tmenuIsClosed = true;\n\n\t/**\n\t * controls whether the `drop-up` class is applied\n\t */\n\t_dropUp = false;\n\n\t// .bind creates a new function, so we declare the methods below\n\t// but .bind them up here\n\tnoop = this._noop.bind(this);\n\toutsideClick = this._outsideClick.bind(this);\n\toutsideKey = this._outsideKey.bind(this);\n\tkeyboardNav = this._keyboardNav.bind(this);\n\n\tprotected visibilitySubscription = new Subscription();\n\n\tprotected onTouchedCallback: () => void = this._noop;\n\n\t// primarily used to capture and propagate input to `writeValue` before the content is available\n\tprotected writtenValue: any = [];\n\n\t/**\n\t * Creates an instance of Dropdown.\n\t */\n\tconstructor(\n\t\tprotected elementRef: ElementRef,\n\t\tprotected i18n: I18n,\n\t\tprotected dropdownService: DropdownService,\n\t\tprotected appRef: ApplicationRef,\n\t\tprotected elementService: ElementService) {}\n\n\t/**\n\t * Updates the `type` property in the `@ContentChild`.\n\t * The `type` property specifies whether the `Dropdown` allows single selection or multi selection.\n\t */\n\tngOnInit() {\n\t\tif (this.view) {\n\t\t\tthis.view.type = this.type;\n\t\t}\n\t}\n\n\t/**\n\t * Initializes classes and subscribes to events for single or multi selection.\n\t */\n\tngAfterContentInit() {\n\t\tif (!this.view) {\n\t\t\treturn;\n\t\t}\n\t\tif ((this.writtenValue && this.writtenValue.length) || typeof this.writtenValue === \"number\") {\n\t\t\tthis.writeValue(this.writtenValue);\n\t\t}\n\t\tthis.view.type = this.type;\n\t\tthis.view.size = this.size;\n\t\tthis.view.select.subscribe(event => {\n\t\t\tif (this.type === \"multi\") {\n\t\t\t\t// if we have a `value` selector and selected items map them appropriately\n\t\t\t\tif (this.itemValueKey && this.view.getSelected()) {\n\t\t\t\t\tconst values = this.view.getSelected().map(item => item[this.itemValueKey]);\n\t\t\t\t\tthis.propagateChange(values);\n\t\t\t\t// otherwise just pass up the values from `getSelected`\n\t\t\t\t} else {\n\t\t\t\t\tthis.propagateChange(this.view.getSelected());\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.closeMenu();\n\t\t\t\tif (event.item && event.item.selected) {\n\t\t\t\t\tif (this.itemValueKey) {\n\t\t\t\t\t\tthis.propagateChange(event.item[this.itemValueKey]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.propagateChange(event.item);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.propagateChange(null);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// only emit selected for \"organic\" selections\n\t\t\tif (event && !event.isUpdate) {\n\t\t\t\tthis.checkForReorder();\n\t\t\t\tthis.selected.emit(event);\n\t\t\t}\n\t\t\t// manually tick the app so the view picks up any changes\n\t\t\tthis.appRef.tick();\n\t\t});\n\t}\n\n\tngAfterViewInit() {\n\t\t// if appendInline is default valued (null) we should:\n\t\t// 1. if there are scrollable parents (not including body) don't append inline\n\t\t//    this should also cover the case where the dropdown is in a modal\n\t\t//    (where we _do_ want to append to the placeholder)\n\t\tif (this.appendInline === null && hasScrollableParents(this.elementRef.nativeElement)) {\n\t\t\tthis.appendInline = false;\n\t\t// 2. otherwise we should append inline\n\t\t} else if (this.appendInline === null) {\n\t\t\tthis.appendInline = true;\n\t\t}\n\t\tthis.checkForReorder();\n\t}\n\n\t/**\n\t * Removing the `Dropdown` from the body if it is appended to the body.\n\t */\n\tngOnDestroy() {\n\t\tif (!this.appendInline) {\n\t\t\tthis._appendToDropdown();\n\t\t}\n\t}\n\n\t/**\n\t * Propagates the injected `value`.\n\t */\n\twriteValue(value: any) {\n\t\t// cache the written value so we can use it in `AfterContentInit`\n\t\tthis.writtenValue = value;\n\t\tthis.view.onItemsReady(() => {\n\t\t\t// propagate null/falsey as an array (deselect everything)\n\t\t\tif (!value) {\n\t\t\t\tthis.view.propagateSelected([value]);\n\t\t\t} else if (this.type === \"single\") {\n\t\t\t\tif (this.itemValueKey) {\n\t\t\t\t\t// clone the specified item and update its state\n\t\t\t\t\tconst newValue = Object.assign({}, this.view.getListItems().find(item => item[this.itemValueKey] === value));\n\t\t\t\t\tnewValue.selected = true;\n\t\t\t\t\tthis.view.propagateSelected([newValue]);\n\t\t\t\t} else {\n\t\t\t\t\t// pass the singular value as an array of ListItem\n\t\t\t\t\tthis.view.propagateSelected([value]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this.itemValueKey) {\n\t\t\t\t\t// clone the items and update their state based on the received value array\n\t\t\t\t\t// this way we don't lose any additional metadata that may be passed in via the `items` Input\n\t\t\t\t\tlet newValues = [];\n\t\t\t\t\tfor (const v of value) {\n\t\t\t\t\t\tfor (const item of this.view.getListItems()) {\n\t\t\t\t\t\t\tif (item[this.itemValueKey] === v) {\n\t\t\t\t\t\t\t\tnewValues.push(Object.assign({}, item, { selected: true }));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.view.propagateSelected(newValues);\n\t\t\t\t} else {\n\t\t\t\t\t// we can safely assume we're passing an array of `ListItem`s\n\t\t\t\t\tthis.view.propagateSelected(value);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.checkForReorder();\n\t\t});\n\t}\n\n\tonBlur() {\n\t\tthis.onTouchedCallback();\n\t}\n\n\tregisterOnChange(fn: any) {\n\t\tthis.propagateChange = fn;\n\t}\n\n\t/**\n\t * Registering the function injected to control the touch use of the `Dropdown`.\n\t */\n\tregisterOnTouched(fn: any) {\n\t\tthis.onTouchedCallback = fn;\n\t}\n\n\t/**\n\t * function passed in by `registerOnChange`\n\t */\n\tpropagateChange = (_: any) => {};\n\n\t/**\n\t * `ControlValueAccessor` method to programmatically disable the dropdown.\n\t *\n\t * ex: `this.formGroup.get(\"myDropdown\").disable();`\n\t *\n\t * @param isDisabled `true` to disable the input\n\t */\n\tsetDisabledState(isDisabled: boolean) {\n\t\tthis.disabled = isDisabled;\n\t}\n\n\t/**\n\t * Adds keyboard functionality for navigation, selection and closing of the `Dropdown`.\n\t */\n\t@HostListener(\"keydown\", [\"$event\"])\n\t// \"Esc\", \"Spacebar\", \"Down\", and \"Up\" are IE specific values\n\tonKeyDown(event: KeyboardEvent) {\n\t\tif ((event.key === \"Escape\" || event.key === \"Esc\") && !this.menuIsClosed) {\n\t\t\tevent.stopImmediatePropagation();  // don't unintentionally close other widgets that listen for Escape\n\t\t}\n\t\tif (event.key === \"Escape\" || event.key === \"Esc\") {\n\t\t\tevent.preventDefault();\n\t\t\tthis.closeMenu();\n\t\t\tthis.dropdownButton.nativeElement.focus();\n\t\t} else if (this.menuIsClosed && (event.key === \" \" || event.key === \"ArrowDown\" || event.key === \"ArrowUp\" ||\n\t\t\tevent.key === \"Spacebar\" || event.key === \"Down\" || event.key === \"Up\")) {\n\t\t\tif (this.disableArrowKeys && (event.key === \"ArrowDown\" || event.key === \"ArrowUp\" || event.key === \"Down\" || event.key === \"Up\")) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tevent.preventDefault();\n\t\t\tthis.openMenu();\n\t\t}\n\n\t\tif (!this.menuIsClosed && event.key === \"Tab\" && this.dropdownMenu.nativeElement.contains(event.target as Node)) {\n\t\t\tthis.closeMenu();\n\t\t}\n\n\t\tif (!this.menuIsClosed && event.key === \"Tab\" && event.shiftKey) {\n\t\t\tthis.closeMenu();\n\t\t}\n\n\t\tif (this.type === \"multi\") { return; }\n\n\t\tif (this.menuIsClosed) {\n\t\t\tthis.closedDropdownNavigation(event);\n\t\t}\n\t}\n\n\tclosedDropdownNavigation(event) {\n\t\t// \"Down\", and \"Up\" are IE specific values\n\t\tif (event.key === \"ArrowDown\" || event.key === \"Down\") {\n\t\t\tevent.preventDefault();\n\t\t\tthis.view.getCurrentItem().selected = false;\n\t\t\tlet item = this.view.getNextItem();\n\t\t\tif (item) { item.selected = true; }\n\t\t} else if (event.key === \"ArrowUp\" || event.key === \"Up\") {\n\t\t\tevent.preventDefault();\n\t\t\tthis.view.getCurrentItem().selected = false;\n\t\t\tlet item = this.view.getPrevItem();\n\t\t\tif (item) { item.selected = true; }\n\t\t}\n\t}\n\n\t/**\n\t * Returns the display value if there is a selection and displayValue is set,\n\t * if there is just a selection the ListItem content property will be returned,\n\t * otherwise the placeholder will be returned.\n\t */\n\tgetDisplayStringValue(): Observable<string> {\n\t\tif (!this.view) {\n\t\t\treturn;\n\t\t}\n\t\tlet selected = this.view.getSelected();\n\t\tif (selected.length && (!this.displayValue || !this.isRenderString())) {\n\t\t\tif (this.type === \"multi\") {\n\t\t\t\treturn of(this.placeholder);\n\t\t\t} else {\n\t\t\t\treturn of(selected[0].content);\n\t\t\t}\n\t\t} else if (selected.length && this.isRenderString()) {\n\t\t\treturn of(this.displayValue as string);\n\t\t}\n\t\treturn of(this.placeholder);\n\t}\n\n\tisRenderString(): boolean {\n\t\treturn typeof this.displayValue === \"string\";\n\t}\n\n\tgetRenderTemplateContext() {\n\t\tif (!this.view) {\n\t\t\treturn;\n\t\t}\n\t\tlet selected = this.view.getSelected();\n\t\tif (this.type === \"multi\") {\n\t\t\treturn {items: selected};\n\t\t} else if (selected && selected.length > 0) {\n\t\t\treturn {item: selected[0]}; // this is to be compatible with the dropdown-list template\n\t\t} else {\n\t\t\treturn {};\n\t\t}\n\t}\n\n\tgetSelectedCount(): number {\n\t\tif (this.view.getSelected()) {\n\t\t\treturn this.view.getSelected().length;\n\t\t}\n\t}\n\n\tclearSelected() {\n\t\tif (this.disabled) { return; }\n\t\tfor (const item of this.view.getListItems()) {\n\t\t\titem.selected = false;\n\t\t}\n\t\tthis.selected.emit([]);\n\t\tthis.propagateChange([]);\n\t}\n\n\t/**\n\t * Returns `true` if there is a value selected.\n\t */\n\tvalueSelected(): boolean {\n\t\tif (this.view.getSelected()) { return true; }\n\t\treturn false;\n\t}\n\n\t_noop() {}\n\t/**\n\t * Handles clicks outside of the `Dropdown`.\n\t */\n\t_outsideClick(event) {\n\t\tif (!this.elementRef.nativeElement.contains(event.target) &&\n\t\t\t// if we're appendToBody the list isn't within the _elementRef,\n\t\t\t// so we've got to check if our target is possibly in there too.\n\t\t\t!this.dropdownMenu.nativeElement.contains(event.target)) {\n\t\t\tthis.closeMenu();\n\t\t}\n\t}\n\t_outsideKey(event) {\n\t\tif (!this.menuIsClosed && event.key === \"Tab\" && this.dropdownMenu.nativeElement.contains(event.target as Node)) {\n\t\t\tthis.closeMenu();\n\t\t}\n\t}\n\t/**\n\t * Handles keyboard events so users are controlling the `Dropdown` instead of unintentionally controlling outside elements.\n\t */\n\t_keyboardNav(event: KeyboardEvent) {\n\t\t// \"Esc\" is an IE specific value\n\t\tif ((event.key === \"Escape\" || event.key === \"Esc\") && !this.menuIsClosed) {\n\t\t\tevent.stopImmediatePropagation();  // don't unintentionally close modal if inside of it\n\t\t}\n\t\tif (event.key === \"Escape\" || event.key === \"Esc\") {\n\t\t\tevent.preventDefault();\n\t\t\tthis.closeMenu();\n\t\t\tthis.dropdownButton.nativeElement.focus();\n\t\t} else if (!this.menuIsClosed && event.key === \"Tab\") {\n\t\t\t// this way focus will start on the next focusable item from the dropdown\n\t\t\t// not the top of the body!\n\t\t\tthis.dropdownButton.nativeElement.focus();\n\t\t\tthis.dropdownButton.nativeElement.dispatchEvent(new KeyboardEvent(\"keydown\", {bubbles: true, cancelable: true, key: \"Tab\"}));\n\t\t\tthis.closeMenu();\n\t\t}\n\t}\n\n\t/**\n\t * Creates the `Dropdown` list appending it to the dropdown parent object instead of the body.\n\t */\n\t_appendToDropdown() {\n\t\tthis.dropdownService.appendToDropdown(this.elementRef.nativeElement);\n\t\tthis.dropdownMenu.nativeElement.removeEventListener(\"keydown\", this.keyboardNav, true);\n\t}\n\n\t/**\n\t * Creates the `Dropdown` list as an element that is appended to the DOM body.\n\t */\n\t_appendToBody() {\n\t\tconst lightClass = this.theme === \"light\" ? \" bx--list-box--light\" : \"\";\n\t\tconst expandedClass = !this.menuIsClosed ? \" bx--list-box--expanded\" : \"\";\n\t\tthis.dropdownService.appendToBody(\n\t\t\tthis.dropdownButton.nativeElement,\n\t\t\tthis.dropdownMenu.nativeElement,\n\t\t\t`${this.elementRef.nativeElement.className}${lightClass}${expandedClass}`);\n\t\tthis.dropdownMenu.nativeElement.addEventListener(\"keydown\", this.keyboardNav, true);\n\t}\n\n\t/**\n\t * Detects whether or not the `Dropdown` list is visible within all scrollable parents.\n\t * This can be overridden by passing in a value to the `dropUp` input.\n\t */\n\t_shouldDropUp() {\n\t\t// check if dropdownMenu exists first.\n\t\tconst menu = this.dropdownMenu && this.dropdownMenu.nativeElement.querySelector(\".bx--list-box__menu\");\n\t\t// check if menu exists first.\n\t\tconst menuRect = menu && menu.getBoundingClientRect();\n\t\tif (menu && menuRect) {\n\t\t\tconst scrollableParents = getScrollableParents(menu);\n\t\t\treturn scrollableParents.reduce((shouldDropUp: boolean, parent: HTMLElement) => {\n\t\t\t\tconst parentRect = parent.getBoundingClientRect();\n\t\t\t\tconst isBelowParent = !(menuRect.bottom <= parentRect.bottom);\n\t\t\t\treturn shouldDropUp || isBelowParent;\n\t\t\t}, false);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Expands the dropdown menu in the view.\n\t */\n\topenMenu() {\n\t\t// prevents the dropdown from opening when list of items is empty\n\t\tif (this.view.getListItems().length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._dropUp = false;\n\t\tthis.menuIsClosed = false;\n\n\t\t// move the dropdown list to the body if we're not appending inline\n\t\t// and position it relative to the dropdown wrapper\n\t\tif (!this.appendInline) {\n\t\t\tconst target = this.dropdownButton.nativeElement;\n\t\t\tconst parent = this.elementRef.nativeElement;\n\t\t\tthis.visibilitySubscription = this.elementService\n\t\t\t\t.visibility(target, parent)\n\t\t\t\t.subscribe(value => {\n\t\t\t\t\tif (!value.visible) {\n\t\t\t\t\t\tthis.closeMenu();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t\tthis._appendToBody();\n\t\t}\n\n\t\t// set the dropdown menu to drop up if it's near the bottom of the screen\n\t\t// setTimeout lets us measure after it's visible in the DOM\n\t\tsetTimeout(() => {\n\t\t\tif (this.dropUp === null || this.dropUp === undefined) {\n\t\t\t\tthis._dropUp = this._shouldDropUp();\n\t\t\t}\n\t\t}, 0);\n\n\t\t// we bind noop to document.body.firstElementChild to allow safari to fire events\n\t\t// from document. Then we unbind everything later to keep things light.\n\t\tdocument.body.firstElementChild.addEventListener(\"click\", this.noop, true);\n\t\tdocument.body.firstElementChild.addEventListener(\"keydown\", this.noop, true);\n\t\tdocument.addEventListener(\"click\", this.outsideClick, true);\n\t\tdocument.addEventListener(\"keydown\", this.outsideKey, true);\n\t\tsetTimeout(() => this.view.initFocus(), 0);\n\t}\n\n\t/**\n\t * Collapsing the dropdown menu and removing unnecessary `EventListeners`.\n\t */\n\tcloseMenu() {\n\t\t// return early if the menu is already closed\n\t\tif (this.menuIsClosed) { return; }\n\t\tthis.menuIsClosed = true;\n\t\tthis.checkForReorder();\n\t\tthis.onClose.emit();\n\t\tthis.close.emit();\n\n\t\t// focus the trigger button when we close ...\n\t\tthis.dropdownButton.nativeElement.focus();\n\n\t\t// remove the conditional once this api is settled and part of abstract-dropdown-view.class\n\t\tif (this.view[\"disableScroll\"]) {\n\t\t\tthis.view[\"disableScroll\"]();\n\t\t}\n\n\t\t// move the list back in the component on close\n\t\tif (!this.appendInline) {\n\t\t\tthis.visibilitySubscription.unsubscribe();\n\t\t\tthis._appendToDropdown();\n\t\t}\n\t\tdocument.body.firstElementChild.removeEventListener(\"click\", this.noop, true);\n\t\tdocument.body.firstElementChild.removeEventListener(\"keydown\", this.noop, true);\n\t\tdocument.removeEventListener(\"click\", this.outsideClick, true);\n\t\tdocument.removeEventListener(\"keydown\", this.outsideKey, true);\n\t}\n\n\t/**\n\t * Controls toggling menu states between open/expanded and closed/collapsed.\n\t */\n\ttoggleMenu() {\n\t\tif (this.menuIsClosed) {\n\t\t\tthis.openMenu();\n\t\t} else {\n\t\t\tthis.closeMenu();\n\t\t}\n\t}\n\n\tpublic isTemplate(value) {\n\t\treturn value instanceof TemplateRef;\n\t}\n\n\t/**\n\t * Controls when it's needed to apply the selection feedback\n\t */\n\tprotected checkForReorder() {\n\t\tconst topAfterReopen = this.menuIsClosed && this.selectionFeedback === \"top-after-reopen\";\n\t\tif ((this.type === \"multi\") && (topAfterReopen || this.selectionFeedback === \"top\")) {\n\t\t\tthis.view.reorderSelected(this.selectionFeedback === \"top\");\n\t\t}\n\t}\n}\n","import {\n\tComponent,\n\tInput,\n\tOutput,\n\tOnDestroy,\n\tEventEmitter,\n\tTemplateRef,\n\tAfterViewInit,\n\tViewChild,\n\tElementRef,\n\tViewChildren,\n\tQueryList\n} from \"@angular/core\";\nimport { Observable, isObservable, Subscription, of } from \"rxjs\";\nimport { first } from \"rxjs/operators\";\n\nimport { I18n } from \"carbon-components-angular/i18n\";\nimport { AbstractDropdownView } from \"../abstract-dropdown-view.class\";\nimport { ListItem } from \"../list-item.interface\";\nimport { watchFocusJump } from \"../dropdowntools\";\nimport { ScrollCustomEvent } from \"./scroll-custom-event.interface\";\n\n\n/**\n * ```html\n * <ibm-dropdown-list [items]=\"listItems\"></ibm-dropdown-list>\n * ```\n * ```typescript\n * listItems = [\n * \t{\n * \t\tcontent: \"item one\",\n * \t\tselected: false\n * \t},\n * \t{\n * \t\tcontent: \"item two\",\n * \t\tselected: false,\n * \t},\n * \t{\n * \t\tcontent: \"item three\",\n * \t\tselected: false\n * \t},\n * \t{\n * \t\tcontent: \"item four\",\n * \t\tselected: false\n * \t}\n * ];\n * ```\n */\n@Component({\n\tselector: \"ibm-dropdown-list\",\n\ttemplate: `\n\t\t<ul\n\t\t\t#list\n\t\t\trole=\"listbox\"\n\t\t\tclass=\"bx--list-box__menu bx--multi-select\"\n\t\t\t(scroll)=\"emitScroll($event)\"\n\t\t\t[attr.aria-label]=\"ariaLabel\">\n\t\t\t<li\n\t\t\t\trole=\"option\"\n\t\t\t\t*ngFor=\"let item of displayItems; let i = index\"\n\t\t\t\t(click)=\"doClick($event, item)\"\n\t\t\t\t(keydown)=\"doKeyDown($event, item)\"\n\t\t\t\t(focus)=\"onItemFocus(i)\"\n\t\t\t\t(blur)=\"onItemBlur(i)\"\n\t\t\t\tclass=\"bx--list-box__menu-item\"\n\t\t\t\t[ngClass]=\"{\n\t\t\t\t\t'bx--list-box__menu-item--active': item.selected,\n\t\t\t\t\tdisabled: item.disabled\n\t\t\t\t}\"\n\t\t\t\t[title]=\"item.content\">\n\t\t\t\t<div\n\t\t\t\t\t#listItem\n\t\t\t\t\ttabindex=\"-1\"\n\t\t\t\t\tclass=\"bx--list-box__menu-item__option\">\n\t\t\t\t\t<div\n\t\t\t\t\t\t*ngIf=\"!listTpl && type === 'multi'\"\n\t\t\t\t\t\tclass=\"bx--form-item bx--checkbox-wrapper\">\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t[attr.data-contained-checkbox-state]=\"item.selected\"\n\t\t\t\t\t\t\tclass=\"bx--checkbox-label\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclass=\"bx--checkbox\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t[checked]=\"item.selected\"\n\t\t\t\t\t\t\t\t[disabled]=\"item.disabled\"\n\t\t\t\t\t\t\t\ttabindex=\"-1\">\n\t\t\t\t\t\t\t<span class=\"bx--checkbox-appearance\"></span>\n\t\t\t\t\t\t\t<span class=\"bx--checkbox-label-text\">{{item.content}}</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<ng-container *ngIf=\"!listTpl && type === 'single'\">{{item.content}}</ng-container>\n\t\t\t\t\t<svg\n\t\t\t\t\t\t*ngIf=\"!listTpl && type === 'single'\"\n\t\t\t\t\t\tibmIcon=\"checkmark\"\n\t\t\t\t\t\tsize=\"16\"\n\t\t\t\t\t\tclass=\"bx--list-box__menu-item__selected-icon\">\n\t\t\t\t\t</svg>\n\t\t\t\t\t<ng-template\n\t\t\t\t\t\t*ngIf=\"listTpl\"\n\t\t\t\t\t\t[ngTemplateOutletContext]=\"{item: item}\"\n\t\t\t\t\t\t[ngTemplateOutlet]=\"listTpl\">\n\t\t\t\t\t</ng-template>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t</ul>`,\n\tproviders: [\n\t\t{\n\t\t\tprovide: AbstractDropdownView,\n\t\t\tuseExisting: DropdownList\n\t\t}\n\t]\n})\nexport class DropdownList implements AbstractDropdownView, AfterViewInit, OnDestroy {\n\t@Input() ariaLabel = this.i18n.get().DROPDOWN_LIST.LABEL;\n\t/**\n\t * The list items belonging to the `DropdownList`.\n\t */\n\t@Input() set items (value: Array<ListItem> | Observable<Array<ListItem>>) {\n\t\tif (isObservable(value)) {\n\t\t\tif (this._itemsSubscription) {\n\t\t\t\tthis._itemsSubscription.unsubscribe();\n\t\t\t}\n\t\t\tthis._itemsReady = new Observable<boolean>((observer) => {\n\t\t\t\tthis._itemsSubscription = value.subscribe(v => {\n\t\t\t\t\tthis.updateList(v);\n\t\t\t\t\tobserver.next(true);\n\t\t\t\t\tobserver.complete();\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.onItemsReady(null);\n\t\t} else {\n\t\t\tthis.updateList(value);\n\t\t}\n\t\tthis._originalItems = value;\n\t}\n\n\tget items(): Array<ListItem> | Observable<Array<ListItem>> {\n\t\treturn this._originalItems;\n\t}\n\t/**\n\t * Template to bind to items in the `DropdownList` (optional).\n\t */\n\t@Input() listTpl: string | TemplateRef<any> = null;\n\t/**\n\t * Event to emit selection of a list item within the `DropdownList`.\n\t */\n\t@Output() select: EventEmitter<{ item: ListItem, isUpdate?: boolean } | ListItem[]> = new EventEmitter();\n\t/**\n\t * Event to emit scroll event of a list within the `DropdownList`.\n\t */\n\t@Output() scroll: EventEmitter<ScrollCustomEvent> = new EventEmitter();\n\t/**\n\t * Event to suggest a blur on the view.\n\t * Emits _after_ the first/last item has been focused.\n\t * ex.\n\t * ArrowUp -> focus first item\n\t * ArrowUp -> emit event\n\t *\n\t * When this event fires focus should be placed on some element outside of the list - blurring the list as a result\n\t */\n\t@Output() blurIntent = new EventEmitter<\"top\" | \"bottom\">();\n\t/**\n\t * Maintains a reference to the view DOM element for the unordered list of items within the `DropdownList`.\n\t */\n\t// @ts-ignore\n\t@ViewChild(\"list\", { static: true }) list: ElementRef;\n\t/**\n\t * Defines whether or not the `DropdownList` supports selecting multiple items as opposed to single\n\t * item selection.\n\t */\n\t@Input() type: \"single\" | \"multi\" = \"single\";\n\t/**\n\t * Defines the rendering size of the `DropdownList` input component.\n\t *\n\t * @deprecated since v4\n\t */\n\tpublic size: \"sm\" | \"md\" | \"xl\" = \"md\";\n\t/**\n\t * Holds the list of items that will be displayed in the `DropdownList`.\n\t * It differs from the the complete set of items when filtering is used (but\n\t * it is always a subset of the total items in `DropdownList`).\n\t */\n\tpublic displayItems: Array<ListItem> = [];\n\t/**\n\t * Maintains the index for the selected item within the `DropdownList`.\n\t */\n\tprotected index = -1;\n\t/**\n\t * An array holding the HTML list elements in the view.\n\t */\n\t@ViewChildren(\"listItem\") protected listElementList: QueryList<ElementRef>;\n\t/**\n\t * Observable bound to keydown events to control filtering.\n\t */\n\tprotected focusJump;\n\t/**\n\t * Tracks the current (if any) subscription to the items observable so we can clean up when the input is updated.\n\t */\n\tprotected _itemsSubscription: Subscription;\n\t/**\n\t * Used to retain the original items passed to the setter.\n\t */\n\tprotected _originalItems: Array<ListItem> | Observable<Array<ListItem>>;\n\t/**\n\t * Useful representation of the items, should be accessed via `getListItems`.\n\t */\n\tprotected _items: Array<ListItem> = [];\n\t/**\n\t * Used to wait for items in case they are passed through an observable.\n\t */\n\tprotected _itemsReady: Observable<boolean>;\n\n\t/**\n\t * Creates an instance of `DropdownList`.\n\t */\n\tconstructor(public elementRef: ElementRef, protected i18n: I18n) {}\n\n\t/**\n\t * Retrieves array of list items and index of the selected item after view has rendered.\n\t * Additionally, any Observables for the `DropdownList` are initialized.\n\t */\n\tngAfterViewInit() {\n\t\tthis.index = this.getListItems().findIndex(item => item.selected);\n\t\tthis.setupFocusObservable();\n\t\tsetTimeout(() => {\n\t\t\tthis.doEmitSelect(true);\n\t\t});\n\t}\n\n\t/**\n\t * Removes any Observables on destruction of the component.\n\t */\n\tngOnDestroy() {\n\t\tif (this.focusJump) {\n\t\t\tthis.focusJump.unsubscribe();\n\t\t}\n\t\tif (this._itemsSubscription) {\n\t\t\tthis._itemsSubscription.unsubscribe();\n\t\t}\n\t}\n\n\tdoEmitSelect(isUpdate = true) {\n\t\tif (this.type === \"single\") {\n\t\t\tthis.select.emit({ item: this._items.find(item => item.selected), isUpdate: isUpdate });\n\t\t} else {\n\t\t\t// abuse javascripts object mutability until we can break the API and switch to\n\t\t\t// { items: [], isUpdate: true }\n\t\t\tconst selected = this.getSelected() || [];\n\t\t\tselected[\"isUpdate\"] = isUpdate;\n\t\t\tthis.select.emit(selected);\n\t\t}\n\t}\n\n\t/**\n\t * Updates the displayed list of items and then retrieves the most current properties for the `DropdownList` from the DOM.\n\t */\n\tupdateList(items) {\n\t\tthis._items = items.map(item => Object.assign({}, item));\n\t\tthis.displayItems = this._items;\n\t\tthis.index = this._items.findIndex(item => item.selected);\n\t\tthis.setupFocusObservable();\n\t\tsetTimeout(() => {\n\t\t\tif (this.getSelected() !== []) { return; }\n\t\t\tthis.doEmitSelect();\n\t\t});\n\t}\n\n\t/**\n\t * Filters the items being displayed in the DOM list.\n\t */\n\tfilterBy(query = \"\") {\n\t\tif (query) {\n\t\t\tthis.displayItems = this.getListItems().filter(item => item.content.toLowerCase().includes(query.toLowerCase()));\n\t\t} else {\n\t\t\tthis.displayItems = this.getListItems();\n\t\t}\n\t\t// reset the index since the list has changed visually\n\t\tthis.index = 0;\n\t}\n\n\t/**\n\t * Initializes (or re-initializes) the Observable that handles switching focus to an element based on\n\t * key input matching the first letter of the item in the list.\n\t */\n\tsetupFocusObservable() {\n\t\tif (!this.list) { return; }\n\t\tif (this.focusJump) {\n\t\t\tthis.focusJump.unsubscribe();\n\t\t}\n\t\tlet elList = Array.from(this.list.nativeElement.querySelectorAll(\"li\"));\n\t\tthis.focusJump = watchFocusJump(this.list.nativeElement, elList)\n\t\t\t.subscribe(el => {\n\t\t\t\tel.focus();\n\t\t\t});\n\t}\n\n\t/**\n\t * Returns the `ListItem` that is subsequent to the selected item in the `DropdownList`.\n\t */\n\tgetNextItem(): ListItem {\n\t\tif (this.index < this.displayItems.length - 1) {\n\t\t\tthis.index++;\n\t\t}\n\t\treturn this.displayItems[this.index];\n\t}\n\n\t/**\n\t * Returns `true` if the selected item is not the last item in the `DropdownList`.\n\t */\n\thasNextElement(): boolean {\n\t\tif (this.index < this.displayItems.length - 1) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * Returns the `HTMLElement` for the item that is subsequent to the selected item.\n\t */\n\tgetNextElement(): HTMLElement {\n\t\tif (this.index < this.displayItems.length - 1) {\n\t\t\tthis.index++;\n\t\t}\n\t\tlet elem = this.listElementList.toArray()[this.index].nativeElement;\n\t\tlet item = this.displayItems[this.index];\n\t\tif (item.disabled) {\n\t\t\treturn this.getNextElement();\n\t\t}\n\t\treturn elem;\n\t}\n\n\t/**\n\t * Returns the `ListItem` that precedes the selected item within `DropdownList`.\n\t */\n\tgetPrevItem(): ListItem {\n\t\tif (this.index > 0) {\n\t\t\tthis.index--;\n\t\t}\n\t\treturn this.displayItems[this.index];\n\t}\n\n\t/**\n\t * Returns `true` if the selected item is not the first in the list.\n\t */\n\thasPrevElement(): boolean {\n\t\tif (this.index > 0) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * Returns the `HTMLElement` for the item that precedes the selected item.\n\t */\n\tgetPrevElement(): HTMLElement {\n\t\tif (this.index > 0) {\n\t\t\tthis.index--;\n\t\t}\n\t\tlet elem = this.listElementList.toArray()[this.index].nativeElement;\n\t\tlet item = this.displayItems[this.index];\n\t\tif (item.disabled) {\n\t\t\treturn this.getPrevElement();\n\t\t}\n\t\treturn elem;\n\t}\n\n\t/**\n\t * Returns the `ListItem` that is selected within `DropdownList`.\n\t */\n\tgetCurrentItem(): ListItem {\n\t\tif (this.index < 0) {\n\t\t\treturn this.displayItems[0];\n\t\t}\n\t\treturn this.displayItems[this.index];\n\t}\n\n\t/**\n\t * Returns the `HTMLElement` for the item that is selected within the `DropdownList`.\n\t */\n\tgetCurrentElement(): HTMLElement {\n\t\tif (this.index < 0) {\n\t\t\treturn this.listElementList.first.nativeElement;\n\t\t}\n\t\treturn this.listElementList.toArray()[this.index].nativeElement;\n\t}\n\n\t/**\n\t * Returns the items as an Array\n\t */\n\tgetListItems(): Array<ListItem> {\n\t\treturn this._items;\n\t}\n\n\t/**\n\t * Returns a list containing the selected item(s) in the `DropdownList`.\n\t */\n\tgetSelected(): ListItem[] {\n\t\tlet selected = this.getListItems().filter(item => item.selected);\n\t\tif (selected.length === 0) {\n\t\t\treturn [];\n\t\t}\n\t\treturn selected;\n\t}\n\n\t/**\n\t * Transforms array input list of items to the correct state by updating the selected item(s).\n\t */\n\tpropagateSelected(value: Array<ListItem>): void {\n\t\t// if we get a non-array, log out an error (since it is one)\n\t\tif (!Array.isArray(value)) {\n\t\t\tconsole.error(`${this.constructor.name}.propagateSelected expects an Array<ListItem>, got ${JSON.stringify(value)}`);\n\t\t}\n\t\tthis.onItemsReady(() => {\n\t\t\t// loop through the list items and update the `selected` state for matching items in `value`\n\t\t\tfor (let oldItem of this.getListItems()) {\n\t\t\t\t// copy the item\n\t\t\t\tlet tempOldItem: string | ListItem = Object.assign({}, oldItem);\n\t\t\t\t// deleted selected because it's what we _want_ to change\n\t\t\t\tdelete tempOldItem.selected;\n\t\t\t\t// stringify for compare\n\t\t\t\ttempOldItem = JSON.stringify(tempOldItem);\n\t\t\t\tfor (let newItem of value) {\n\t\t\t\t\t// copy the item\n\t\t\t\t\tlet tempNewItem: string | ListItem = Object.assign({}, newItem);\n\t\t\t\t\t// deleted selected because it's what we _want_ to change\n\t\t\t\t\tdelete tempNewItem.selected;\n\t\t\t\t\t// stringify for compare\n\t\t\t\t\ttempNewItem = JSON.stringify(tempNewItem);\n\t\t\t\t\t// do the compare\n\t\t\t\t\tif (tempOldItem.includes(tempNewItem)) {\n\t\t\t\t\t\toldItem.selected = newItem.selected;\n\t\t\t\t\t\t// if we've found a matching item, we can stop looping\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\toldItem.selected = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Initializes focus in the list, effectively a wrapper for `getCurrentElement().focus()`\n\t */\n\tinitFocus() {\n\t\t// ensure we start at this first item if nothing is already selected\n\t\tif (this.index < 0) {\n\t\t\tthis.index = 0;\n\t\t}\n\t\tthis.getCurrentElement().focus();\n\t}\n\n\t/**\n\t * Manages the keyboard accessibility for navigation and selection within a `DropdownList`.\n\t */\n\tdoKeyDown(event: KeyboardEvent, item: ListItem) {\n\t\t// \"Spacebar\", \"Down\", and \"Up\" are IE specific values\n\t\tif (event.key === \"Enter\" || event.key === \" \" || event.key === \"Spacebar\") {\n\t\t\t\tif (this.listElementList.some(option => option.nativeElement === event.target)) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t\tif (event.key === \"Enter\") {\n\t\t\t\t\tthis.doClick(event, item);\n\t\t\t\t}\n\t\t} else if (event.key === \"ArrowDown\" || event.key === \"ArrowUp\" || event.key === \"Down\" || event.key === \"Up\") {\n\t\t\tevent.preventDefault();\n\t\t\tif (event.key === \"ArrowDown\" || event.key === \"Down\") {\n\t\t\t\tif (this.hasNextElement()) {\n\t\t\t\t\tthis.getNextElement().focus();\n\t\t\t\t} else {\n\t\t\t\t\tthis.blurIntent.emit(\"bottom\");\n\t\t\t\t}\n\t\t\t} else if (event.key === \"ArrowUp\" || event.key === \"Up\") {\n\t\t\t\tif (this.hasPrevElement()) {\n\t\t\t\t\tthis.getPrevElement().focus();\n\t\t\t\t} else {\n\t\t\t\t\tthis.blurIntent.emit(\"top\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Emits the selected item or items after a mouse click event has occurred.\n\t */\n\tdoClick(event, item) {\n\t\tevent.preventDefault();\n\t\tif (!item.disabled) {\n\t\t\tif (this.type === \"single\") {\n\t\t\t\titem.selected = true;\n\t\t\t\t// reset the selection\n\t\t\t\tfor (let otherItem of this.getListItems()) {\n\t\t\t\t\tif (item !== otherItem) { otherItem.selected = false; }\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\titem.selected = !item.selected;\n\t\t\t}\n\t\t\tthis.index = this.displayItems.indexOf(item);\n\t\t\tthis.doEmitSelect(false);\n\t\t}\n\t}\n\n\tonItemFocus(index) {\n\t\tconst element = this.listElementList.toArray()[index].nativeElement;\n\t\telement.classList.add(\"bx--list-box__menu-item--highlighted\");\n\t\telement.tabIndex = 0;\n\t}\n\n\tonItemBlur(index) {\n\t\tconst element = this.listElementList.toArray()[index].nativeElement;\n\t\telement.classList.remove(\"bx--list-box__menu-item--highlighted\");\n\t\telement.tabIndex = -1;\n\t}\n\n\t/**\n\t * Emits the scroll event of the options list\n\t */\n\temitScroll(event) {\n\t\tconst atTop: boolean = event.srcElement.scrollTop === 0;\n\t\tconst atBottom: boolean = event.srcElement.scrollHeight - event.srcElement.scrollTop === event.srcElement.clientHeight;\n\t\tconst customScrollEvent = { atTop, atBottom, event };\n\t\tthis.scroll.emit(customScrollEvent);\n\t}\n\n\t/**\n\t * Subscribe the function passed to an internal observable that will resolve once the items are ready\n\t */\n\tonItemsReady(subcription: () => void): void {\n\t\t// this subscription will auto unsubscribe because of the `first()` pipe\n\t\t(this._itemsReady || of(true)).pipe(first()).subscribe(subcription);\n\t}\n\n\treorderSelected(moveFocus = false): void {\n\t\tthis.displayItems = [...this.getSelected(), ...this.getListItems().filter(item => !item.selected)];\n\t\tif (moveFocus) {\n\t\t\tsetTimeout(() => this.getCurrentElement().focus());\n\t\t}\n\t}\n}\n","import { Observable, fromEvent } from \"rxjs\";\nimport { debounceTime, map, filter } from \"rxjs/operators\";\n\n/**\n * returns an observable bound to keydown events that\n * filters to a single element where the first letter of\n * it's textContent matches the key pressed\n *\n * @param target element to watch\n * @param elements elements to search\n */\nexport function watchFocusJump(target: HTMLElement, elements): Observable<HTMLElement> {\n\treturn fromEvent(target, \"keydown\")\n\t\t.pipe(\n\t\t\tdebounceTime(150),\n\t\t\tmap((ev: KeyboardEvent) => {\n\t\t\t\tlet el = elements.find((itemEl) =>\n\t\t\t\t\titemEl.textContent.trim().toLowerCase().startsWith(ev.key));\n\t\t\t\tif (el) { return el; }\n\t\t\t}),\n\t\t\tfilter(el => !!el)\n\t\t);\n}\n\n/** bundle of functions to aid in manipulating tree structures */\nexport const treetools = {\n\t/** finds an item in a set of items and returns the item and path to the item as an array */\n\tfind: function(items, itemToFind, path = []) {\n\t\tlet found;\n\t\tfor (let i of items) {\n\t\t\tif (i === itemToFind) {\n\t\t\t\tpath.push(i);\n\t\t\t\tfound = i;\n\t\t\t}\n\t\t\tif (i.items && !found) {\n\t\t\t\tpath.push(i);\n\t\t\t\tfound = this.find(i.items, itemToFind, path).found;\n\t\t\t\tif (!found) { path = []; }\n\t\t\t}\n\t\t}\n\t\treturn {found, path};\n\t}\n};\n","import {\n\tInput,\n\tDirective,\n\tElementRef,\n\tHostListener,\n\tOnChanges,\n\tSimpleChanges,\n\tAfterViewInit\n} from \"@angular/core\";\n\n@Directive({\n\tselector: \"[ibmScrollableList]\",\n\texportAs: \"scrollable-list\"\n})\nexport class ScrollableList implements OnChanges, AfterViewInit {\n\t/**\n\t * Optional target list to scroll\n\t */\n\t@Input() nScrollableList: string = null;\n\t/**\n\t * Enables or disables scrolling for the whole directive\n\t */\n\t@Input() scrollEnabled = true;\n\t/**\n\t * Sets the target used for hover scrolling up\n\t */\n\t@Input() scrollUpTarget: HTMLElement;\n\t/**\n\t * Sets the target used for hover scrolling down\n\t */\n\t@Input() scrollDownTarget: HTMLElement;\n\t/**\n\t * How many lines to scroll by each time `wheel` fires\n\t * Defaults to 10 - based on testing this isn't too fast or slow on any platform\n\t */\n\t@Input() scrollBy = 10;\n\n\t// keeps track of the setInterval for hover scrolling\n\tprotected hoverScrollInterval;\n\t// tracks the last touch event\n\tprotected lastTouch;\n\tprotected canScrollUp = false;\n\tprotected canScrollDown = false;\n\tprotected list = this.elementRef.nativeElement;\n\n\tconstructor(protected elementRef: ElementRef) {}\n\n\tngOnChanges(changes: SimpleChanges) {\n\t\tif (changes.scrollEnabled) {\n\t\t\tif (changes.scrollEnabled.currentValue) {\n\t\t\t\tthis.list.style.overflow = \"hidden\";\n\t\t\t\tthis.scrollUpTarget.style.display = \"flex\";\n\t\t\t\tthis.scrollDownTarget.style.display = \"flex\";\n\t\t\t\tthis.canScrollUp = true;\n\t\t\t\tthis.canScrollDown = true;\n\t\t\t\tthis.updateScrollHeight();\n\t\t\t\tthis.checkScrollArrows();\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.checkScrollArrows();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.scrollUpTarget.style.display = \"none\";\n\t\t\t\tthis.scrollDownTarget.style.display = \"none\";\n\t\t\t\tthis.canScrollUp = false;\n\t\t\t\tthis.canScrollDown = false;\n\t\t\t\tthis.list.style.height = null;\n\t\t\t\tthis.list.style.overflow = null;\n\t\t\t\tclearInterval(this.hoverScrollInterval);\n\t\t\t}\n\t\t}\n\t}\n\n\tngAfterViewInit() {\n\t\tif (this.nScrollableList) {\n\t\t\tthis.list = this.elementRef.nativeElement.querySelector(this.nScrollableList);\n\t\t}\n\t\tthis.scrollUpTarget.addEventListener(\"mouseover\", () => this.onHoverUp(true));\n\t\tthis.scrollUpTarget.addEventListener(\"mouseout\", () => this.onHoverUp(false));\n\t\tthis.scrollDownTarget.addEventListener(\"mouseover\", () => this.onHoverDown(true));\n\t\tthis.scrollDownTarget.addEventListener(\"mouseout\", () => this.onHoverDown(false));\n\t}\n\n\tpublic updateScrollHeight() {\n\t\tif (this.scrollEnabled) {\n\t\t\tconst container = this.elementRef.nativeElement.parentElement;\n\t\t\tconst containerRect = container.getBoundingClientRect();\n\t\t\tconst innerHeightDiff = this.list.getBoundingClientRect().top - containerRect.top;\n\t\t\tconst outerHeightDiff = containerRect.height - (containerRect.bottom - window.innerHeight);\n\t\t\t// 40 gives us some padding between the bottom of the list,\n\t\t\t// the bottom of the window, and the scroll down button\n\t\t\tconst height = outerHeightDiff - innerHeightDiff - 40;\n\t\t\tthis.list.style.height = `${height}px`;\n\t\t}\n\t}\n\n\tprotected checkScrollArrows() {\n\t\tconst scrollUpHeight = this.scrollUpTarget.offsetHeight;\n\t\tconst scrollDownHeight = this.scrollDownTarget.offsetHeight;\n\t\tif (this.list.scrollTop === 0) {\n\t\t\tif (this.canScrollUp) {\n\t\t\t\tthis.list.style.height = `${parseInt(this.list.style.height, 10) + scrollUpHeight}px`;\n\t\t\t}\n\t\t\tthis.scrollUpTarget.style.display = \"none\";\n\t\t\tthis.canScrollUp = false;\n\t\t} else if (this.list.scrollTop === this.list.scrollTopMax) {\n\t\t\tif (this.canScrollDown) {\n\t\t\t\tthis.list.style.height = `${parseInt(this.list.style.height, 10) + scrollDownHeight}px`;\n\t\t\t}\n\t\t\tthis.scrollDownTarget.style.display = \"none\";\n\t\t\tthis.canScrollDown = false;\n\t\t} else {\n\t\t\tif (!this.canScrollUp) {\n\t\t\t\tthis.list.style.height = `${parseInt(this.list.style.height, 10) - scrollUpHeight}px`;\n\t\t\t}\n\t\t\tif (!this.canScrollDown) {\n\t\t\t\tthis.list.style.height = `${parseInt(this.list.style.height, 10) - scrollDownHeight}px`;\n\t\t\t}\n\t\t\tthis.scrollUpTarget.style.display = \"flex\";\n\t\t\tthis.scrollDownTarget.style.display = \"flex\";\n\t\t\tthis.canScrollUp = true;\n\t\t\tthis.canScrollDown = true;\n\t\t}\n\t}\n\n\t@HostListener(\"wheel\", [\"$event\"])\n\tprotected onWheel(event) {\n\t\tif (event.deltaY < 0) {\n\t\t\tthis.list.scrollTop -= this.scrollBy;\n\t\t} else {\n\t\t\tthis.list.scrollTop += this.scrollBy;\n\t\t}\n\t\t// only prevent the parent/window from scrolling if we can scroll\n\t\tif (!(this.list.scrollTop === this.list.scrollTopMax || this.list.scrollTop === 0)) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t}\n\t\tthis.checkScrollArrows();\n\t}\n\n\t@HostListener(\"touchstart\", [\"$event\"])\n\tprotected onTouchStart(event) {\n\t\tif (event.touches[0]) {\n\t\t\tthis.lastTouch = event.touches[0].clientY;\n\t\t}\n\t}\n\n\t@HostListener(\"touchmove\", [\"$event\"])\n\tprotected onTouchMove(event) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tif (event.touches[0]) {\n\t\t\tconst touch = event.touches[0];\n\t\t\tthis.list.scrollTop += this.lastTouch - touch.clientY;\n\t\t\tthis.lastTouch = touch.clientY;\n\t\t\tthis.checkScrollArrows();\n\t\t}\n\t}\n\n\tprotected hoverScrollBy(hovering, amount) {\n\t\tif (hovering) {\n\t\t\tthis.hoverScrollInterval = setInterval(() => {\n\t\t\t\tthis.list.scrollTop += amount;\n\t\t\t\tthis.checkScrollArrows();\n\t\t\t}, 1);\n\t\t} else {\n\t\t\tclearInterval(this.hoverScrollInterval);\n\t\t}\n\t}\n\n\tprotected onHoverUp(hovering) {\n\t\t// how many px/lines to scroll by on hover\n\t\t// 3 is just a random number that felt good\n\t\t// 1 and 2 are too slow, 4 works but it might be a tad fast\n\t\tthis.hoverScrollBy(hovering, -3);\n\t}\n\n\tprotected onHoverDown(hovering) {\n\t\tthis.hoverScrollBy(hovering, 3);\n\t}\n\n\t@HostListener(\"keydown\", [\"$event\"])\n\tprotected onKeyDown(event) {\n\t\tif (event.key === \"ArrowDown\" || event.key === \"ArrowUp\") {\n\t\t\tthis.checkScrollArrows();\n\t\t}\n\t}\n}\n","import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { FormsModule } from \"@angular/forms\";\n\nimport { Dropdown } from \"./dropdown.component\";\nimport { DropdownList } from \"./list/dropdown-list.component\";\nimport { AbstractDropdownView } from \"./abstract-dropdown-view.class\";\n\nimport { ScrollableList } from \"./scrollable-list.directive\";\nimport { I18nModule } from \"carbon-components-angular/i18n\";\nimport { PlaceholderModule } from \"carbon-components-angular/placeholder\";\nimport { DropdownService } from \"./dropdown.service\";\nimport { UtilsModule } from \"carbon-components-angular/utils\";\nimport { IconModule } from \"carbon-components-angular/icon\";\n\n@NgModule({\n\tdeclarations: [\n\t\tDropdown,\n\t\tDropdownList,\n\t\tScrollableList,\n\t\tAbstractDropdownView\n\t],\n\texports: [\n\t\tDropdown,\n\t\tDropdownList,\n\t\tScrollableList,\n\t\tAbstractDropdownView\n\t],\n\timports: [\n\t\tCommonModule,\n\t\tFormsModule,\n\t\tI18nModule,\n\t\tPlaceholderModule,\n\t\tUtilsModule,\n\t\tIconModule\n\t],\n\tproviders: [ DropdownService ]\n})\nexport class DropdownModule {}\n"],"names":["__values","o","m","Symbol","iterator","i","call","next","length","value","done","__spread","ar","arguments","concat","n","r","e","push","error","__read","AbstractDropdownView","Object","defineProperty","prototype","getNextItem","hasNextElement","getNextElement","getPrevItem","hasPrevElement","getPrevElement","getSelected","getCurrentItem","getCurrentElement","getListItems","propagateSelected","filterBy","initFocus","onItemsReady","subcription","reorderSelected","moveFocus","Directive","args","selector","Input","Output","this","type","size","defaultOffset","top","left","DropdownService","_offset","assign","appendToBody","parentRef","menuRef","classList","_this","style","display","dropdownWrapper","document","createElement","className","width","offsetWidth","position","appendChild","placeholderService","hasPlaceholderRef","appendElement","body","menuInstance","animationFrameSubscription","animationFrameService","tick","subscribe","positionDropdown","appendToDropdown","hostRef","instance","menu","firstElementChild","unsubscribe","hasElement","removeElement","contains","removeChild","updatePosition","ngOnDestroy","leftOffset","boxMenu","closestMenuWithPos","topPos","leftPos","pos","querySelector","getBoundingClientRect","right","window","innerWidth","documentElement","clientWidth","closestAttr","parentElement","offset","findAbsolute","addOffset","setElement","Injectable","PlaceholderService","AnimationFrameService","Subscription","Dropdown","itemValueKey","newValue","console","warn","ngOnInit","view","ngAfterContentInit","writtenValue","writeValue","select","event","values","map","item","propagateChange","closeMenu","selected","isUpdate","checkForReorder","emit","appRef","ngAfterViewInit","appendInline","hasScrollableParents","elementRef","nativeElement","_appendToDropdown","find","newValues","value_1","tslib_1.__values","value_1_1","v","_c","_d","onBlur","onTouchedCallback","registerOnChange","fn","registerOnTouched","setDisabledState","isDisabled","disabled","onKeyDown","key","menuIsClosed","stopImmediatePropagation","preventDefault","dropdownButton","focus","disableArrowKeys","openMenu","dropdownMenu","target","shiftKey","closedDropdownNavigation","getDisplayStringValue","displayValue","isRenderString","of","placeholder","content","getRenderTemplateContext","items","getSelectedCount","clearSelected","_b","valueSelected","_noop","_outsideClick","_outsideKey","_keyboardNav","dispatchEvent","KeyboardEvent","bubbles","cancelable","dropdownService","removeEventListener","keyboardNav","_appendToBody","lightClass","theme","expandedClass","addEventListener","_shouldDropUp","menuRect","getScrollableParents","reduce","shouldDropUp","parent","parentRect","isBelowParent","bottom","parent_1","_dropUp","visibilitySubscription","elementService","visibility","visible","setTimeout","dropUp","undefined","noop","outsideClick","outsideKey","onClose","close","toggleMenu","isTemplate","TemplateRef","topAfterReopen","selectionFeedback","dropdownCount","Component","template","providers","provide","NG_VALUE_ACCESSOR","useExisting","multi","ElementRef","I18n","ApplicationRef","ElementService","ContentChild","static","ViewChild","HostBinding","HostListener","i18n","id","clearText","get","DROPDOWN","CLEAR","skeleton","inline","invalid","menuButtonLabel","OPEN","selectedLabel","SELECTED","EventEmitter","hostClass","bind","_","DropdownList","_originalItems","isObservable","_itemsSubscription","_itemsReady","Observable","observer","updateList","complete","index","findIndex","setupFocusObservable","doEmitSelect","focusJump","_items","displayItems","query","filter","toLowerCase","includes","elList","elements","list","Array","from","querySelectorAll","fromEvent","pipe","debounceTime","ev","el","itemEl","textContent","trim","startsWith","elem","listElementList","toArray","first","isArray","constructor","name","JSON","stringify","oldItem","tempOldItem","newItem","tempNewItem","doKeyDown","some","option","doClick","blurIntent","otherItem","indexOf","onItemFocus","element","add","tabIndex","onItemBlur","remove","emitScroll","customScrollEvent","atTop","srcElement","scrollTop","atBottom","scrollHeight","clientHeight","scroll","ViewChildren","ariaLabel","DROPDOWN_LIST","LABEL","listTpl","ScrollableList","ngOnChanges","changes","scrollEnabled","currentValue","overflow","scrollUpTarget","scrollDownTarget","canScrollUp","canScrollDown","updateScrollHeight","checkScrollArrows","height","clearInterval","hoverScrollInterval","nScrollableList","onHoverUp","onHoverDown","containerRect","innerHeightDiff","innerHeight","scrollUpHeight","offsetHeight","scrollDownHeight","parseInt","scrollTopMax","onWheel","deltaY","scrollBy","stopPropagation","onTouchStart","touches","lastTouch","clientY","onTouchMove","touch","hoverScrollBy","hovering","amount","setInterval","exportAs","NgModule","declarations","exports","imports","CommonModule","FormsModule","I18nModule","PlaceholderModule","UtilsModule","IconModule","DropdownModule"],"mappings":"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"}
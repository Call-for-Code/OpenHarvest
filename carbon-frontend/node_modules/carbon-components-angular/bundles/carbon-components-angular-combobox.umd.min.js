/**
 *
 * carbon-angular v0.0.0 | carbon-components-angular-combobox.umd.min.js
 *
 * Copyright 2014, 2021 IBM
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0

 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */


!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/forms"),require("rxjs/operators"),require("@angular/core"),require("@angular/common"),require("carbon-components-angular/dropdown"),require("carbon-components-angular/i18n"),require("carbon-components-angular/utils"),require("carbon-components-angular/icon")):"function"==typeof define&&define.amd?define("carbon-components-angular/combobox",["exports","@angular/forms","rxjs/operators","@angular/core","@angular/common","carbon-components-angular/dropdown","carbon-components-angular/i18n","carbon-components-angular/utils","carbon-components-angular/icon"],e):e((t["carbon-components-angular"]=t["carbon-components-angular"]||{},t["carbon-components-angular"].combobox={}),t.ng.forms,t.rxjs.operators,t.ng.core,t.ng.common,t["carbon-components-angular"].dropdown,t["carbon-components-angular"].i18n,t["carbon-components-angular"].utils,t["carbon-components-angular"].icon)}(this,function(t,e,i,o,n,l,a,r,s){"use strict";function g(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}var p=(Object.defineProperty(c.prototype,"placeholder",{get:function(){return this._placeholder.value},set:function(t){this._placeholder.override(t)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"openMenuAria",{get:function(){return this._openMenuAria.value},set:function(t){this._openMenuAria.override(t)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"closeMenuAria",{get:function(){return this._closeMenuAria.value},set:function(t){this._closeMenuAria.override(t)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"clearSelectionsTitle",{get:function(){return this._clearSelectionsTitle.value},set:function(t){this._clearSelectionsTitle.override(t)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"clearSelectionsAria",{get:function(){return this._clearSelectionsAria.value},set:function(t){this._clearSelectionsAria.override(t)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"clearSelectionTitle",{get:function(){return this._clearSelectionTitle.value},set:function(t){this._clearSelectionTitle.override(t)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"clearSelectionAria",{get:function(){return this._clearSelectionAria.value},set:function(t){this._clearSelectionAria.override(t)},enumerable:!0,configurable:!0}),c.prototype.ngOnChanges=function(t){t.items&&(this.view.items=t.items.currentValue,this.onSearch(this.input.nativeElement.value,!1),this.updateSelected())},c.prototype.ngAfterContentInit=function(){var n=this;this.view&&(this.view.type=this.type,this.view.select.subscribe(function(t){var e;"multi"===n.type?(n.updatePills(),n.itemValueKey&&n.view.getSelected()?(e=n.view.getSelected().map(function(t){return t[n.itemValueKey]}),n.propagateChangeCallback(e)):n.propagateChangeCallback(n.view.getSelected())):(t.item&&t.item.selected?(n.showClearButton=!0,n.selectedValue=t.item.content,n.itemValueKey?n.propagateChangeCallback(t.item[n.itemValueKey]):n.propagateChangeCallback(t.item)):(n.selectedValue="",n.propagateChangeCallback(null)),t&&!t.isUpdate&&(n.elementRef.nativeElement.querySelector("input").focus(),n.view.filterBy("")),n.closeDropdown()),t&&!t.isUpdate&&n.selected.emit(t)}),setTimeout(function(){n.updateSelected()}),this.view.blurIntent.pipe(i.filter(function(t){return"top"===t})).subscribe(function(){n.elementRef.nativeElement.querySelector(".bx--text-input").focus()}))},c.prototype.ngAfterViewInit=function(){var e=this;this.documentService.handleClick(function(t){e.elementRef.nativeElement.contains(t.target)||e.dropdownMenu.nativeElement.contains(t.target)||e.open&&e.closeDropdown()}),null===this.appendInline&&r.hasScrollableParents(this.elementRef.nativeElement)?this.appendInline=!1:null===this.appendInline&&(this.appendInline=!0)},c.prototype.ngOnDestroy=function(){this.appendInline||this._appendToDropdown()},c.prototype.hostkeys=function(t){var e=this;"Escape"===t.key?this.closeDropdown():"ArrowDown"!==t.key&&"Down"!==t.key||this.dropdownMenu&&this.dropdownMenu.nativeElement.contains(t.target)||(t.stopPropagation(),this.openDropdown(),setTimeout(function(){return e.view.getCurrentElement().focus()},0)),this.open&&"Tab"===t.key&&(this.dropdownMenu.nativeElement.contains(t.target)||t.target===this.input.nativeElement)&&this.closeDropdown(),this.open&&"Tab"===t.key&&t.shiftKey&&this.closeDropdown()},c.prototype._noop=function(){},c.prototype.writeValue=function(e){var t,n,i,o,l,a=this;if("single"===this.type)this.itemValueKey?((l=Object.assign({},this.view.getListItems().find(function(t){return t[a.itemValueKey]===e}))).selected=!0,this.view.propagateSelected([l])):this.view.propagateSelected([e||""]),this.showClearButton=!(!e||!this.view.getSelected().length);else if(this.itemValueKey){var r=[];try{for(var s=g(e),p=s.next();!p.done;p=s.next()){var c=p.value;try{for(var u=g(this.view.getListItems()),d=u.next();!d.done;d=u.next()){var h=d.value;h[this.itemValueKey]===c&&r.push(Object.assign({},h,{selected:!0}))}}catch(b){i={error:b}}finally{try{d&&!d.done&&(o=u["return"])&&o.call(u)}finally{if(i)throw i.error}}}}catch(m){t={error:m}}finally{try{p&&!p.done&&(n=s["return"])&&n.call(s)}finally{if(t)throw t.error}}this.view.propagateSelected(r)}else this.view.propagateSelected(e||[""]);this.updateSelected()},c.prototype.onBlur=function(){this.onTouchedCallback()},c.prototype.registerOnChange=function(t){this.propagateChangeCallback=t},c.prototype.registerOnTouched=function(t){this.onTouchedCallback=t},c.prototype.setDisabledState=function(t){this.disabled=t},c.prototype.updatePills=function(){this.pills=this.view.getSelected()||[],this.checkForReorder()},c.prototype.clearSelected=function(){this.items=this.items.map(function(t){return t.disabled||(t.selected=!1),t}),this.view.items=this.items,this.updatePills();var t=this.view.getSelected();this.propagateChangeCallback(t),this.selected.emit(t)},c.prototype.closeDropdown=function(){this.open=!1,this.checkForReorder(),this.close.emit(),this.appendInline||this._appendToDropdown()},c.prototype.openDropdown=function(){this.disabled||(this.open=!0,this.appendInline||this._appendToBody())},c.prototype.toggleDropdown=function(){this.open?this.closeDropdown():this.openDropdown()},c.prototype.onSearch=function(e,t){var n;void 0===t&&(t=!0),t&&this.search.emit(e),this.showClearButton=!!e,this.view.filterBy(e),""!==e?this.openDropdown():(this.selectedValue="","multi"!==this.type||"top"!==this.selectionFeedback&&"top-after-reopen"!==this.selectionFeedback||this.view.reorderSelected()),"single"===this.type&&(this.view.getListItems().some(function(t){return t.content.toLowerCase().includes(e.toLowerCase())})||(n=this.view.getSelected())&&n[0]||this.view.filterBy(""))},c.prototype.onSubmit=function(t){this.submit.emit({items:this.view.getListItems(),index:0,value:{content:t.target.value,selected:!1}})},c.prototype.clearInput=function(t){t.stopPropagation(),t.preventDefault(),"single"===this.type&&(this.clearSelected(),this.closeDropdown()),this.selectedValue="",this.input.nativeElement.value="",this.showClearButton=!1,this.input.nativeElement.focus(),this.onSearch(this.input.nativeElement.value)},c.prototype.isTemplate=function(t){return t instanceof o.TemplateRef},c.prototype._keyboardNav=function(t){"Escape"!==t.key&&"Esc"!==t.key||!this.open||t.stopImmediatePropagation(),"Escape"===t.key||"Esc"===t.key?(t.preventDefault(),this.closeDropdown(),this.input.nativeElement.focus()):this.open&&"Tab"===t.key&&(this.input.nativeElement.focus(),this.input.nativeElement.dispatchEvent(new KeyboardEvent("keydown",{bubbles:!0,cancelable:!0,key:"Tab"})),this.closeDropdown())},c.prototype._appendToBody=function(){this.dropdownService.appendToBody(this.listbox.nativeElement,this.dropdownMenu.nativeElement,this.elementRef.nativeElement.className+(this.open?" bx--list-box--expanded":"")),this.dropdownMenu.nativeElement.addEventListener("keydown",this.keyboardNav,!0)},c.prototype._appendToDropdown=function(){this.dropdownService.appendToDropdown(this.elementRef.nativeElement),this.dropdownMenu.nativeElement.removeEventListener("keydown",this.keyboardNav,!0)},c.prototype.updateSelected=function(){var t,e=this.view.getSelected();"multi"===this.type?this.updatePills():e&&(t=e[0]?e[0].content:"",e[0]&&e[0],this.selectedValue=t,this.showClearButton=!!t)},c.prototype.checkForReorder=function(){var t=!this.open&&"top-after-reopen"===this.selectionFeedback;"multi"!==this.type||!t&&"top"!==this.selectionFeedback||this.view.reorderSelected("top"===this.selectionFeedback)},c.comboBoxCount=0,c.decorators=[{type:o.Component,args:[{selector:"ibm-combo-box",template:'\n\t\t<label\n\t\t\t*ngIf="label"\n\t\t\t[for]="id"\n\t\t\tclass="bx--label"\n\t\t\t[ngClass]="{\'bx--label--disabled\': disabled}">\n\t\t\t<ng-container *ngIf="!isTemplate(label)">{{label}}</ng-container>\n\t\t\t<ng-template *ngIf="isTemplate(label)" [ngTemplateOutlet]="label"></ng-template>\n\t\t</label>\n\t\t<div\n\t\t\t#listbox\n\t\t\t[ngClass]="{\n\t\t\t\t\'bx--multi-select\': type === \'multi\',\n\t\t\t\t\'bx--combo-box\': type === \'single\' || !pills.length,\n\t\t\t\t\'bx--list-box--light\': theme === \'light\',\n\t\t\t\t\'bx--list-box--expanded\': open,\n\t\t\t\t\'bx--list-box--sm\': size === \'sm\',\n\t\t\t\t\'bx--list-box--xl\': size === \'xl\',\n\t\t\t\t\'bx--list-box--disabled\': disabled\n\t\t\t}"\n\t\t\tclass="bx--combo-box bx--list-box"\n\t\t\trole="combobox"\n\t\t\t[id]="id"\n\t\t\t[attr.data-invalid]="(invalid ? true : null)">\n\t\t\t<div\n\t\t\t\t[attr.aria-expanded]="open"\n\t\t\t\trole="button"\n\t\t\t\tclass="bx--list-box__field"\n\t\t\t\ttype="button"\n\t\t\t\ttabindex="-1"\n\t\t\t\taria-haspopup="true"\n\t\t\t\t(click)="toggleDropdown()"\n\t\t\t\t(blur)="onBlur()">\n\t\t\t\t<button\n\t\t\t\t\t*ngIf="type === \'multi\' && pills.length > 0"\n\t\t\t\t\ttype="button"\n\t\t\t\t\t(click)="clearSelected()"\n\t\t\t\t\t(blur)="onBlur()"\n\t\t\t\t\t(keydown.enter)="clearSelected()"\n\t\t\t\t\tclass="bx--tag--filter bx--list-box__selection--multi"\n\t\t\t\t\t[title]="clearSelectionsTitle"\n\t\t\t\t\t[attr.aria-label]="clearSelectionAria">\n\t\t\t\t\t{{ pills.length }}\n\t\t\t\t\t<svg\n\t\t\t\t\t\tfocusable="false"\n\t\t\t\t\t\tpreserveAspectRatio="xMidYMid meet"\n\t\t\t\t\t\tstyle="will-change: transform;"\n\t\t\t\t\t\trole="img"\n\t\t\t\t\t\txmlns="http://www.w3.org/2000/svg"\n\t\t\t\t\t\twidth="16"\n\t\t\t\t\t\theight="16"\n\t\t\t\t\t\tviewBox="0 0 16 16"\n\t\t\t\t\t\taria-hidden="true">\n\t\t\t\t\t\t<path d="M12 4.7l-.7-.7L8 7.3 4.7 4l-.7.7L7.3 8 4 11.3l.7.7L8 8.7l3.3 3.3.7-.7L8.7 8z"></path>\n\t\t\t\t\t</svg>\n\t\t\t\t</button>\n\t\t\t\t<input\n\t\t\t\t\t#input\n\t\t\t\t\ttype="text"\n\t\t\t\t\trole="searchbox"\n\t\t\t\t\t[disabled]="disabled"\n\t\t\t\t\t(input)="onSearch($event.target.value)"\n\t\t\t\t\t(blur)="onBlur()"\n\t\t\t\t\t(keydown.enter)="onSubmit($event)"\n\t\t\t\t\t[value]="selectedValue"\n\t\t\t\t\tclass="bx--text-input"\n\t\t\t\t\t[ngClass]="{\'bx--text-input--empty\': !showClearButton}"\n\t\t\t\t\ttabindex="0"\n\t\t\t\t\t[attr.aria-labelledby]="id"\n\t\t\t\t\t[attr.maxlength]="maxLength"\n\t\t\t\t\taria-haspopup="true"\n\t\t\t\t\t[attr.aria-autocomplete]="autocomplete"\n\t\t\t\t\t[placeholder]="placeholder"/>\n\t\t\t\t<svg\n\t\t\t\t\t*ngIf="invalid"\n\t\t\t\t\tibmIcon="warning--filled"\n\t\t\t\t\tsize="16"\n\t\t\t\t\tclass="bx--list-box__invalid-icon">\n\t\t\t\t</svg>\n\t\t\t\t<div\n\t\t\t\t\t*ngIf="showClearButton"\n\t\t\t\t\trole="button"\n\t\t\t\t\tclass="bx--list-box__selection"\n\t\t\t\t\ttabindex="0"\n\t\t\t\t\t[attr.aria-label]="clearSelectionAria"\n\t\t\t\t\t[title]="clearSelectionTitle"\n\t\t\t\t\t(keyup.enter)="clearInput($event)"\n\t\t\t\t\t(click)="clearInput($event)"\n\t\t\t\t\t(blur)="onBlur()">\n\t\t\t\t\t<svg ibmIcon="close" size="16"></svg>\n\t\t\t\t</div>\n\t\t\t\t<svg\n\t\t\t\t\tibmIcon="chevron--down"\n\t\t\t\t\tsize="16"\n\t\t\t\t\t[ngClass]="{\'bx--list-box__menu-icon--open\': open}"\n\t\t\t\t\tclass="bx--list-box__menu-icon"\n\t\t\t\t\t[title]="open ? closeMenuAria : openMenuAria"\n\t\t\t\t\t[ariaLabel]="open ? closeMenuAria : openMenuAria">\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t\t<div #dropdownMenu>\n\t\t\t\t<ng-content *ngIf="open"></ng-content>\n\t\t\t</div>\n\t\t</div>\n\t\t<div\n\t\t\t*ngIf="helperText && !invalid"\n\t\t\tclass="bx--form__helper-text"\n\t\t\t[ngClass]="{\'bx--form__helper-text--disabled\': disabled}">\n\t\t\t<ng-container *ngIf="!isTemplate(helperText)">{{helperText}}</ng-container>\n\t\t\t<ng-template *ngIf="isTemplate(helperText)" [ngTemplateOutlet]="helperText"></ng-template>\n\t\t</div>\n\t\t<div *ngIf="invalid" class="bx--form-requirement">\n\t\t\t<ng-container *ngIf="!isTemplate(invalidText)">{{ invalidText }}</ng-container>\n\t\t\t<ng-template *ngIf="isTemplate(invalidText)" [ngTemplateOutlet]="invalidText"></ng-template>\n\t\t</div>\n\t',providers:[{provide:e.NG_VALUE_ACCESSOR,useExisting:c,multi:!0}]}]}],c.ctorParameters=function(){return[{type:o.ElementRef},{type:r.DocumentService},{type:l.DropdownService},{type:a.I18n}]},c.propDecorators={placeholder:[{type:o.Input}],openMenuAria:[{type:o.Input}],closeMenuAria:[{type:o.Input}],clearSelectionsTitle:[{type:o.Input}],clearSelectionsAria:[{type:o.Input}],clearSelectionTitle:[{type:o.Input}],clearSelectionAria:[{type:o.Input}],id:[{type:o.Input}],items:[{type:o.Input}],type:[{type:o.Input}],size:[{type:o.Input}],itemValueKey:[{type:o.Input}],label:[{type:o.Input}],helperText:[{type:o.Input}],appendInline:[{type:o.Input}],invalid:[{type:o.Input}],invalidText:[{type:o.Input}],maxLength:[{type:o.Input}],theme:[{type:o.Input}],selectionFeedback:[{type:o.Input}],autocomplete:[{type:o.Input}],disabled:[{type:o.HostBinding,args:["attr.aria-disabled"]},{type:o.Input}],selected:[{type:o.Output}],submit:[{type:o.Output}],close:[{type:o.Output}],search:[{type:o.Output}],view:[{type:o.ContentChild,args:[l.AbstractDropdownView,{"static":!0}]}],dropdownMenu:[{type:o.ViewChild,args:["dropdownMenu",{"static":!1}]}],input:[{type:o.ViewChild,args:["input",{"static":!0}]}],listbox:[{type:o.ViewChild,args:["listbox",{"static":!0}]}],hostClass:[{type:o.HostBinding,args:["class.bx--list-box__wrapper"]}],display:[{type:o.HostBinding,args:["style.display"]}],hostkeys:[{type:o.HostListener,args:["keydown",["$event"]]}]},c);function c(t,e,n,i){this.elementRef=t,this.documentService=e,this.dropdownService=n,this.i18n=i,this.id="dropdown-"+c.comboBoxCount++,this.items=[],this.type="single",this.size="md",this.appendInline=null,this.invalid=!1,this.maxLength=null,this.theme="dark",this.selectionFeedback="top-after-reopen",this.autocomplete="list",this.disabled=!1,this.selected=new o.EventEmitter,this.submit=new o.EventEmitter,this.close=new o.EventEmitter,this.search=new o.EventEmitter,this.hostClass=!0,this.display="block",this.open=!1,this.showClearButton=!1,this.pills=[],this.selectedValue="",this.keyboardNav=this._keyboardNav.bind(this),this.noop=this._noop.bind(this),this.onTouchedCallback=this._noop,this.propagateChangeCallback=this._noop,this._placeholder=this.i18n.getOverridable("COMBOBOX.PLACEHOLDER"),this._closeMenuAria=this.i18n.getOverridable("COMBOBOX.A11Y.CLOSE_MENU"),this._openMenuAria=this.i18n.getOverridable("COMBOBOX.A11Y.OPEN_MENU"),this._clearSelectionsTitle=this.i18n.getOverridable("COMBOBOX.CLEAR_SELECTIONS"),this._clearSelectionsAria=this.i18n.getOverridable("COMBOBOX.A11Y.CLEAR_SELECTIONS"),this._clearSelectionTitle=this.i18n.getOverridable("COMBOBOX.CLEAR_SELECTED"),this._clearSelectionAria=this.i18n.getOverridable("COMBOBOX.A11Y.CLEAR_SELECTED")}var u=(d.decorators=[{type:o.NgModule,args:[{declarations:[p],exports:[p,l.DropdownModule],imports:[n.CommonModule,l.DropdownModule,a.I18nModule,r.UtilsModule,s.IconModule],providers:[l.DropdownService]}]}],d);function d(){}t.ComboBox=p,t.ComboBoxModule=u,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=carbon-components-angular-combobox.umd.min.js.map
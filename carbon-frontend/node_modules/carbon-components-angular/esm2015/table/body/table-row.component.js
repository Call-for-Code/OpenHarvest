/**
 *
 * carbon-angular v0.0.0 | table-row.component.js
 *
 * Copyright 2014, 2021 IBM
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0

 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */


import { Component, Input, Output, EventEmitter, HostBinding, HostListener } from "@angular/core";
import { TableModel } from "../table-model.class";
import { I18n } from "carbon-components-angular/i18n";
export class TableRowComponent {
    constructor(i18n) {
        this.i18n = i18n;
        this.expanded = false;
        this.expandable = false;
        this.selected = false;
        /**
         * Size of the table rows.
         */
        this.size = "md";
        /**
         * Controls whether to enable multiple or single row selection.
         */
        this.enableSingleSelect = false;
        /**
         * Controls whether to show the selection checkboxes column or not.
         */
        this.showSelectionColumn = true;
        /**
         * Shows or hide the checkbox in the selection column when `showSelectionColumn`
         * is set to true
         */
        this.showSelectionColumnCheckbox = true;
        this.skeleton = false;
        /**
         * Emits when the row is selected.
         */
        this.selectRow = new EventEmitter();
        /**
         * Emits when the row is deselected.
         */
        this.deselectRow = new EventEmitter();
        /**
         * Emits when the row is expanded
         */
        this.expandRow = new EventEmitter();
        /**
         * Emits when a row is clicked regardless of `enableSingleSelect` or `showSelectionColumn`.
         * Should only get emitted when a row item is selected excluding expand buttons,
         * checkboxes, or radios.
         */
        this.rowClick = new EventEmitter();
        this._checkboxLabel = this.i18n.getOverridable("TABLE.CHECKBOX_ROW");
        this._expandButtonAriaLabel = this.i18n.getOverridable("TABLE.EXPAND_BUTTON");
    }
    set expandButtonAriaLabel(value) {
        this._expandButtonAriaLabel.override(value);
    }
    get expandButtonAriaLabel() {
        return this._expandButtonAriaLabel.value;
    }
    set checkboxLabel(value) {
        this._checkboxLabel.override(value);
    }
    get checkboxLabel() {
        return this._checkboxLabel.value;
    }
    get selectedClass() {
        return this.selected;
    }
    get parentRowClass() {
        return this.expandable;
    }
    get expandableRowClass() {
        return this.expanded;
    }
    get selectableClass() {
        return false; // this.singleSelect
    }
    get isParentRow() {
        return this.expandable ? true : null;
    }
    get isAccessible() {
        return this.enableSingleSelect && !this.showSelectionColumn ? 0 : null;
    }
    onHostClick() {
        if (this.enableSingleSelect && !this.showSelectionColumn) {
            this.onSelectionChange();
        }
    }
    onRowClick() {
        this.rowClick.emit();
    }
    onSelectionChange() {
        if (this.selected) {
            this.deselectRow.emit();
        }
        else {
            this.selectRow.emit();
        }
    }
    getCheckboxLabel() {
        return this._checkboxLabel.subject;
    }
    getExpandButtonAriaLabel() {
        return this._expandButtonAriaLabel.subject;
    }
}
TableRowComponent.decorators = [
    { type: Component, args: [{
                // tslint:disable-next-line: component-selector
                selector: "[ibmTableRow]",
                template: `
		<ng-container *ngIf="model">
			<td
				*ngIf="model.hasExpandableRows()"
				ibmTableExpandButton
				class="bx--table-expand-v2"
				[expanded]="expanded"
				[expandable]="expandable"
				[skeleton]="skeleton"
				[ariaLabel]="getExpandButtonAriaLabel()"
				[headers]="model.getHeaderId('expand')"
				(expandRow)="expandRow.emit()">
			</td>
			<ng-container *ngIf="!skeleton && showSelectionColumn && !enableSingleSelect">
				<td
					*ngIf="!showSelectionColumnCheckbox; else tableCheckboxTemplate">
				</td>
				<ng-template #tableCheckboxTemplate>
					<td
						ibmTableCheckbox
						class="bx--table-column-checkbox"
						[size]="size"
						[selected]="selected"
						[label]="getCheckboxLabel()"
						[row]="row"
						[skeleton]="skeleton"
						[headers]="model.getHeaderId('select')"
						(change)="onSelectionChange()">
					</td>
				</ng-template>
			</ng-container>
			<td
				*ngIf="!skeleton && showSelectionColumn && enableSingleSelect"
				ibmTableRadio
				[selected]="selected"
				[label]="getCheckboxLabel()"
				[row]="row"
				[skeleton]="skeleton"
				[headers]="model.getHeaderId('select')"
				(change)="onSelectionChange()">
			</td>
			<ng-container *ngFor="let item of row; let j = index">
				<td
					*ngIf="item && model.getHeader(j) && model.getHeader(j).visible"
					ibmTableData
					[headers]="model.getHeaderId(j, item.colSpan)"
					[item]="item"
					[title]="item.title"
					[class]="model.getHeader(j).className"
					[ngStyle]="model.getHeader(j).style"
					[skeleton]="skeleton"
					[attr.colspan]="item.colSpan"
					[attr.rowspan]="item.rowSpan"
					(click)="onRowClick()"
					(keydown.enter)="onRowClick()">
				</td>
				<td
					*ngIf="item && model.getHeader(j) == null"
					ibmTableData
					[headers]="model.getHeaderId(j, item.colSpan)"
					[item]="item"
					[title]="item.title"
					[skeleton]="skeleton"
					[attr.colspan]="item.colSpan"
					[attr.rowspan]="item.rowSpan"
					(click)="onRowClick()"
					(keydown.enter)="onRowClick()">
				</td>
			</ng-container>
		</ng-container>
		<ng-content></ng-content>
	`
            }] }
];
/** @nocollapse */
TableRowComponent.ctorParameters = () => [
    { type: I18n }
];
TableRowComponent.propDecorators = {
    model: [{ type: Input }],
    row: [{ type: Input }],
    expanded: [{ type: Input }],
    expandable: [{ type: Input }],
    selected: [{ type: Input }],
    size: [{ type: Input }],
    enableSingleSelect: [{ type: Input }],
    expandButtonAriaLabel: [{ type: Input }],
    checkboxLabel: [{ type: Input }],
    showSelectionColumn: [{ type: Input }],
    showSelectionColumnCheckbox: [{ type: Input }],
    selectionLabelColumn: [{ type: Input }],
    skeleton: [{ type: Input }],
    selectRow: [{ type: Output }],
    deselectRow: [{ type: Output }],
    expandRow: [{ type: Output }],
    rowClick: [{ type: Output }],
    selectedClass: [{ type: HostBinding, args: ["class.bx--data-table--selected",] }],
    parentRowClass: [{ type: HostBinding, args: ["class.bx--parent-row",] }],
    expandableRowClass: [{ type: HostBinding, args: ["class.bx--expandable-row",] }],
    selectableClass: [{ type: HostBinding, args: ["class.tbody_row--selectable",] }],
    isParentRow: [{ type: HostBinding, args: ["attr.data-parent-row",] }],
    isAccessible: [{ type: HostBinding, args: ["attr.tabindex",] }],
    onHostClick: [{ type: HostListener, args: ["click",] }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFibGUtcm93LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2NhcmJvbi1jb21wb25lbnRzLWFuZ3VsYXIvdGFibGUvIiwic291cmNlcyI6WyJib2R5L3RhYmxlLXJvdy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNOLFNBQVMsRUFDVCxLQUFLLEVBQ0wsTUFBTSxFQUNOLFlBQVksRUFDWixXQUFXLEVBQ1gsWUFBWSxFQUNaLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUNsRCxPQUFPLEVBQUUsSUFBSSxFQUFlLE1BQU0sZ0NBQWdDLENBQUM7QUFpRm5FLE1BQU0sT0FBTyxpQkFBaUI7SUFvSDdCLFlBQXNCLElBQVU7UUFBVixTQUFJLEdBQUosSUFBSSxDQUFNO1FBNUd2QixhQUFRLEdBQUcsS0FBSyxDQUFDO1FBRWpCLGVBQVUsR0FBRyxLQUFLLENBQUM7UUFFbkIsYUFBUSxHQUFHLEtBQUssQ0FBQztRQUUxQjs7V0FFRztRQUNNLFNBQUksR0FBaUIsSUFBSSxDQUFDO1FBRW5DOztXQUVHO1FBQ00sdUJBQWtCLEdBQUcsS0FBSyxDQUFDO1FBb0JwQzs7V0FFRztRQUNNLHdCQUFtQixHQUFHLElBQUksQ0FBQztRQUVwQzs7O1dBR0c7UUFDTSxnQ0FBMkIsR0FBRyxJQUFJLENBQUM7UUFjbkMsYUFBUSxHQUFHLEtBQUssQ0FBQztRQUUxQjs7V0FFRztRQUNPLGNBQVMsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBRXpDOztXQUVHO1FBQ08sZ0JBQVcsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBRTNDOztXQUVHO1FBQ08sY0FBUyxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFFekM7Ozs7V0FJRztRQUNPLGFBQVEsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBMEI5QixtQkFBYyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsY0FB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QVcsU0FBQyxzQkFBc0I7MkJBSWxDLFdBQVcsU0FBQyxlQUFlOzBCQVMzQixZQUFZLFNBQUMsT0FBTyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG5cdENvbXBvbmVudCxcblx0SW5wdXQsXG5cdE91dHB1dCxcblx0RXZlbnRFbWl0dGVyLFxuXHRIb3N0QmluZGluZyxcblx0SG9zdExpc3RlbmVyXG59IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQgeyBUYWJsZU1vZGVsIH0gZnJvbSBcIi4uL3RhYmxlLW1vZGVsLmNsYXNzXCI7XG5pbXBvcnQgeyBJMThuLCBPdmVycmlkYWJsZSB9IGZyb20gXCJjYXJib24tY29tcG9uZW50cy1hbmd1bGFyL2kxOG5cIjtcbmltcG9ydCB7IFRhYmxlSXRlbSB9IGZyb20gXCIuLi90YWJsZS1pdGVtLmNsYXNzXCI7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSBcInJ4anNcIjtcbmltcG9ydCB7IFRhYmxlUm93U2l6ZSB9IGZyb20gXCIuLi90YWJsZS50eXBlc1wiO1xuXG5AQ29tcG9uZW50KHtcblx0Ly8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBjb21wb25lbnQtc2VsZWN0b3Jcblx0c2VsZWN0b3I6IFwiW2libVRhYmxlUm93XVwiLFxuXHR0ZW1wbGF0ZTogYFxuXHRcdDxuZy1jb250YWluZXIgKm5nSWY9XCJtb2RlbFwiPlxuXHRcdFx0PHRkXG5cdFx0XHRcdCpuZ0lmPVwibW9kZWwuaGFzRXhwYW5kYWJsZVJvd3MoKVwiXG5cdFx0XHRcdGlibVRhYmxlRXhwYW5kQnV0dG9uXG5cdFx0XHRcdGNsYXNzPVwiYngtLXRhYmxlLWV4cGFuZC12MlwiXG5cdFx0XHRcdFtleHBhbmRlZF09XCJleHBhbmRlZFwiXG5cdFx0XHRcdFtleHBhbmRhYmxlXT1cImV4cGFuZGFibGVcIlxuXHRcdFx0XHRbc2tlbGV0b25dPVwic2tlbGV0b25cIlxuXHRcdFx0XHRbYXJpYUxhYmVsXT1cImdldEV4cGFuZEJ1dHRvbkFyaWFMYWJlbCgpXCJcblx0XHRcdFx0W2hlYWRlcnNdPVwibW9kZWwuZ2V0SGVhZGVySWQoJ2V4cGFuZCcpXCJcblx0XHRcdFx0KGV4cGFuZFJvdyk9XCJleHBhbmRSb3cuZW1pdCgpXCI+XG5cdFx0XHQ8L3RkPlxuXHRcdFx0PG5nLWNvbnRhaW5lciAqbmdJZj1cIiFza2VsZXRvbiAmJiBzaG93U2VsZWN0aW9uQ29sdW1uICYmICFlbmFibGVTaW5nbGVTZWxlY3RcIj5cblx0XHRcdFx0PHRkXG5cdFx0XHRcdFx0Km5nSWY9XCIhc2hvd1NlbGVjdGlvbkNvbHVtbkNoZWNrYm94OyBlbHNlIHRhYmxlQ2hlY2tib3hUZW1wbGF0ZVwiPlxuXHRcdFx0XHQ8L3RkPlxuXHRcdFx0XHQ8bmctdGVtcGxhdGUgI3RhYmxlQ2hlY2tib3hUZW1wbGF0ZT5cblx0XHRcdFx0XHQ8dGRcblx0XHRcdFx0XHRcdGlibVRhYmxlQ2hlY2tib3hcblx0XHRcdFx0XHRcdGNsYXNzPVwiYngtLXRhYmxlLWNvbHVtbi1jaGVja2JveFwiXG5cdFx0XHRcdFx0XHRbc2l6ZV09XCJzaXplXCJcblx0XHRcdFx0XHRcdFtzZWxlY3RlZF09XCJzZWxlY3RlZFwiXG5cdFx0XHRcdFx0XHRbbGFiZWxdPVwiZ2V0Q2hlY2tib3hMYWJlbCgpXCJcblx0XHRcdFx0XHRcdFtyb3ddPVwicm93XCJcblx0XHRcdFx0XHRcdFtza2VsZXRvbl09XCJza2VsZXRvblwiXG5cdFx0XHRcdFx0XHRbaGVhZGVyc109XCJtb2RlbC5nZXRIZWFkZXJJZCgnc2VsZWN0JylcIlxuXHRcdFx0XHRcdFx0KGNoYW5nZSk9XCJvblNlbGVjdGlvbkNoYW5nZSgpXCI+XG5cdFx0XHRcdFx0PC90ZD5cblx0XHRcdFx0PC9uZy10ZW1wbGF0ZT5cblx0XHRcdDwvbmctY29udGFpbmVyPlxuXHRcdFx0PHRkXG5cdFx0XHRcdCpuZ0lmPVwiIXNrZWxldG9uICYmIHNob3dTZWxlY3Rpb25Db2x1bW4gJiYgZW5hYmxlU2luZ2xlU2VsZWN0XCJcblx0XHRcdFx0aWJtVGFibGVSYWRpb1xuXHRcdFx0XHRbc2VsZWN0ZWRdPVwic2VsZWN0ZWRcIlxuXHRcdFx0XHRbbGFiZWxdPVwiZ2V0Q2hlY2tib3hMYWJlbCgpXCJcblx0XHRcdFx0W3Jvd109XCJyb3dcIlxuXHRcdFx0XHRbc2tlbGV0b25dPVwic2tlbGV0b25cIlxuXHRcdFx0XHRbaGVhZGVyc109XCJtb2RlbC5nZXRIZWFkZXJJZCgnc2VsZWN0JylcIlxuXHRcdFx0XHQoY2hhbmdlKT1cIm9uU2VsZWN0aW9uQ2hhbmdlKClcIj5cblx0XHRcdDwvdGQ+XG5cdFx0XHQ8bmctY29udGFpbmVyICpuZ0Zvcj1cImxldCBpdGVtIG9mIHJvdzsgbGV0IGogPSBpbmRleFwiPlxuXHRcdFx0XHQ8dGRcblx0XHRcdFx0XHQqbmdJZj1cIml0ZW0gJiYgbW9kZWwuZ2V0SGVhZGVyKGopICYmIG1vZGVsLmdldEhlYWRlcihqKS52aXNpYmxlXCJcblx0XHRcdFx0XHRpYm1UYWJsZURhdGFcblx0XHRcdFx0XHRbaGVhZGVyc109XCJtb2RlbC5nZXRIZWFkZXJJZChqLCBpdGVtLmNvbFNwYW4pXCJcblx0XHRcdFx0XHRbaXRlbV09XCJpdGVtXCJcblx0XHRcdFx0XHRbdGl0bGVdPVwiaXRlbS50aXRsZVwiXG5cdFx0XHRcdFx0W2NsYXNzXT1cIm1vZGVsLmdldEhlYWRlcihqKS5jbGFzc05hbWVcIlxuXHRcdFx0XHRcdFtuZ1N0eWxlXT1cIm1vZGVsLmdldEhlYWRlcihqKS5zdHlsZVwiXG5cdFx0XHRcdFx0W3NrZWxldG9uXT1cInNrZWxldG9uXCJcblx0XHRcdFx0XHRbYXR0ci5jb2xzcGFuXT1cIml0ZW0uY29sU3BhblwiXG5cdFx0XHRcdFx0W2F0dHIucm93c3Bhbl09XCJpdGVtLnJvd1NwYW5cIlxuXHRcdFx0XHRcdChjbGljayk9XCJvblJvd0NsaWNrKClcIlxuXHRcdFx0XHRcdChrZXlkb3duLmVudGVyKT1cIm9uUm93Q2xpY2soKVwiPlxuXHRcdFx0XHQ8L3RkPlxuXHRcdFx0XHQ8dGRcblx0XHRcdFx0XHQqbmdJZj1cIml0ZW0gJiYgbW9kZWwuZ2V0SGVhZGVyKGopID09IG51bGxcIlxuXHRcdFx0XHRcdGlibVRhYmxlRGF0YVxuXHRcdFx0XHRcdFtoZWFkZXJzXT1cIm1vZGVsLmdldEhlYWRlcklkKGosIGl0ZW0uY29sU3BhbilcIlxuXHRcdFx0XHRcdFtpdGVtXT1cIml0ZW1cIlxuXHRcdFx0XHRcdFt0aXRsZV09XCJpdGVtLnRpdGxlXCJcblx0XHRcdFx0XHRbc2tlbGV0b25dPVwic2tlbGV0b25cIlxuXHRcdFx0XHRcdFthdHRyLmNvbHNwYW5dPVwiaXRlbS5jb2xTcGFuXCJcblx0XHRcdFx0XHRbYXR0ci5yb3dzcGFuXT1cIml0ZW0ucm93U3BhblwiXG5cdFx0XHRcdFx0KGNsaWNrKT1cIm9uUm93Q2xpY2soKVwiXG5cdFx0XHRcdFx0KGtleWRvd24uZW50ZXIpPVwib25Sb3dDbGljaygpXCI+XG5cdFx0XHRcdDwvdGQ+XG5cdFx0XHQ8L25nLWNvbnRhaW5lcj5cblx0XHQ8L25nLWNvbnRhaW5lcj5cblx0XHQ8bmctY29udGVudD48L25nLWNvbnRlbnQ+XG5cdGBcbn0pXG5leHBvcnQgY2xhc3MgVGFibGVSb3dDb21wb25lbnQge1xuXHQvKipcblx0ICogYFRhYmxlTW9kZWxgIHdpdGggZGF0YSB0aGUgdGFibGUgaXMgdG8gZGlzcGxheS5cblx0ICovXG5cdEBJbnB1dCgpIG1vZGVsOiBUYWJsZU1vZGVsO1xuXG5cdEBJbnB1dCgpIHJvdzogVGFibGVJdGVtW107XG5cblx0QElucHV0KCkgZXhwYW5kZWQgPSBmYWxzZTtcblxuXHRASW5wdXQoKSBleHBhbmRhYmxlID0gZmFsc2U7XG5cblx0QElucHV0KCkgc2VsZWN0ZWQgPSBmYWxzZTtcblxuXHQvKipcblx0ICogU2l6ZSBvZiB0aGUgdGFibGUgcm93cy5cblx0ICovXG5cdEBJbnB1dCgpIHNpemU6IFRhYmxlUm93U2l6ZSA9IFwibWRcIjtcblxuXHQvKipcblx0ICogQ29udHJvbHMgd2hldGhlciB0byBlbmFibGUgbXVsdGlwbGUgb3Igc2luZ2xlIHJvdyBzZWxlY3Rpb24uXG5cdCAqL1xuXHRASW5wdXQoKSBlbmFibGVTaW5nbGVTZWxlY3QgPSBmYWxzZTtcblxuXHRASW5wdXQoKVxuXHRzZXQgZXhwYW5kQnV0dG9uQXJpYUxhYmVsKHZhbHVlOiBzdHJpbmcgfCBPYnNlcnZhYmxlPHN0cmluZz4pIHtcblx0XHR0aGlzLl9leHBhbmRCdXR0b25BcmlhTGFiZWwub3ZlcnJpZGUodmFsdWUpO1xuXHR9XG5cblx0Z2V0IGV4cGFuZEJ1dHRvbkFyaWFMYWJlbCgpIHtcblx0XHRyZXR1cm4gdGhpcy5fZXhwYW5kQnV0dG9uQXJpYUxhYmVsLnZhbHVlO1xuXHR9XG5cblx0QElucHV0KClcblx0c2V0IGNoZWNrYm94TGFiZWwodmFsdWU6IHN0cmluZyB8IE9ic2VydmFibGU8c3RyaW5nPikge1xuXHRcdHRoaXMuX2NoZWNrYm94TGFiZWwub3ZlcnJpZGUodmFsdWUpO1xuXHR9XG5cblx0Z2V0IGNoZWNrYm94TGFiZWwoKSB7XG5cdFx0cmV0dXJuIHRoaXMuX2NoZWNrYm94TGFiZWwudmFsdWU7XG5cdH1cblxuXHQvKipcblx0ICogQ29udHJvbHMgd2hldGhlciB0byBzaG93IHRoZSBzZWxlY3Rpb24gY2hlY2tib3hlcyBjb2x1bW4gb3Igbm90LlxuXHQgKi9cblx0QElucHV0KCkgc2hvd1NlbGVjdGlvbkNvbHVtbiA9IHRydWU7XG5cblx0LyoqXG5cdCAqIFNob3dzIG9yIGhpZGUgdGhlIGNoZWNrYm94IGluIHRoZSBzZWxlY3Rpb24gY29sdW1uIHdoZW4gYHNob3dTZWxlY3Rpb25Db2x1bW5gXG5cdCAqIGlzIHNldCB0byB0cnVlXG5cdCAqL1xuXHRASW5wdXQoKSBzaG93U2VsZWN0aW9uQ29sdW1uQ2hlY2tib3ggPSB0cnVlO1xuXG5cdC8qKlxuXHQgKiBVc2VkIHRvIHBvcHVsYXRlIHRoZSByb3cgc2VsZWN0aW9uIGNoZWNrYm94IGxhYmVsIHdpdGggYSB1c2VmdWwgdmFsdWUgaWYgc2V0LlxuXHQgKlxuXHQgKiBFeGFtcGxlOlxuXHQgKiBgYGBcblx0ICogPGlibS10YWJsZSBbc2VsZWN0aW9uTGFiZWxDb2x1bW5dPVwiMFwiPjwvaWJtLXRhYmxlPlxuXHQgKiA8IS0tIHJlc3VsdHMgaW4gYXJpYS1sYWJlbD1cIlNlbGVjdCBmaXJzdCBjb2x1bW4gdmFsdWVcIlxuXHQgKiAod2hlcmUgXCJmaXJzdCBjb2x1bW4gdmFsdWVcIiBpcyB0aGUgdmFsdWUgb2YgdGhlIGZpcnN0IGNvbHVtbiBpbiB0aGUgcm93IC0tPlxuXHQgKiBgYGBcblx0ICovXG5cdEBJbnB1dCgpIHNlbGVjdGlvbkxhYmVsQ29sdW1uOiBudW1iZXI7XG5cblx0QElucHV0KCkgc2tlbGV0b24gPSBmYWxzZTtcblxuXHQvKipcblx0ICogRW1pdHMgd2hlbiB0aGUgcm93IGlzIHNlbGVjdGVkLlxuXHQgKi9cblx0QE91dHB1dCgpIHNlbGVjdFJvdyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuXHQvKipcblx0ICogRW1pdHMgd2hlbiB0aGUgcm93IGlzIGRlc2VsZWN0ZWQuXG5cdCAqL1xuXHRAT3V0cHV0KCkgZGVzZWxlY3RSb3cgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cblx0LyoqXG5cdCAqIEVtaXRzIHdoZW4gdGhlIHJvdyBpcyBleHBhbmRlZFxuXHQgKi9cblx0QE91dHB1dCgpIGV4cGFuZFJvdyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuXHQvKipcblx0ICogRW1pdHMgd2hlbiBhIHJvdyBpcyBjbGlja2VkIHJlZ2FyZGxlc3Mgb2YgYGVuYWJsZVNpbmdsZVNlbGVjdGAgb3IgYHNob3dTZWxlY3Rpb25Db2x1bW5gLlxuXHQgKiBTaG91bGQgb25seSBnZXQgZW1pdHRlZCB3aGVuIGEgcm93IGl0ZW0gaXMgc2VsZWN0ZWQgZXhjbHVkaW5nIGV4cGFuZCBidXR0b25zLFxuXHQgKiBjaGVja2JveGVzLCBvciByYWRpb3MuXG5cdCAqL1xuXHRAT3V0cHV0KCkgcm93Q2xpY2sgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cblx0QEhvc3RCaW5kaW5nKFwiY2xhc3MuYngtLWRhdGEtdGFibGUtLXNlbGVjdGVkXCIpIGdldCBzZWxlY3RlZENsYXNzKCkge1xuXHRcdHJldHVybiB0aGlzLnNlbGVjdGVkO1xuXHR9XG5cblx0QEhvc3RCaW5kaW5nKFwiY2xhc3MuYngtLXBhcmVudC1yb3dcIikgZ2V0IHBhcmVudFJvd0NsYXNzKCkge1xuXHRcdHJldHVybiB0aGlzLmV4cGFuZGFibGU7XG5cdH1cblxuXHRASG9zdEJpbmRpbmcoXCJjbGFzcy5ieC0tZXhwYW5kYWJsZS1yb3dcIikgZ2V0IGV4cGFuZGFibGVSb3dDbGFzcygpIHtcblx0XHRyZXR1cm4gdGhpcy5leHBhbmRlZDtcblx0fVxuXG5cdEBIb3N0QmluZGluZyhcImNsYXNzLnRib2R5X3Jvdy0tc2VsZWN0YWJsZVwiKSBnZXQgc2VsZWN0YWJsZUNsYXNzKCkge1xuXHRcdHJldHVybiBmYWxzZTsgLy8gdGhpcy5zaW5nbGVTZWxlY3Rcblx0fVxuXG5cdEBIb3N0QmluZGluZyhcImF0dHIuZGF0YS1wYXJlbnQtcm93XCIpIGdldCBpc1BhcmVudFJvdygpIHtcblx0XHRyZXR1cm4gdGhpcy5leHBhbmRhYmxlID8gdHJ1ZSA6IG51bGw7XG5cdH1cblxuXHRASG9zdEJpbmRpbmcoXCJhdHRyLnRhYmluZGV4XCIpIGdldCBpc0FjY2Vzc2libGUoKSB7XG5cdFx0cmV0dXJuIHRoaXMuZW5hYmxlU2luZ2xlU2VsZWN0ICYmICF0aGlzLnNob3dTZWxlY3Rpb25Db2x1bW4gPyAwIDogbnVsbDtcblx0fVxuXG5cdHByb3RlY3RlZCBfY2hlY2tib3hMYWJlbCA9IHRoaXMuaTE4bi5nZXRPdmVycmlkYWJsZShcIlRBQkxFLkNIRUNLQk9YX1JPV1wiKTtcblx0cHJvdGVjdGVkIF9leHBhbmRCdXR0b25BcmlhTGFiZWwgPSB0aGlzLmkxOG4uZ2V0T3ZlcnJpZGFibGUoXCJUQUJMRS5FWFBBTkRfQlVUVE9OXCIpO1xuXG5cdGNvbnN0cnVjdG9yKHByb3RlY3RlZCBpMThuOiBJMThuKSB7IH1cblxuXHRASG9zdExpc3RlbmVyKFwiY2xpY2tcIilcblx0b25Ib3N0Q2xpY2soKSB7XG5cdFx0aWYgKHRoaXMuZW5hYmxlU2luZ2xlU2VsZWN0ICYmICF0aGlzLnNob3dTZWxlY3Rpb25Db2x1bW4pIHtcblx0XHRcdHRoaXMub25TZWxlY3Rpb25DaGFuZ2UoKTtcblx0XHR9XG5cdH1cblxuXHRvblJvd0NsaWNrKCkge1xuXHRcdHRoaXMucm93Q2xpY2suZW1pdCgpO1xuXHR9XG5cblx0b25TZWxlY3Rpb25DaGFuZ2UoKSB7XG5cdFx0aWYgKHRoaXMuc2VsZWN0ZWQpIHtcblx0XHRcdHRoaXMuZGVzZWxlY3RSb3cuZW1pdCgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnNlbGVjdFJvdy5lbWl0KCk7XG5cdFx0fVxuXHR9XG5cblx0Z2V0Q2hlY2tib3hMYWJlbCgpOiBPYnNlcnZhYmxlPHN0cmluZz4ge1xuXHRcdHJldHVybiB0aGlzLl9jaGVja2JveExhYmVsLnN1YmplY3Q7XG5cdH1cblxuXHRnZXRFeHBhbmRCdXR0b25BcmlhTGFiZWwoKTogT2JzZXJ2YWJsZTxzdHJpbmc+IHtcblx0XHRyZXR1cm4gdGhpcy5fZXhwYW5kQnV0dG9uQXJpYUxhYmVsLnN1YmplY3Q7XG5cdH1cbn1cbiJdfQ==
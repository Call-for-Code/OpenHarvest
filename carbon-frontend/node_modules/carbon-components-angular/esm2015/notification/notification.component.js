/**
 *
 * carbon-angular v0.0.0 | notification.component.js
 *
 * Copyright 2014, 2021 IBM
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0

 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */


import { Component, Input, Output, EventEmitter, ViewChild, HostBinding } from "@angular/core";
import { I18n } from "carbon-components-angular/i18n";
import { NotificationDisplayService } from "./notification-display.service";
import { of, isObservable } from "rxjs";
/**
 * Notification messages are displayed toward the top of the UI and do not interrupt userâ€™s work.
 *
 * [See demo](../../?path=/story/notification--basic)
 *
 * <example-url>../../iframe.html?id=notification--basic</example-url>
 */
export class Notification {
    constructor(notificationDisplayService, i18n) {
        this.notificationDisplayService = notificationDisplayService;
        this.i18n = i18n;
        /**
         * Emits on close.
         */
        this.close = new EventEmitter();
        this.notificationID = `notification-${Notification.notificationCount++}`;
        this.notificationClass = true;
        this.role = "alert";
        this.defaultNotificationObj = {
            title: "",
            message: "",
            type: "info",
            showClose: true,
            closeLabel: this.i18n.get("NOTIFICATION.CLOSE_BUTTON")
        };
        this._notificationObj = Object.assign({}, this.defaultNotificationObj);
    }
    /**
     * Can have `type`, `title`, and `message` members.
     *
     * `type` can be one of `"info"`, `"warning"`, `"error"`, `"success"`
     *
     * `message` is the message to display
     */
    get notificationObj() {
        return this._notificationObj;
    }
    set notificationObj(obj) {
        if (obj.closeLabel) {
            obj.closeLabel = of(obj.closeLabel);
        }
        this._notificationObj = Object.assign({}, this.defaultNotificationObj, obj);
    }
    get isError() { return this.notificationObj.type === "error"; }
    get isInfo() { return this.notificationObj.type === "info"; }
    get isSuccess() { return this.notificationObj.type === "success"; }
    get isWarning() { return this.notificationObj.type === "warning"; }
    get isLowContrast() { return this.notificationObj.lowContrast; }
    get isCloseHidden() { return !this._notificationObj.showClose; }
    /**
     * Emits close event.
     */
    onClose() {
        this.close.emit();
    }
    onClick(action, event) {
        if (!action.click) {
            return;
        }
        if (isObservable(action.click)) {
            action.click.next({ event, action });
        }
        else {
            action.click({ event, action });
        }
    }
    destroy() {
        this.notificationDisplayService.close(this);
    }
}
Notification.notificationCount = 0;
Notification.decorators = [
    { type: Component, args: [{
                selector: "ibm-notification",
                template: `
		<div class="bx--inline-notification__details">
			<svg
				ibmIcon="error--filled"
				size="16"
				*ngIf="notificationObj.type === 'error'"
				class="bx--inline-notification__icon">
			</svg>
			<svg
				ibmIcon="warning--filled"
				size="16"
				*ngIf="notificationObj.type === 'warning'"
				class="bx--inline-notification__icon">
			</svg>
			<svg
				ibmIcon="checkmark--filled"
				size="16"
				*ngIf="notificationObj.type === 'success'"
				class="bx--inline-notification__icon">
			</svg>
			<svg
				ibmIcon="information--filled"
				size="16"
				*ngIf="notificationObj.type === 'info'"
				class="bx--inline-notification__icon">
			</svg>
			<div class="bx--inline-notification__text-wrapper">
				<p *ngIf="!notificationObj.template" ibmNotificationTitle [innerHTML]="notificationObj.title"></p>
				<div *ngIf="!notificationObj.template" ibmNotificationSubtitle>
					<span [innerHTML]="notificationObj.message"></span>
					<ng-container *ngFor="let link of notificationObj.links">
						<a ibmLink [href]="link.href"> {{link.text}}</a>
					</ng-container>
				</div>
				<ng-container *ngTemplateOutlet="notificationObj.template; context: { $implicit: notificationObj}"></ng-container>
			</div>
		</div>
		<div *ngFor="let action of notificationObj.actions">
			<button
				(click)="onClick(action, $event)"
				ibmButton="ghost"
				size="sm"
				class="bx--inline-notification__action-button"
				type="button">
				{{action.text}}
			</button>
		</div>
		<button
			*ngIf="!isCloseHidden"
			(click)="onClose()"
			class="bx--inline-notification__close-button"
			[attr.aria-label]="notificationObj.closeLabel | async"
			type="button">
			<svg ibmIcon="close" size="16" class="bx--inline-notification__close-icon"></svg>
		</button>
	`
            }] }
];
/** @nocollapse */
Notification.ctorParameters = () => [
    { type: NotificationDisplayService },
    { type: I18n }
];
Notification.propDecorators = {
    notificationObj: [{ type: Input }],
    close: [{ type: Output }],
    notification: [{ type: ViewChild, args: ["notification", { static: false },] }],
    notificationID: [{ type: HostBinding, args: ["attr.id",] }],
    notificationClass: [{ type: HostBinding, args: ["class.bx--inline-notification",] }],
    role: [{ type: HostBinding, args: ["attr.role",] }],
    isError: [{ type: HostBinding, args: ["class.bx--inline-notification--error",] }],
    isInfo: [{ type: HostBinding, args: ["class.bx--inline-notification--info",] }],
    isSuccess: [{ type: HostBinding, args: ["class.bx--inline-notification--success",] }],
    isWarning: [{ type: HostBinding, args: ["class.bx--inline-notification--warning",] }],
    isLowContrast: [{ type: HostBinding, args: ["class.bx--inline-notification--low-contrast",] }],
    isCloseHidden: [{ type: HostBinding, args: ["class.bx--inline-notification--hide-close-button",] }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm90aWZpY2F0aW9uLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2NhcmJvbi1jb21wb25lbnRzLWFuZ3VsYXIvbm90aWZpY2F0aW9uLyIsInNvdXJjZXMiOlsibm90aWZpY2F0aW9uLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQ04sU0FBUyxFQUNULEtBQUssRUFDTCxNQUFNLEVBQ04sWUFBWSxFQUVaLFNBQVMsRUFDVCxXQUFXLEVBQ1gsTUFBTSxlQUFlLENBQUM7QUFHdkIsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBQ3RELE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBQzVFLE9BQU8sRUFBRSxFQUFFLEVBQUUsWUFBWSxFQUFXLE1BQU0sTUFBTSxDQUFDO0FBRWpEOzs7Ozs7R0FNRztBQTRESCxNQUFNLE9BQU8sWUFBWTtJQWlEeEIsWUFBc0IsMEJBQXNELEVBQVksSUFBVTtRQUE1RSwrQkFBMEIsR0FBMUIsMEJBQTBCLENBQTRCO1FBQVksU0FBSSxHQUFKLElBQUksQ0FBTTtRQTlCbEc7O1dBRUc7UUFDTyxVQUFLLEdBQXNCLElBQUksWUFBWSxFQUFFLENBQUM7UUFPaEMsbUJBQWMsR0FBRyxnQkFBZ0IsWUFBWSxDQUFDLGlCQUFpQixFQUFFLEVBQUUsQ0FBQztRQUM5QyxzQkFBaUIsR0FBRyxJQUFJLENBQUM7UUFDN0MsU0FBSSxHQUFHLE9BQU8sQ0FBQztRQVMvQiwyQkFBc0IsR0FBRztZQUNsQyxLQUFLLEVBQUUsRUFBRTtZQUNULE9BQU8sRUFBRSxFQUFFO1lBQ1gsSUFBSSxFQUFFLE1BQU07WUFDWixTQUFTLEVBQUUsSUFBSTtZQUNmLFVBQVUsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQywyQkFBMkIsQ0FBQztTQUN0RCxDQUFDO1FBQ1EscUJBQWdCLEdBQXdCLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO0lBRUksQ0FBQztJQS9DdEc7Ozs7OztPQU1HO0lBQ0gsSUFBYSxlQUFlO1FBQzNCLE9BQU8sSUFBSSxDQUFDLGdCQUFnQixDQUFDO0lBQzlCLENBQUM7SUFDRCxJQUFJLGVBQWUsQ0FBQyxHQUF3QjtRQUMzQyxJQUFJLEdBQUcsQ0FBQyxVQUFVLEVBQUU7WUFDbkIsR0FBRyxDQUFDLFVBQVUsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1NBQ3BDO1FBQ0QsSUFBSSxDQUFDLGdCQUFnQixHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxzQkFBc0IsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUM3RSxDQUFDO0lBZ0JELElBQXlELE9BQU8sS0FBSyxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxLQUFLLE9BQU8sQ0FBQyxDQUFDLENBQUM7SUFDcEgsSUFBd0QsTUFBTSxLQUFLLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLEtBQUssTUFBTSxDQUFDLENBQUMsQ0FBQztJQUNqSCxJQUEyRCxTQUFTLEtBQUssT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDO0lBQzFILElBQTJELFNBQVMsS0FBSyxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7SUFDMUgsSUFBZ0UsYUFBYSxLQUFLLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO0lBQzVILElBQXFFLGFBQWEsS0FBSyxPQUFPLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7SUFhakk7O09BRUc7SUFDSCxPQUFPO1FBQ04sSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUNuQixDQUFDO0lBRUQsT0FBTyxDQUFDLE1BQU0sRUFBRSxLQUFLO1FBQ3BCLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFO1lBQ2xCLE9BQU87U0FDUDtRQUNELElBQUksWUFBWSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUM5QixNQUFNLENBQUMsS0FBOEMsQ0FBQyxJQUFJLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxFQUFDLENBQUMsQ0FBQztTQUM3RTthQUFNO1lBQ04sTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFDLEtBQUssRUFBRSxNQUFNLEVBQUMsQ0FBQyxDQUFDO1NBQzlCO0lBQ0YsQ0FBQztJQUVELE9BQU87UUFDTixJQUFJLENBQUMsMEJBQTBCLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzdDLENBQUM7O0FBdEVjLDhCQUFpQixHQUFHLENBQUMsQ0FBQzs7WUE1RHJDLFNBQVMsU0FBQztnQkFDVixRQUFRLEVBQUUsa0JBQWtCO2dCQUM1QixRQUFRLEVBQUU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7RUF1RFQ7YUFDRDs7OztZQXBFUSwwQkFBMEI7WUFEMUIsSUFBSTs7OzhCQStFWCxLQUFLO29CQWFMLE1BQU07MkJBS04sU0FBUyxTQUFDLGNBQWMsRUFBRSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUU7NkJBRTNDLFdBQVcsU0FBQyxTQUFTO2dDQUNyQixXQUFXLFNBQUMsK0JBQStCO21CQUMzQyxXQUFXLFNBQUMsV0FBVztzQkFFdkIsV0FBVyxTQUFDLHNDQUFzQztxQkFDbEQsV0FBVyxTQUFDLHFDQUFxQzt3QkFDakQsV0FBVyxTQUFDLHdDQUF3Qzt3QkFDcEQsV0FBVyxTQUFDLHdDQUF3Qzs0QkFDcEQsV0FBVyxTQUFDLDZDQUE2Qzs0QkFDekQsV0FBVyxTQUFDLGtEQUFrRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG5cdENvbXBvbmVudCxcblx0SW5wdXQsXG5cdE91dHB1dCxcblx0RXZlbnRFbWl0dGVyLFxuXHRDb21wb25lbnRSZWYsXG5cdFZpZXdDaGlsZCxcblx0SG9zdEJpbmRpbmdcbn0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcblxuaW1wb3J0IHsgTm90aWZpY2F0aW9uQ29udGVudCB9IGZyb20gXCIuL25vdGlmaWNhdGlvbi1jb250ZW50LmludGVyZmFjZVwiO1xuaW1wb3J0IHsgSTE4biB9IGZyb20gXCJjYXJib24tY29tcG9uZW50cy1hbmd1bGFyL2kxOG5cIjtcbmltcG9ydCB7IE5vdGlmaWNhdGlvbkRpc3BsYXlTZXJ2aWNlIH0gZnJvbSBcIi4vbm90aWZpY2F0aW9uLWRpc3BsYXkuc2VydmljZVwiO1xuaW1wb3J0IHsgb2YsIGlzT2JzZXJ2YWJsZSwgU3ViamVjdCB9IGZyb20gXCJyeGpzXCI7XG5cbi8qKlxuICogTm90aWZpY2F0aW9uIG1lc3NhZ2VzIGFyZSBkaXNwbGF5ZWQgdG93YXJkIHRoZSB0b3Agb2YgdGhlIFVJIGFuZCBkbyBub3QgaW50ZXJydXB0IHVzZXLigJlzIHdvcmsuXG4gKlxuICogW1NlZSBkZW1vXSguLi8uLi8/cGF0aD0vc3Rvcnkvbm90aWZpY2F0aW9uLS1iYXNpYylcbiAqXG4gKiA8ZXhhbXBsZS11cmw+Li4vLi4vaWZyYW1lLmh0bWw/aWQ9bm90aWZpY2F0aW9uLS1iYXNpYzwvZXhhbXBsZS11cmw+XG4gKi9cbkBDb21wb25lbnQoe1xuXHRzZWxlY3RvcjogXCJpYm0tbm90aWZpY2F0aW9uXCIsXG5cdHRlbXBsYXRlOiBgXG5cdFx0PGRpdiBjbGFzcz1cImJ4LS1pbmxpbmUtbm90aWZpY2F0aW9uX19kZXRhaWxzXCI+XG5cdFx0XHQ8c3ZnXG5cdFx0XHRcdGlibUljb249XCJlcnJvci0tZmlsbGVkXCJcblx0XHRcdFx0c2l6ZT1cIjE2XCJcblx0XHRcdFx0Km5nSWY9XCJub3RpZmljYXRpb25PYmoudHlwZSA9PT0gJ2Vycm9yJ1wiXG5cdFx0XHRcdGNsYXNzPVwiYngtLWlubGluZS1ub3RpZmljYXRpb25fX2ljb25cIj5cblx0XHRcdDwvc3ZnPlxuXHRcdFx0PHN2Z1xuXHRcdFx0XHRpYm1JY29uPVwid2FybmluZy0tZmlsbGVkXCJcblx0XHRcdFx0c2l6ZT1cIjE2XCJcblx0XHRcdFx0Km5nSWY9XCJub3RpZmljYXRpb25PYmoudHlwZSA9PT0gJ3dhcm5pbmcnXCJcblx0XHRcdFx0Y2xhc3M9XCJieC0taW5saW5lLW5vdGlmaWNhdGlvbl9faWNvblwiPlxuXHRcdFx0PC9zdmc+XG5cdFx0XHQ8c3ZnXG5cdFx0XHRcdGlibUljb249XCJjaGVja21hcmstLWZpbGxlZFwiXG5cdFx0XHRcdHNpemU9XCIxNlwiXG5cdFx0XHRcdCpuZ0lmPVwibm90aWZpY2F0aW9uT2JqLnR5cGUgPT09ICdzdWNjZXNzJ1wiXG5cdFx0XHRcdGNsYXNzPVwiYngtLWlubGluZS1ub3RpZmljYXRpb25fX2ljb25cIj5cblx0XHRcdDwvc3ZnPlxuXHRcdFx0PHN2Z1xuXHRcdFx0XHRpYm1JY29uPVwiaW5mb3JtYXRpb24tLWZpbGxlZFwiXG5cdFx0XHRcdHNpemU9XCIxNlwiXG5cdFx0XHRcdCpuZ0lmPVwibm90aWZpY2F0aW9uT2JqLnR5cGUgPT09ICdpbmZvJ1wiXG5cdFx0XHRcdGNsYXNzPVwiYngtLWlubGluZS1ub3RpZmljYXRpb25fX2ljb25cIj5cblx0XHRcdDwvc3ZnPlxuXHRcdFx0PGRpdiBjbGFzcz1cImJ4LS1pbmxpbmUtbm90aWZpY2F0aW9uX190ZXh0LXdyYXBwZXJcIj5cblx0XHRcdFx0PHAgKm5nSWY9XCIhbm90aWZpY2F0aW9uT2JqLnRlbXBsYXRlXCIgaWJtTm90aWZpY2F0aW9uVGl0bGUgW2lubmVySFRNTF09XCJub3RpZmljYXRpb25PYmoudGl0bGVcIj48L3A+XG5cdFx0XHRcdDxkaXYgKm5nSWY9XCIhbm90aWZpY2F0aW9uT2JqLnRlbXBsYXRlXCIgaWJtTm90aWZpY2F0aW9uU3VidGl0bGU+XG5cdFx0XHRcdFx0PHNwYW4gW2lubmVySFRNTF09XCJub3RpZmljYXRpb25PYmoubWVzc2FnZVwiPjwvc3Bhbj5cblx0XHRcdFx0XHQ8bmctY29udGFpbmVyICpuZ0Zvcj1cImxldCBsaW5rIG9mIG5vdGlmaWNhdGlvbk9iai5saW5rc1wiPlxuXHRcdFx0XHRcdFx0PGEgaWJtTGluayBbaHJlZl09XCJsaW5rLmhyZWZcIj4ge3tsaW5rLnRleHR9fTwvYT5cblx0XHRcdFx0XHQ8L25nLWNvbnRhaW5lcj5cblx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDxuZy1jb250YWluZXIgKm5nVGVtcGxhdGVPdXRsZXQ9XCJub3RpZmljYXRpb25PYmoudGVtcGxhdGU7IGNvbnRleHQ6IHsgJGltcGxpY2l0OiBub3RpZmljYXRpb25PYmp9XCI+PC9uZy1jb250YWluZXI+XG5cdFx0XHQ8L2Rpdj5cblx0XHQ8L2Rpdj5cblx0XHQ8ZGl2ICpuZ0Zvcj1cImxldCBhY3Rpb24gb2Ygbm90aWZpY2F0aW9uT2JqLmFjdGlvbnNcIj5cblx0XHRcdDxidXR0b25cblx0XHRcdFx0KGNsaWNrKT1cIm9uQ2xpY2soYWN0aW9uLCAkZXZlbnQpXCJcblx0XHRcdFx0aWJtQnV0dG9uPVwiZ2hvc3RcIlxuXHRcdFx0XHRzaXplPVwic21cIlxuXHRcdFx0XHRjbGFzcz1cImJ4LS1pbmxpbmUtbm90aWZpY2F0aW9uX19hY3Rpb24tYnV0dG9uXCJcblx0XHRcdFx0dHlwZT1cImJ1dHRvblwiPlxuXHRcdFx0XHR7e2FjdGlvbi50ZXh0fX1cblx0XHRcdDwvYnV0dG9uPlxuXHRcdDwvZGl2PlxuXHRcdDxidXR0b25cblx0XHRcdCpuZ0lmPVwiIWlzQ2xvc2VIaWRkZW5cIlxuXHRcdFx0KGNsaWNrKT1cIm9uQ2xvc2UoKVwiXG5cdFx0XHRjbGFzcz1cImJ4LS1pbmxpbmUtbm90aWZpY2F0aW9uX19jbG9zZS1idXR0b25cIlxuXHRcdFx0W2F0dHIuYXJpYS1sYWJlbF09XCJub3RpZmljYXRpb25PYmouY2xvc2VMYWJlbCB8IGFzeW5jXCJcblx0XHRcdHR5cGU9XCJidXR0b25cIj5cblx0XHRcdDxzdmcgaWJtSWNvbj1cImNsb3NlXCIgc2l6ZT1cIjE2XCIgY2xhc3M9XCJieC0taW5saW5lLW5vdGlmaWNhdGlvbl9fY2xvc2UtaWNvblwiPjwvc3ZnPlxuXHRcdDwvYnV0dG9uPlxuXHRgXG59KVxuZXhwb3J0IGNsYXNzIE5vdGlmaWNhdGlvbiB7XG5cdHByaXZhdGUgc3RhdGljIG5vdGlmaWNhdGlvbkNvdW50ID0gMDtcblx0LyoqXG5cdCAqIENhbiBoYXZlIGB0eXBlYCwgYHRpdGxlYCwgYW5kIGBtZXNzYWdlYCBtZW1iZXJzLlxuXHQgKlxuXHQgKiBgdHlwZWAgY2FuIGJlIG9uZSBvZiBgXCJpbmZvXCJgLCBgXCJ3YXJuaW5nXCJgLCBgXCJlcnJvclwiYCwgYFwic3VjY2Vzc1wiYFxuXHQgKlxuXHQgKiBgbWVzc2FnZWAgaXMgdGhlIG1lc3NhZ2UgdG8gZGlzcGxheVxuXHQgKi9cblx0QElucHV0KCkgZ2V0IG5vdGlmaWNhdGlvbk9iaigpOiBOb3RpZmljYXRpb25Db250ZW50IHtcblx0XHRyZXR1cm4gdGhpcy5fbm90aWZpY2F0aW9uT2JqO1xuXHR9XG5cdHNldCBub3RpZmljYXRpb25PYmoob2JqOiBOb3RpZmljYXRpb25Db250ZW50KSB7XG5cdFx0aWYgKG9iai5jbG9zZUxhYmVsKSB7XG5cdFx0XHRvYmouY2xvc2VMYWJlbCA9IG9mKG9iai5jbG9zZUxhYmVsKTtcblx0XHR9XG5cdFx0dGhpcy5fbm90aWZpY2F0aW9uT2JqID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5kZWZhdWx0Tm90aWZpY2F0aW9uT2JqLCBvYmopO1xuXHR9XG5cblx0LyoqXG5cdCAqIEVtaXRzIG9uIGNsb3NlLlxuXHQgKi9cblx0QE91dHB1dCgpIGNsb3NlOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuXHRjb21wb25lbnRSZWY6IENvbXBvbmVudFJlZjxOb3RpZmljYXRpb24+O1xuXG5cdC8vIEB0cy1pZ25vcmVcblx0QFZpZXdDaGlsZChcIm5vdGlmaWNhdGlvblwiLCB7IHN0YXRpYzogZmFsc2UgfSkgbm90aWZpY2F0aW9uO1xuXG5cdEBIb3N0QmluZGluZyhcImF0dHIuaWRcIikgbm90aWZpY2F0aW9uSUQgPSBgbm90aWZpY2F0aW9uLSR7Tm90aWZpY2F0aW9uLm5vdGlmaWNhdGlvbkNvdW50Kyt9YDtcblx0QEhvc3RCaW5kaW5nKFwiY2xhc3MuYngtLWlubGluZS1ub3RpZmljYXRpb25cIikgbm90aWZpY2F0aW9uQ2xhc3MgPSB0cnVlO1xuXHRASG9zdEJpbmRpbmcoXCJhdHRyLnJvbGVcIikgcm9sZSA9IFwiYWxlcnRcIjtcblxuXHRASG9zdEJpbmRpbmcoXCJjbGFzcy5ieC0taW5saW5lLW5vdGlmaWNhdGlvbi0tZXJyb3JcIikgZ2V0IGlzRXJyb3IoKSB7IHJldHVybiB0aGlzLm5vdGlmaWNhdGlvbk9iai50eXBlID09PSBcImVycm9yXCI7IH1cblx0QEhvc3RCaW5kaW5nKFwiY2xhc3MuYngtLWlubGluZS1ub3RpZmljYXRpb24tLWluZm9cIikgZ2V0IGlzSW5mbygpIHsgcmV0dXJuIHRoaXMubm90aWZpY2F0aW9uT2JqLnR5cGUgPT09IFwiaW5mb1wiOyB9XG5cdEBIb3N0QmluZGluZyhcImNsYXNzLmJ4LS1pbmxpbmUtbm90aWZpY2F0aW9uLS1zdWNjZXNzXCIpIGdldCBpc1N1Y2Nlc3MoKSB7IHJldHVybiB0aGlzLm5vdGlmaWNhdGlvbk9iai50eXBlID09PSBcInN1Y2Nlc3NcIjsgfVxuXHRASG9zdEJpbmRpbmcoXCJjbGFzcy5ieC0taW5saW5lLW5vdGlmaWNhdGlvbi0td2FybmluZ1wiKSBnZXQgaXNXYXJuaW5nKCkgeyByZXR1cm4gdGhpcy5ub3RpZmljYXRpb25PYmoudHlwZSA9PT0gXCJ3YXJuaW5nXCI7IH1cblx0QEhvc3RCaW5kaW5nKFwiY2xhc3MuYngtLWlubGluZS1ub3RpZmljYXRpb24tLWxvdy1jb250cmFzdFwiKSBnZXQgaXNMb3dDb250cmFzdCgpIHsgcmV0dXJuIHRoaXMubm90aWZpY2F0aW9uT2JqLmxvd0NvbnRyYXN0OyB9XG5cdEBIb3N0QmluZGluZyhcImNsYXNzLmJ4LS1pbmxpbmUtbm90aWZpY2F0aW9uLS1oaWRlLWNsb3NlLWJ1dHRvblwiKSBnZXQgaXNDbG9zZUhpZGRlbigpIHsgcmV0dXJuICF0aGlzLl9ub3RpZmljYXRpb25PYmouc2hvd0Nsb3NlOyB9XG5cblx0cHJvdGVjdGVkIGRlZmF1bHROb3RpZmljYXRpb25PYmogPSB7XG5cdFx0dGl0bGU6IFwiXCIsXG5cdFx0bWVzc2FnZTogXCJcIixcblx0XHR0eXBlOiBcImluZm9cIixcblx0XHRzaG93Q2xvc2U6IHRydWUsXG5cdFx0Y2xvc2VMYWJlbDogdGhpcy5pMThuLmdldChcIk5PVElGSUNBVElPTi5DTE9TRV9CVVRUT05cIilcblx0fTtcblx0cHJvdGVjdGVkIF9ub3RpZmljYXRpb25PYmo6IE5vdGlmaWNhdGlvbkNvbnRlbnQgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHROb3RpZmljYXRpb25PYmopO1xuXG5cdGNvbnN0cnVjdG9yKHByb3RlY3RlZCBub3RpZmljYXRpb25EaXNwbGF5U2VydmljZTogTm90aWZpY2F0aW9uRGlzcGxheVNlcnZpY2UsIHByb3RlY3RlZCBpMThuOiBJMThuKSB7fVxuXG5cdC8qKlxuXHQgKiBFbWl0cyBjbG9zZSBldmVudC5cblx0ICovXG5cdG9uQ2xvc2UoKSB7XG5cdFx0dGhpcy5jbG9zZS5lbWl0KCk7XG5cdH1cblxuXHRvbkNsaWNrKGFjdGlvbiwgZXZlbnQpIHtcblx0XHRpZiAoIWFjdGlvbi5jbGljaykge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpZiAoaXNPYnNlcnZhYmxlKGFjdGlvbi5jbGljaykpIHtcblx0XHRcdChhY3Rpb24uY2xpY2sgYXMgU3ViamVjdDx7ZXZlbnQ6IEV2ZW50LCBhY3Rpb246IGFueX0+KS5uZXh0KHtldmVudCwgYWN0aW9ufSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGFjdGlvbi5jbGljayh7ZXZlbnQsIGFjdGlvbn0pO1xuXHRcdH1cblx0fVxuXG5cdGRlc3Ryb3koKSB7XG5cdFx0dGhpcy5ub3RpZmljYXRpb25EaXNwbGF5U2VydmljZS5jbG9zZSh0aGlzKTtcblx0fVxufVxuIl19
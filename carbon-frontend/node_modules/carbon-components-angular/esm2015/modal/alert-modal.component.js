/**
 *
 * carbon-angular v0.0.0 | alert-modal.component.js
 *
 * Copyright 2014, 2021 IBM
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0

 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */


import { Component, Inject, ViewChild, Optional } from "@angular/core";
import { BaseModal } from "./base-modal.class";
/**
 * Component to create standard modals for presenting content or asking for user's input.
 * It can show as a passive modal showing only text or show as a transactional modal with
 * multiple buttons for different actions for the user to choose from.
 *
 * Using a modal in your application requires `ibm-placeholder` which would generally be
 * placed near the end of your app component template (app.component.ts or app.component.html) as:
 *
 * ```html
 * <ibm-placeholder></ibm-placeholder>
 * ```
 *
 * Example of opening the modal:
 *
 * ```typescript
 * \@Component({
 *  selector: "app-modal-demo",
 *  template: `
 *   <button class="btn--primary" (click)="openModal()">Open modal</button>
 *   <ibm-placeholder></ibm-placeholder>`
 * })
 * export class ModalDemo {
 * 	openModal() {
 * 		this.modalService.show({
 *			modalType: "default",
 *			label: "optional header text",
 *			title: "Modal title",
 *			text: "Modal text",
 *			buttons: [{
 *				text: "Button text",
 *				type: "primary",
 *				click: clickFunction
 *			}]
 *		});
 * 	}
 * }
 * ```
 */
export class AlertModal extends BaseModal {
    /**
     * Creates an instance of `AlertModal`.
     */
    constructor(type = "default", label, title, content, size, hasScrollingContent = null, buttons = [], onClose) {
        super();
        this.type = type;
        this.label = label;
        this.title = title;
        this.content = content;
        this.size = size;
        this.hasScrollingContent = hasScrollingContent;
        this.buttons = buttons;
        this.onClose = onClose;
        for (let i = 0; i < this.buttons.length; i++) {
            const button = this.buttons[i];
            if (!button.id) {
                button.id = `alert-modal-button-${i}`;
            }
            if (!button.type) {
                button.type = "secondary";
            }
        }
    }
    ngAfterViewInit() {
        if (!this.modalContent) {
            return false;
        }
        const element = this.modalContent.nativeElement;
        if (element.scrollHeight > element.clientHeight) {
            element.tabIndex = 0;
        }
        else {
            element.tabIndex = -1;
        }
    }
    buttonClicked(buttonIndex) {
        const button = this.buttons[buttonIndex];
        if (button.click) {
            button.click();
        }
        this.closeModal();
    }
    dismissModal(trigger) {
        if (this.onClose && this.onClose(trigger) === false) {
            return;
        }
        this.closeModal();
    }
}
AlertModal.decorators = [
    { type: Component, args: [{
                selector: "ibm-alert-modal",
                template: `
		<ibm-modal
			[size]="size"
			[theme]="type"
			[ariaLabel]="title"
			[hasScrollingContent]="hasScrollingContent"
			[open]="open"
			(overlaySelected)="dismissModal('overlay')">
			<ibm-modal-header (closeSelect)="dismissModal('close')">
				<p ibmModalHeaderLabel class="bx--type-delta">{{label}}</p>
				<p ibmModalHeaderHeading class="bx--type-beta">{{title}}</p>
			</ibm-modal-header>
			<div ibmModalContent #modalContent>
				<p [innerHTML]="content"></p>
			</div>
			<ibm-modal-footer *ngIf="buttons.length > 0">
				<ng-container *ngFor="let button of buttons; let i = index">
					<button
						[ibmButton]="button.type"
						(click)="buttonClicked(i)"
						[id]="button.id"
						[attr.modal-primary-focus]="(button.type.indexOf('primary') !== -1 ? '' : null)">
						{{button.text}}
					</button>
				</ng-container>
			</ibm-modal-footer>
		</ibm-modal>
	`
            }] }
];
/** @nocollapse */
AlertModal.ctorParameters = () => [
    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: ["type",] }] },
    { type: String, decorators: [{ type: Optional }, { type: Inject, args: ["label",] }] },
    { type: String, decorators: [{ type: Optional }, { type: Inject, args: ["title",] }] },
    { type: String, decorators: [{ type: Optional }, { type: Inject, args: ["content",] }] },
    { type: String, decorators: [{ type: Optional }, { type: Inject, args: ["size",] }] },
    { type: Boolean, decorators: [{ type: Optional }, { type: Inject, args: ["hasScrollingContent",] }] },
    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: ["buttons",] }] },
    { type: Function, decorators: [{ type: Optional }, { type: Inject, args: ["close",] }] }
];
AlertModal.propDecorators = {
    modalContent: [{ type: ViewChild, args: ["modalContent", { static: true },] }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWxlcnQtbW9kYWwuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vY2FyYm9uLWNvbXBvbmVudHMtYW5ndWxhci9tb2RhbC8iLCJzb3VyY2VzIjpbImFsZXJ0LW1vZGFsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQ04sU0FBUyxFQUNULE1BQU0sRUFDTixTQUFTLEVBRVQsUUFBUSxFQUNSLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUUvQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQXFDRztBQWdDSCxNQUFNLE9BQU8sVUFBVyxTQUFRLFNBQVM7SUFHeEM7O09BRUc7SUFDSCxZQUNvQyxPQUFPLFNBQVMsRUFDZixLQUFhLEVBQ2IsS0FBYSxFQUNYLE9BQWUsRUFDbEIsSUFBWSxFQUNHLHNCQUErQixJQUFJLEVBQy9DLFVBQVUsRUFBRSxFQUNkLE9BQWlCO1FBRXJELEtBQUssRUFBRSxDQUFDO1FBVDJCLFNBQUksR0FBSixJQUFJLENBQVk7UUFDZixVQUFLLEdBQUwsS0FBSyxDQUFRO1FBQ2IsVUFBSyxHQUFMLEtBQUssQ0FBUTtRQUNYLFlBQU8sR0FBUCxPQUFPLENBQVE7UUFDbEIsU0FBSSxHQUFKLElBQUksQ0FBUTtRQUNHLHdCQUFtQixHQUFuQixtQkFBbUIsQ0FBZ0I7UUFDL0MsWUFBTyxHQUFQLE9BQU8sQ0FBSztRQUNkLFlBQU8sR0FBUCxPQUFPLENBQVU7UUFHckQsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQzdDLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUU7Z0JBQ2YsTUFBTSxDQUFDLEVBQUUsR0FBRyxzQkFBc0IsQ0FBQyxFQUFFLENBQUM7YUFDdEM7WUFDRCxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRTtnQkFDakIsTUFBTSxDQUFDLElBQUksR0FBRyxXQUFXLENBQUM7YUFDMUI7U0FDRDtJQUNGLENBQUM7SUFFRCxlQUFlO1FBQ2QsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUU7WUFBRSxPQUFPLEtBQUssQ0FBQztTQUFFO1FBQ3pDLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsYUFBYSxDQUFDO1FBQ2hELElBQUksT0FBTyxDQUFDLFlBQVksR0FBRyxPQUFPLENBQUMsWUFBWSxFQUFFO1lBQ2hELE9BQU8sQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDO1NBQ3JCO2FBQU07WUFDTixPQUFPLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxDQUFDO1NBQ3RCO0lBQ0YsQ0FBQztJQUVELGFBQWEsQ0FBQyxXQUFXO1FBQ3hCLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDekMsSUFBSSxNQUFNLENBQUMsS0FBSyxFQUFFO1lBQ2pCLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQztTQUNmO1FBRUQsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO0lBQ25CLENBQUM7SUFFRCxZQUFZLENBQUMsT0FBTztRQUNuQixJQUFJLElBQUksQ0FBQyxPQUFPLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsS0FBSyxLQUFLLEVBQUU7WUFDcEQsT0FBTztTQUNQO1FBQ0QsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO0lBQ25CLENBQUM7OztZQW5GRCxTQUFTLFNBQUM7Z0JBQ1YsUUFBUSxFQUFFLGlCQUFpQjtnQkFDM0IsUUFBUSxFQUFFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7RUEyQlQ7YUFDRDs7Ozs0Q0FRRSxRQUFRLFlBQUksTUFBTSxTQUFDLE1BQU07eUNBQ3pCLFFBQVEsWUFBSSxNQUFNLFNBQUMsT0FBTzt5Q0FDMUIsUUFBUSxZQUFJLE1BQU0sU0FBQyxPQUFPO3lDQUMxQixRQUFRLFlBQUksTUFBTSxTQUFDLFNBQVM7eUNBQzVCLFFBQVEsWUFBSSxNQUFNLFNBQUMsTUFBTTswQ0FDekIsUUFBUSxZQUFJLE1BQU0sU0FBQyxxQkFBcUI7NENBQ3hDLFFBQVEsWUFBSSxNQUFNLFNBQUMsU0FBUztZQUNnQixRQUFRLHVCQUFwRCxRQUFRLFlBQUksTUFBTSxTQUFDLE9BQU87OzsyQkFaM0IsU0FBUyxTQUFDLGNBQWMsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuXHRDb21wb25lbnQsXG5cdEluamVjdCxcblx0Vmlld0NoaWxkLFxuXHRBZnRlclZpZXdJbml0LFxuXHRPcHRpb25hbFxufSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHsgQmFzZU1vZGFsIH0gZnJvbSBcIi4vYmFzZS1tb2RhbC5jbGFzc1wiO1xuXG4vKipcbiAqIENvbXBvbmVudCB0byBjcmVhdGUgc3RhbmRhcmQgbW9kYWxzIGZvciBwcmVzZW50aW5nIGNvbnRlbnQgb3IgYXNraW5nIGZvciB1c2VyJ3MgaW5wdXQuXG4gKiBJdCBjYW4gc2hvdyBhcyBhIHBhc3NpdmUgbW9kYWwgc2hvd2luZyBvbmx5IHRleHQgb3Igc2hvdyBhcyBhIHRyYW5zYWN0aW9uYWwgbW9kYWwgd2l0aFxuICogbXVsdGlwbGUgYnV0dG9ucyBmb3IgZGlmZmVyZW50IGFjdGlvbnMgZm9yIHRoZSB1c2VyIHRvIGNob29zZSBmcm9tLlxuICpcbiAqIFVzaW5nIGEgbW9kYWwgaW4geW91ciBhcHBsaWNhdGlvbiByZXF1aXJlcyBgaWJtLXBsYWNlaG9sZGVyYCB3aGljaCB3b3VsZCBnZW5lcmFsbHkgYmVcbiAqIHBsYWNlZCBuZWFyIHRoZSBlbmQgb2YgeW91ciBhcHAgY29tcG9uZW50IHRlbXBsYXRlIChhcHAuY29tcG9uZW50LnRzIG9yIGFwcC5jb21wb25lbnQuaHRtbCkgYXM6XG4gKlxuICogYGBgaHRtbFxuICogPGlibS1wbGFjZWhvbGRlcj48L2libS1wbGFjZWhvbGRlcj5cbiAqIGBgYFxuICpcbiAqIEV4YW1wbGUgb2Ygb3BlbmluZyB0aGUgbW9kYWw6XG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogXFxAQ29tcG9uZW50KHtcbiAqICBzZWxlY3RvcjogXCJhcHAtbW9kYWwtZGVtb1wiLFxuICogIHRlbXBsYXRlOiBgXG4gKiAgIDxidXR0b24gY2xhc3M9XCJidG4tLXByaW1hcnlcIiAoY2xpY2spPVwib3Blbk1vZGFsKClcIj5PcGVuIG1vZGFsPC9idXR0b24+XG4gKiAgIDxpYm0tcGxhY2Vob2xkZXI+PC9pYm0tcGxhY2Vob2xkZXI+YFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBNb2RhbERlbW8ge1xuICogXHRvcGVuTW9kYWwoKSB7XG4gKiBcdFx0dGhpcy5tb2RhbFNlcnZpY2Uuc2hvdyh7XG4gKlx0XHRcdG1vZGFsVHlwZTogXCJkZWZhdWx0XCIsXG4gKlx0XHRcdGxhYmVsOiBcIm9wdGlvbmFsIGhlYWRlciB0ZXh0XCIsXG4gKlx0XHRcdHRpdGxlOiBcIk1vZGFsIHRpdGxlXCIsXG4gKlx0XHRcdHRleHQ6IFwiTW9kYWwgdGV4dFwiLFxuICpcdFx0XHRidXR0b25zOiBbe1xuICpcdFx0XHRcdHRleHQ6IFwiQnV0dG9uIHRleHRcIixcbiAqXHRcdFx0XHR0eXBlOiBcInByaW1hcnlcIixcbiAqXHRcdFx0XHRjbGljazogY2xpY2tGdW5jdGlvblxuICpcdFx0XHR9XVxuICpcdFx0fSk7XG4gKiBcdH1cbiAqIH1cbiAqIGBgYFxuICovXG5AQ29tcG9uZW50KHtcblx0c2VsZWN0b3I6IFwiaWJtLWFsZXJ0LW1vZGFsXCIsXG5cdHRlbXBsYXRlOiBgXG5cdFx0PGlibS1tb2RhbFxuXHRcdFx0W3NpemVdPVwic2l6ZVwiXG5cdFx0XHRbdGhlbWVdPVwidHlwZVwiXG5cdFx0XHRbYXJpYUxhYmVsXT1cInRpdGxlXCJcblx0XHRcdFtoYXNTY3JvbGxpbmdDb250ZW50XT1cImhhc1Njcm9sbGluZ0NvbnRlbnRcIlxuXHRcdFx0W29wZW5dPVwib3BlblwiXG5cdFx0XHQob3ZlcmxheVNlbGVjdGVkKT1cImRpc21pc3NNb2RhbCgnb3ZlcmxheScpXCI+XG5cdFx0XHQ8aWJtLW1vZGFsLWhlYWRlciAoY2xvc2VTZWxlY3QpPVwiZGlzbWlzc01vZGFsKCdjbG9zZScpXCI+XG5cdFx0XHRcdDxwIGlibU1vZGFsSGVhZGVyTGFiZWwgY2xhc3M9XCJieC0tdHlwZS1kZWx0YVwiPnt7bGFiZWx9fTwvcD5cblx0XHRcdFx0PHAgaWJtTW9kYWxIZWFkZXJIZWFkaW5nIGNsYXNzPVwiYngtLXR5cGUtYmV0YVwiPnt7dGl0bGV9fTwvcD5cblx0XHRcdDwvaWJtLW1vZGFsLWhlYWRlcj5cblx0XHRcdDxkaXYgaWJtTW9kYWxDb250ZW50ICNtb2RhbENvbnRlbnQ+XG5cdFx0XHRcdDxwIFtpbm5lckhUTUxdPVwiY29udGVudFwiPjwvcD5cblx0XHRcdDwvZGl2PlxuXHRcdFx0PGlibS1tb2RhbC1mb290ZXIgKm5nSWY9XCJidXR0b25zLmxlbmd0aCA+IDBcIj5cblx0XHRcdFx0PG5nLWNvbnRhaW5lciAqbmdGb3I9XCJsZXQgYnV0dG9uIG9mIGJ1dHRvbnM7IGxldCBpID0gaW5kZXhcIj5cblx0XHRcdFx0XHQ8YnV0dG9uXG5cdFx0XHRcdFx0XHRbaWJtQnV0dG9uXT1cImJ1dHRvbi50eXBlXCJcblx0XHRcdFx0XHRcdChjbGljayk9XCJidXR0b25DbGlja2VkKGkpXCJcblx0XHRcdFx0XHRcdFtpZF09XCJidXR0b24uaWRcIlxuXHRcdFx0XHRcdFx0W2F0dHIubW9kYWwtcHJpbWFyeS1mb2N1c109XCIoYnV0dG9uLnR5cGUuaW5kZXhPZigncHJpbWFyeScpICE9PSAtMSA/ICcnIDogbnVsbClcIj5cblx0XHRcdFx0XHRcdHt7YnV0dG9uLnRleHR9fVxuXHRcdFx0XHRcdDwvYnV0dG9uPlxuXHRcdFx0XHQ8L25nLWNvbnRhaW5lcj5cblx0XHRcdDwvaWJtLW1vZGFsLWZvb3Rlcj5cblx0XHQ8L2libS1tb2RhbD5cblx0YFxufSlcbmV4cG9ydCBjbGFzcyBBbGVydE1vZGFsIGV4dGVuZHMgQmFzZU1vZGFsIGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCB7XG5cdC8vIEB0cy1pZ25vcmVcblx0QFZpZXdDaGlsZChcIm1vZGFsQ29udGVudFwiLCB7IHN0YXRpYzogdHJ1ZSB9KSBtb2RhbENvbnRlbnQ7XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIGBBbGVydE1vZGFsYC5cblx0ICovXG5cdGNvbnN0cnVjdG9yKFxuXHRcdEBPcHRpb25hbCgpIEBJbmplY3QoXCJ0eXBlXCIpIHB1YmxpYyB0eXBlID0gXCJkZWZhdWx0XCIsXG5cdFx0QE9wdGlvbmFsKCkgQEluamVjdChcImxhYmVsXCIpIHB1YmxpYyBsYWJlbDogc3RyaW5nLFxuXHRcdEBPcHRpb25hbCgpIEBJbmplY3QoXCJ0aXRsZVwiKSBwdWJsaWMgdGl0bGU6IHN0cmluZyxcblx0XHRAT3B0aW9uYWwoKSBASW5qZWN0KFwiY29udGVudFwiKSBwdWJsaWMgY29udGVudDogc3RyaW5nLFxuXHRcdEBPcHRpb25hbCgpIEBJbmplY3QoXCJzaXplXCIpIHB1YmxpYyBzaXplOiBzdHJpbmcsXG5cdFx0QE9wdGlvbmFsKCkgQEluamVjdChcImhhc1Njcm9sbGluZ0NvbnRlbnRcIikgcHVibGljIGhhc1Njcm9sbGluZ0NvbnRlbnQ6IGJvb2xlYW4gPSBudWxsLFxuXHRcdEBPcHRpb25hbCgpIEBJbmplY3QoXCJidXR0b25zXCIpIHB1YmxpYyBidXR0b25zID0gW10sXG5cdFx0QE9wdGlvbmFsKCkgQEluamVjdChcImNsb3NlXCIpIHB1YmxpYyBvbkNsb3NlOiBGdW5jdGlvblxuXHQpIHtcblx0XHRzdXBlcigpO1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5idXR0b25zLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRjb25zdCBidXR0b24gPSB0aGlzLmJ1dHRvbnNbaV07XG5cdFx0XHRpZiAoIWJ1dHRvbi5pZCkge1xuXHRcdFx0XHRidXR0b24uaWQgPSBgYWxlcnQtbW9kYWwtYnV0dG9uLSR7aX1gO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCFidXR0b24udHlwZSkge1xuXHRcdFx0XHRidXR0b24udHlwZSA9IFwic2Vjb25kYXJ5XCI7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0bmdBZnRlclZpZXdJbml0KCkge1xuXHRcdGlmICghdGhpcy5tb2RhbENvbnRlbnQpIHsgcmV0dXJuIGZhbHNlOyB9XG5cdFx0Y29uc3QgZWxlbWVudCA9IHRoaXMubW9kYWxDb250ZW50Lm5hdGl2ZUVsZW1lbnQ7XG5cdFx0aWYgKGVsZW1lbnQuc2Nyb2xsSGVpZ2h0ID4gZWxlbWVudC5jbGllbnRIZWlnaHQpIHtcblx0XHRcdGVsZW1lbnQudGFiSW5kZXggPSAwO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRlbGVtZW50LnRhYkluZGV4ID0gLTE7XG5cdFx0fVxuXHR9XG5cblx0YnV0dG9uQ2xpY2tlZChidXR0b25JbmRleCkge1xuXHRcdGNvbnN0IGJ1dHRvbiA9IHRoaXMuYnV0dG9uc1tidXR0b25JbmRleF07XG5cdFx0aWYgKGJ1dHRvbi5jbGljaykge1xuXHRcdFx0YnV0dG9uLmNsaWNrKCk7XG5cdFx0fVxuXG5cdFx0dGhpcy5jbG9zZU1vZGFsKCk7XG5cdH1cblxuXHRkaXNtaXNzTW9kYWwodHJpZ2dlcikge1xuXHRcdGlmICh0aGlzLm9uQ2xvc2UgJiYgdGhpcy5vbkNsb3NlKHRyaWdnZXIpID09PSBmYWxzZSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR0aGlzLmNsb3NlTW9kYWwoKTtcblx0fVxufVxuIl19
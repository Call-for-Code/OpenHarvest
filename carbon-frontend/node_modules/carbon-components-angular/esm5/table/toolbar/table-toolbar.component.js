/**
 *
 * carbon-angular v0.0.0 | table-toolbar.component.js
 *
 * Copyright 2014, 2021 IBM
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0

 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */


import { TableModel } from "../table-model.class";
import { Component, EventEmitter, Input, Output } from "@angular/core";
import { I18n } from "carbon-components-angular/i18n";
/**
 * The table toolbar is reserved for global table actions such as table settings, complex filter, export, or editing table data.
 *
 * ## Basic usage
 *
 * ```html
 * <ibm-table-toolbar [model]="model">
 *		<ibm-table-toolbar-actions>
 *			<button ibmButton="primary">
 *				Delete
 *				<svg ibmIcon="delete" size="16" class="bx--btn__icon"></svg>
 *			</button>
 *			<button ibmButton="primary">
 *				Save
 *				<svg ibmIcon="save" size="16" class="bx--btn__icon"></svg>
 *			</button>
 *			<button ibmButton="primary">
 *				Download
 *				<svg ibmIcon="download" size="16" class="bx--btn__icon"></svg>
 *			</button>
 *		</ibm-table-toolbar-actions>
 *			<ibm-table-toolbar-content>
 *			<ibm-table-toolbar-search [expandable]="true"></ibm-table-toolbar-search>
 *			<button ibmButton="toolbar-action">
 *				<svg ibmIcon="settings" size="16" class="bx--toolbar-action__icon"></ibm-icon-settings>
 *			</button>
 *			<button ibmButton="primary" size="sm">
 *				Primary Button
 *				<svg ibmIcon="add" size="20" class="bx--btn__icon"></svg>
 *			</button>
 *		</ibm-table-toolbar-content>
 *	</ibm-table-toolbar>
 * ```
 *
 */
var TableToolbar = /** @class */ (function () {
    function TableToolbar(i18n) {
        this.i18n = i18n;
        this.size = "md";
        this.cancel = new EventEmitter();
        this.actionBarLabel = this.i18n.getOverridable("TABLE_TOOLBAR.ACTION_BAR");
        this._cancelText = this.i18n.getOverridable("TABLE_TOOLBAR.CANCEL");
        this._batchTextLegacy = this.i18n.getOverridable("TABLE_TOOLBAR.BATCH_TEXT");
        this._batchTextSingle = this.i18n.getOverridable("TABLE_TOOLBAR.BATCH_TEXT_SINGLE");
        this._batchTextMultiple = this.i18n.getOverridable("TABLE_TOOLBAR.BATCH_TEXT_MULTIPLE");
    }
    Object.defineProperty(TableToolbar.prototype, "batchText", {
        set: function (value) {
            if (typeof value === "object") {
                this._batchTextSingle.override(value.SINGLE);
                this._batchTextMultiple.override(value.MULTIPLE);
            }
            else {
                // For compatibility with old code
                this._batchTextLegacy.override(value);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TableToolbar.prototype, "ariaLabel", {
        set: function (value) {
            this.actionBarLabel.override(value.ACTION_BAR);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TableToolbar.prototype, "cancelText", {
        get: function () {
            return { CANCEL: this._cancelText.value };
        },
        set: function (value) {
            this._cancelText.override(value.CANCEL);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TableToolbar.prototype, "count", {
        get: function () {
            return this.model.totalDataLength > 0 ? this.model.rowsSelected.reduce(function (previous, current) { return previous + (current ? 1 : 0); }, 0) : 0;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TableToolbar.prototype, "selected", {
        get: function () {
            return this.model.totalDataLength > 0 ? this.model.rowsSelected.some(function (item) { return item; }) : false;
        },
        enumerable: true,
        configurable: true
    });
    TableToolbar.prototype.onCancel = function () {
        this.model.selectAll(false);
        this.cancel.emit();
    };
    TableToolbar.decorators = [
        { type: Component, args: [{
                    selector: "ibm-table-toolbar",
                    template: "\n\t<section\n\t\tclass=\"bx--table-toolbar\"\n\t\t[ngClass]=\"{'bx--table-toolbar--small' : size === 'sm'}\">\n\t\t<div\n\t\t\t*ngIf=\"model\"\n\t\t\tclass=\"bx--batch-actions\"\n\t\t\t[ngClass]=\"{\n\t\t\t\t'bx--batch-actions--active': selected\n\t\t\t}\"\n\t\t\t[attr.aria-label]=\"actionBarLabel.subject | async\">\n\t\t\t<div class=\"bx--action-list\">\n\t\t\t\t<ng-content select=\"ibm-table-toolbar-actions\"></ng-content>\n\t\t\t\t<button\n\t\t\t\t\tibmButton=\"primary\"\n\t\t\t\t\tclass=\"bx--batch-summary__cancel\"\n\t\t\t\t\t[tabindex]=\"selected ? 0 : -1\"\n\t\t\t\t\t(click)=\"onCancel()\">\n\t\t\t\t\t{{_cancelText.subject | async}}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div class=\"bx--batch-summary\">\n\t\t\t\t<p class=\"bx--batch-summary__para\" *ngIf=\"count as n\">\n\t\t\t\t\t<ng-container *ngIf=\"_batchTextLegacy.subject | async as legacyText; else batchTextBlock\">\n\t\t\t\t\t\t<span>{{n}}</span> {{legacyText}}\n\t\t\t\t\t</ng-container>\n\t\t\t\t\t<ng-template #batchTextBlock>\n\t\t\t\t\t\t<span *ngIf=\"n === 1\">{{_batchTextSingle.subject | async}}</span>\n\t\t\t\t\t\t<span *ngIf=\"n !== 1\">{{_batchTextMultiple.subject | i18nReplace: {count: n} | async}}</span>\n\t\t\t\t\t</ng-template>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t\t<ng-content></ng-content>\n\t</section>\n\t"
                }] }
    ];
    /** @nocollapse */
    TableToolbar.ctorParameters = function () { return [
        { type: I18n }
    ]; };
    TableToolbar.propDecorators = {
        model: [{ type: Input }],
        batchText: [{ type: Input }],
        ariaLabel: [{ type: Input }],
        cancelText: [{ type: Input }],
        size: [{ type: Input }],
        cancel: [{ type: Output }]
    };
    return TableToolbar;
}());
export { TableToolbar };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFibGUtdG9vbGJhci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9jYXJib24tY29tcG9uZW50cy1hbmd1bGFyL3RhYmxlLyIsInNvdXJjZXMiOlsidG9vbGJhci90YWJsZS10b29sYmFyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDbEQsT0FBTyxFQUNOLFNBQVMsRUFDVCxZQUFZLEVBQ1osS0FBSyxFQUNMLE1BQU0sRUFDTixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsSUFBSSxFQUFlLE1BQU0sZ0NBQWdDLENBQUM7QUFHbkU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FrQ0c7QUFDSDtJQXVFQyxzQkFBc0IsSUFBVTtRQUFWLFNBQUksR0FBSixJQUFJLENBQU07UUFkdkIsU0FBSSxHQUFpQixJQUFJLENBQUM7UUFNekIsV0FBTSxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFFdEMsbUJBQWMsR0FBZ0IsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsMEJBQTBCLENBQUMsQ0FBQztRQUNuRixnQkFBVyxHQUFnQixJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1FBQzVFLHFCQUFnQixHQUFnQixJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO1FBQ3JGLHFCQUFnQixHQUFnQixJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFDO1FBQzVGLHVCQUFrQixHQUFnQixJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxtQ0FBbUMsQ0FBQyxDQUFDO0lBRTdELENBQUM7SUE3QnBDLHNCQUFhLG1DQUFTO2FBQXRCLFVBQXdCLEtBQW9EO1lBQzNFLElBQUksT0FBTyxLQUFLLEtBQUssUUFBUSxFQUFFO2dCQUM5QixJQUFJLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFDN0MsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7YUFDakQ7aUJBQU07Z0JBQ04sa0NBQWtDO2dCQUNsQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO2FBQ3RDO1FBQ0YsQ0FBQzs7O09BQUE7SUFDRCxzQkFBYSxtQ0FBUzthQUF0QixVQUF3QixLQUE2QjtZQUNwRCxJQUFJLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDaEQsQ0FBQzs7O09BQUE7SUFDRCxzQkFBYSxvQ0FBVTthQUt2QjtZQUNDLE9BQU8sRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFlLEVBQUUsQ0FBQztRQUNyRCxDQUFDO2FBUEQsVUFBd0IsS0FBeUI7WUFDaEQsSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3pDLENBQUM7OztPQUFBO0lBaUJELHNCQUFJLCtCQUFLO2FBQVQ7WUFDQyxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsZUFBZSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLFVBQUMsUUFBUSxFQUFFLE9BQU8sSUFBSyxPQUFBLFFBQVEsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBNUIsQ0FBNEIsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3BJLENBQUM7OztPQUFBO0lBQ0Qsc0JBQUksa0NBQVE7YUFBWjtZQUNDLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxlQUFlLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsVUFBQSxJQUFJLElBQUksT0FBQSxJQUFJLEVBQUosQ0FBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztRQUM1RixDQUFDOzs7T0FBQTtJQUVELCtCQUFRLEdBQVI7UUFDQyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM1QixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ3BCLENBQUM7O2dCQW5GRCxTQUFTLFNBQUM7b0JBQ1YsUUFBUSxFQUFFLG1CQUFtQjtvQkFDN0IsUUFBUSxFQUFFLG95Q0FtQ1Q7aUJBQ0Q7Ozs7Z0JBNUVRLElBQUk7Ozt3QkE4RVgsS0FBSzs0QkFFTCxLQUFLOzRCQVNMLEtBQUs7NkJBR0wsS0FBSzt1QkFHTCxLQUFLO3lCQU1MLE1BQU07O0lBcUJSLG1CQUFDO0NBQUEsQUFwRkQsSUFvRkM7U0E3Q1ksWUFBWSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRhYmxlTW9kZWwgfSBmcm9tIFwiLi4vdGFibGUtbW9kZWwuY2xhc3NcIjtcbmltcG9ydCB7XG5cdENvbXBvbmVudCxcblx0RXZlbnRFbWl0dGVyLFxuXHRJbnB1dCxcblx0T3V0cHV0XG59IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQgeyBJMThuLCBPdmVycmlkYWJsZSB9IGZyb20gXCJjYXJib24tY29tcG9uZW50cy1hbmd1bGFyL2kxOG5cIjtcbmltcG9ydCB7IFRhYmxlUm93U2l6ZSB9IGZyb20gXCIuLi90YWJsZS50eXBlc1wiO1xuXG4vKipcbiAqIFRoZSB0YWJsZSB0b29sYmFyIGlzIHJlc2VydmVkIGZvciBnbG9iYWwgdGFibGUgYWN0aW9ucyBzdWNoIGFzIHRhYmxlIHNldHRpbmdzLCBjb21wbGV4IGZpbHRlciwgZXhwb3J0LCBvciBlZGl0aW5nIHRhYmxlIGRhdGEuXG4gKlxuICogIyMgQmFzaWMgdXNhZ2VcbiAqXG4gKiBgYGBodG1sXG4gKiA8aWJtLXRhYmxlLXRvb2xiYXIgW21vZGVsXT1cIm1vZGVsXCI+XG4gKlx0XHQ8aWJtLXRhYmxlLXRvb2xiYXItYWN0aW9ucz5cbiAqXHRcdFx0PGJ1dHRvbiBpYm1CdXR0b249XCJwcmltYXJ5XCI+XG4gKlx0XHRcdFx0RGVsZXRlXG4gKlx0XHRcdFx0PHN2ZyBpYm1JY29uPVwiZGVsZXRlXCIgc2l6ZT1cIjE2XCIgY2xhc3M9XCJieC0tYnRuX19pY29uXCI+PC9zdmc+XG4gKlx0XHRcdDwvYnV0dG9uPlxuICpcdFx0XHQ8YnV0dG9uIGlibUJ1dHRvbj1cInByaW1hcnlcIj5cbiAqXHRcdFx0XHRTYXZlXG4gKlx0XHRcdFx0PHN2ZyBpYm1JY29uPVwic2F2ZVwiIHNpemU9XCIxNlwiIGNsYXNzPVwiYngtLWJ0bl9faWNvblwiPjwvc3ZnPlxuICpcdFx0XHQ8L2J1dHRvbj5cbiAqXHRcdFx0PGJ1dHRvbiBpYm1CdXR0b249XCJwcmltYXJ5XCI+XG4gKlx0XHRcdFx0RG93bmxvYWRcbiAqXHRcdFx0XHQ8c3ZnIGlibUljb249XCJkb3dubG9hZFwiIHNpemU9XCIxNlwiIGNsYXNzPVwiYngtLWJ0bl9faWNvblwiPjwvc3ZnPlxuICpcdFx0XHQ8L2J1dHRvbj5cbiAqXHRcdDwvaWJtLXRhYmxlLXRvb2xiYXItYWN0aW9ucz5cbiAqXHRcdFx0PGlibS10YWJsZS10b29sYmFyLWNvbnRlbnQ+XG4gKlx0XHRcdDxpYm0tdGFibGUtdG9vbGJhci1zZWFyY2ggW2V4cGFuZGFibGVdPVwidHJ1ZVwiPjwvaWJtLXRhYmxlLXRvb2xiYXItc2VhcmNoPlxuICpcdFx0XHQ8YnV0dG9uIGlibUJ1dHRvbj1cInRvb2xiYXItYWN0aW9uXCI+XG4gKlx0XHRcdFx0PHN2ZyBpYm1JY29uPVwic2V0dGluZ3NcIiBzaXplPVwiMTZcIiBjbGFzcz1cImJ4LS10b29sYmFyLWFjdGlvbl9faWNvblwiPjwvaWJtLWljb24tc2V0dGluZ3M+XG4gKlx0XHRcdDwvYnV0dG9uPlxuICpcdFx0XHQ8YnV0dG9uIGlibUJ1dHRvbj1cInByaW1hcnlcIiBzaXplPVwic21cIj5cbiAqXHRcdFx0XHRQcmltYXJ5IEJ1dHRvblxuICpcdFx0XHRcdDxzdmcgaWJtSWNvbj1cImFkZFwiIHNpemU9XCIyMFwiIGNsYXNzPVwiYngtLWJ0bl9faWNvblwiPjwvc3ZnPlxuICpcdFx0XHQ8L2J1dHRvbj5cbiAqXHRcdDwvaWJtLXRhYmxlLXRvb2xiYXItY29udGVudD5cbiAqXHQ8L2libS10YWJsZS10b29sYmFyPlxuICogYGBgXG4gKlxuICovXG5AQ29tcG9uZW50KHtcblx0c2VsZWN0b3I6IFwiaWJtLXRhYmxlLXRvb2xiYXJcIixcblx0dGVtcGxhdGU6IGBcblx0PHNlY3Rpb25cblx0XHRjbGFzcz1cImJ4LS10YWJsZS10b29sYmFyXCJcblx0XHRbbmdDbGFzc109XCJ7J2J4LS10YWJsZS10b29sYmFyLS1zbWFsbCcgOiBzaXplID09PSAnc20nfVwiPlxuXHRcdDxkaXZcblx0XHRcdCpuZ0lmPVwibW9kZWxcIlxuXHRcdFx0Y2xhc3M9XCJieC0tYmF0Y2gtYWN0aW9uc1wiXG5cdFx0XHRbbmdDbGFzc109XCJ7XG5cdFx0XHRcdCdieC0tYmF0Y2gtYWN0aW9ucy0tYWN0aXZlJzogc2VsZWN0ZWRcblx0XHRcdH1cIlxuXHRcdFx0W2F0dHIuYXJpYS1sYWJlbF09XCJhY3Rpb25CYXJMYWJlbC5zdWJqZWN0IHwgYXN5bmNcIj5cblx0XHRcdDxkaXYgY2xhc3M9XCJieC0tYWN0aW9uLWxpc3RcIj5cblx0XHRcdFx0PG5nLWNvbnRlbnQgc2VsZWN0PVwiaWJtLXRhYmxlLXRvb2xiYXItYWN0aW9uc1wiPjwvbmctY29udGVudD5cblx0XHRcdFx0PGJ1dHRvblxuXHRcdFx0XHRcdGlibUJ1dHRvbj1cInByaW1hcnlcIlxuXHRcdFx0XHRcdGNsYXNzPVwiYngtLWJhdGNoLXN1bW1hcnlfX2NhbmNlbFwiXG5cdFx0XHRcdFx0W3RhYmluZGV4XT1cInNlbGVjdGVkID8gMCA6IC0xXCJcblx0XHRcdFx0XHQoY2xpY2spPVwib25DYW5jZWwoKVwiPlxuXHRcdFx0XHRcdHt7X2NhbmNlbFRleHQuc3ViamVjdCB8IGFzeW5jfX1cblx0XHRcdFx0PC9idXR0b24+XG5cdFx0XHQ8L2Rpdj5cblx0XHRcdDxkaXYgY2xhc3M9XCJieC0tYmF0Y2gtc3VtbWFyeVwiPlxuXHRcdFx0XHQ8cCBjbGFzcz1cImJ4LS1iYXRjaC1zdW1tYXJ5X19wYXJhXCIgKm5nSWY9XCJjb3VudCBhcyBuXCI+XG5cdFx0XHRcdFx0PG5nLWNvbnRhaW5lciAqbmdJZj1cIl9iYXRjaFRleHRMZWdhY3kuc3ViamVjdCB8IGFzeW5jIGFzIGxlZ2FjeVRleHQ7IGVsc2UgYmF0Y2hUZXh0QmxvY2tcIj5cblx0XHRcdFx0XHRcdDxzcGFuPnt7bn19PC9zcGFuPiB7e2xlZ2FjeVRleHR9fVxuXHRcdFx0XHRcdDwvbmctY29udGFpbmVyPlxuXHRcdFx0XHRcdDxuZy10ZW1wbGF0ZSAjYmF0Y2hUZXh0QmxvY2s+XG5cdFx0XHRcdFx0XHQ8c3BhbiAqbmdJZj1cIm4gPT09IDFcIj57e19iYXRjaFRleHRTaW5nbGUuc3ViamVjdCB8IGFzeW5jfX08L3NwYW4+XG5cdFx0XHRcdFx0XHQ8c3BhbiAqbmdJZj1cIm4gIT09IDFcIj57e19iYXRjaFRleHRNdWx0aXBsZS5zdWJqZWN0IHwgaTE4blJlcGxhY2U6IHtjb3VudDogbn0gfCBhc3luY319PC9zcGFuPlxuXHRcdFx0XHRcdDwvbmctdGVtcGxhdGU+XG5cdFx0XHRcdDwvcD5cblx0XHRcdDwvZGl2PlxuXHRcdDwvZGl2PlxuXHRcdDxuZy1jb250ZW50PjwvbmctY29udGVudD5cblx0PC9zZWN0aW9uPlxuXHRgXG59KVxuZXhwb3J0IGNsYXNzIFRhYmxlVG9vbGJhciB7XG5cdEBJbnB1dCgpIG1vZGVsOiBUYWJsZU1vZGVsO1xuXG5cdEBJbnB1dCgpIHNldCBiYXRjaFRleHQgKHZhbHVlOiBzdHJpbmcgfCB7IFNJTkdMRTogc3RyaW5nLCBNVUxUSVBMRTogc3RyaW5nIH0pIHtcblx0XHRpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSB7XG5cdFx0XHR0aGlzLl9iYXRjaFRleHRTaW5nbGUub3ZlcnJpZGUodmFsdWUuU0lOR0xFKTtcblx0XHRcdHRoaXMuX2JhdGNoVGV4dE11bHRpcGxlLm92ZXJyaWRlKHZhbHVlLk1VTFRJUExFKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gRm9yIGNvbXBhdGliaWxpdHkgd2l0aCBvbGQgY29kZVxuXHRcdFx0dGhpcy5fYmF0Y2hUZXh0TGVnYWN5Lm92ZXJyaWRlKHZhbHVlKTtcblx0XHR9XG5cdH1cblx0QElucHV0KCkgc2V0IGFyaWFMYWJlbCAodmFsdWU6IHsgQUNUSU9OX0JBUjogc3RyaW5nIH0pIHtcblx0XHR0aGlzLmFjdGlvbkJhckxhYmVsLm92ZXJyaWRlKHZhbHVlLkFDVElPTl9CQVIpO1xuXHR9XG5cdEBJbnB1dCgpIHNldCBjYW5jZWxUZXh0KHZhbHVlOiB7IENBTkNFTDogc3RyaW5nIH0pIHtcblx0XHR0aGlzLl9jYW5jZWxUZXh0Lm92ZXJyaWRlKHZhbHVlLkNBTkNFTCk7XG5cdH1cblx0QElucHV0KCkgc2l6ZTogVGFibGVSb3dTaXplID0gXCJtZFwiO1xuXG5cdGdldCBjYW5jZWxUZXh0KCk6IHsgQ0FOQ0VMOiBzdHJpbmcgfSB7XG5cdFx0cmV0dXJuIHsgQ0FOQ0VMOiB0aGlzLl9jYW5jZWxUZXh0LnZhbHVlIGFzIHN0cmluZyB9O1xuXHR9XG5cblx0QE91dHB1dCgpIGNhbmNlbCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuXHRhY3Rpb25CYXJMYWJlbDogT3ZlcnJpZGFibGUgPSB0aGlzLmkxOG4uZ2V0T3ZlcnJpZGFibGUoXCJUQUJMRV9UT09MQkFSLkFDVElPTl9CQVJcIik7XG5cdF9jYW5jZWxUZXh0OiBPdmVycmlkYWJsZSA9IHRoaXMuaTE4bi5nZXRPdmVycmlkYWJsZShcIlRBQkxFX1RPT0xCQVIuQ0FOQ0VMXCIpO1xuXHRfYmF0Y2hUZXh0TGVnYWN5OiBPdmVycmlkYWJsZSA9IHRoaXMuaTE4bi5nZXRPdmVycmlkYWJsZShcIlRBQkxFX1RPT0xCQVIuQkFUQ0hfVEVYVFwiKTtcblx0X2JhdGNoVGV4dFNpbmdsZTogT3ZlcnJpZGFibGUgPSB0aGlzLmkxOG4uZ2V0T3ZlcnJpZGFibGUoXCJUQUJMRV9UT09MQkFSLkJBVENIX1RFWFRfU0lOR0xFXCIpO1xuXHRfYmF0Y2hUZXh0TXVsdGlwbGU6IE92ZXJyaWRhYmxlID0gdGhpcy5pMThuLmdldE92ZXJyaWRhYmxlKFwiVEFCTEVfVE9PTEJBUi5CQVRDSF9URVhUX01VTFRJUExFXCIpO1xuXG5cdGNvbnN0cnVjdG9yKHByb3RlY3RlZCBpMThuOiBJMThuKSB7fVxuXG5cdGdldCBjb3VudCgpIHtcblx0XHRyZXR1cm4gdGhpcy5tb2RlbC50b3RhbERhdGFMZW5ndGggPiAwID8gdGhpcy5tb2RlbC5yb3dzU2VsZWN0ZWQucmVkdWNlKChwcmV2aW91cywgY3VycmVudCkgPT4gcHJldmlvdXMgKyAoY3VycmVudCA/IDEgOiAwKSwgMCkgOiAwO1xuXHR9XG5cdGdldCBzZWxlY3RlZCgpIHtcblx0XHRyZXR1cm4gdGhpcy5tb2RlbC50b3RhbERhdGFMZW5ndGggPiAwID8gdGhpcy5tb2RlbC5yb3dzU2VsZWN0ZWQuc29tZShpdGVtID0+IGl0ZW0pIDogZmFsc2U7XG5cdH1cblxuXHRvbkNhbmNlbCgpIHtcblx0XHR0aGlzLm1vZGVsLnNlbGVjdEFsbChmYWxzZSk7XG5cdFx0dGhpcy5jYW5jZWwuZW1pdCgpO1xuXHR9XG59XG4iXX0=
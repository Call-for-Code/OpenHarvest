/**
 *
 * carbon-angular v0.0.0 | table-row.component.js
 *
 * Copyright 2014, 2021 IBM
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0

 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */


import { Component, Input, Output, EventEmitter, HostBinding, HostListener } from "@angular/core";
import { TableModel } from "../table-model.class";
import { I18n } from "carbon-components-angular/i18n";
var TableRowComponent = /** @class */ (function () {
    function TableRowComponent(i18n) {
        this.i18n = i18n;
        this.expanded = false;
        this.expandable = false;
        this.selected = false;
        /**
         * Size of the table rows.
         */
        this.size = "md";
        /**
         * Controls whether to enable multiple or single row selection.
         */
        this.enableSingleSelect = false;
        /**
         * Controls whether to show the selection checkboxes column or not.
         */
        this.showSelectionColumn = true;
        /**
         * Shows or hide the checkbox in the selection column when `showSelectionColumn`
         * is set to true
         */
        this.showSelectionColumnCheckbox = true;
        this.skeleton = false;
        /**
         * Emits when the row is selected.
         */
        this.selectRow = new EventEmitter();
        /**
         * Emits when the row is deselected.
         */
        this.deselectRow = new EventEmitter();
        /**
         * Emits when the row is expanded
         */
        this.expandRow = new EventEmitter();
        /**
         * Emits when a row is clicked regardless of `enableSingleSelect` or `showSelectionColumn`.
         * Should only get emitted when a row item is selected excluding expand buttons,
         * checkboxes, or radios.
         */
        this.rowClick = new EventEmitter();
        this._checkboxLabel = this.i18n.getOverridable("TABLE.CHECKBOX_ROW");
        this._expandButtonAriaLabel = this.i18n.getOverridable("TABLE.EXPAND_BUTTON");
    }
    Object.defineProperty(TableRowComponent.prototype, "expandButtonAriaLabel", {
        get: function () {
            return this._expandButtonAriaLabel.value;
        },
        set: function (value) {
            this._expandButtonAriaLabel.override(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TableRowComponent.prototype, "checkboxLabel", {
        get: function () {
            return this._checkboxLabel.value;
        },
        set: function (value) {
            this._checkboxLabel.override(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TableRowComponent.prototype, "selectedClass", {
        get: function () {
            return this.selected;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TableRowComponent.prototype, "parentRowClass", {
        get: function () {
            return this.expandable;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TableRowComponent.prototype, "expandableRowClass", {
        get: function () {
            return this.expanded;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TableRowComponent.prototype, "selectableClass", {
        get: function () {
            return false; // this.singleSelect
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TableRowComponent.prototype, "isParentRow", {
        get: function () {
            return this.expandable ? true : null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TableRowComponent.prototype, "isAccessible", {
        get: function () {
            return this.enableSingleSelect && !this.showSelectionColumn ? 0 : null;
        },
        enumerable: true,
        configurable: true
    });
    TableRowComponent.prototype.onHostClick = function () {
        if (this.enableSingleSelect && !this.showSelectionColumn) {
            this.onSelectionChange();
        }
    };
    TableRowComponent.prototype.onRowClick = function () {
        this.rowClick.emit();
    };
    TableRowComponent.prototype.onSelectionChange = function () {
        if (this.selected) {
            this.deselectRow.emit();
        }
        else {
            this.selectRow.emit();
        }
    };
    TableRowComponent.prototype.getCheckboxLabel = function () {
        return this._checkboxLabel.subject;
    };
    TableRowComponent.prototype.getExpandButtonAriaLabel = function () {
        return this._expandButtonAriaLabel.subject;
    };
    TableRowComponent.decorators = [
        { type: Component, args: [{
                    // tslint:disable-next-line: component-selector
                    selector: "[ibmTableRow]",
                    template: "\n\t\t<ng-container *ngIf=\"model\">\n\t\t\t<td\n\t\t\t\t*ngIf=\"model.hasExpandableRows()\"\n\t\t\t\tibmTableExpandButton\n\t\t\t\tclass=\"bx--table-expand-v2\"\n\t\t\t\t[expanded]=\"expanded\"\n\t\t\t\t[expandable]=\"expandable\"\n\t\t\t\t[skeleton]=\"skeleton\"\n\t\t\t\t[ariaLabel]=\"getExpandButtonAriaLabel()\"\n\t\t\t\t[headers]=\"model.getHeaderId('expand')\"\n\t\t\t\t(expandRow)=\"expandRow.emit()\">\n\t\t\t</td>\n\t\t\t<ng-container *ngIf=\"!skeleton && showSelectionColumn && !enableSingleSelect\">\n\t\t\t\t<td\n\t\t\t\t\t*ngIf=\"!showSelectionColumnCheckbox; else tableCheckboxTemplate\">\n\t\t\t\t</td>\n\t\t\t\t<ng-template #tableCheckboxTemplate>\n\t\t\t\t\t<td\n\t\t\t\t\t\tibmTableCheckbox\n\t\t\t\t\t\tclass=\"bx--table-column-checkbox\"\n\t\t\t\t\t\t[size]=\"size\"\n\t\t\t\t\t\t[selected]=\"selected\"\n\t\t\t\t\t\t[label]=\"getCheckboxLabel()\"\n\t\t\t\t\t\t[row]=\"row\"\n\t\t\t\t\t\t[skeleton]=\"skeleton\"\n\t\t\t\t\t\t[headers]=\"model.getHeaderId('select')\"\n\t\t\t\t\t\t(change)=\"onSelectionChange()\">\n\t\t\t\t\t</td>\n\t\t\t\t</ng-template>\n\t\t\t</ng-container>\n\t\t\t<td\n\t\t\t\t*ngIf=\"!skeleton && showSelectionColumn && enableSingleSelect\"\n\t\t\t\tibmTableRadio\n\t\t\t\t[selected]=\"selected\"\n\t\t\t\t[label]=\"getCheckboxLabel()\"\n\t\t\t\t[row]=\"row\"\n\t\t\t\t[skeleton]=\"skeleton\"\n\t\t\t\t[headers]=\"model.getHeaderId('select')\"\n\t\t\t\t(change)=\"onSelectionChange()\">\n\t\t\t</td>\n\t\t\t<ng-container *ngFor=\"let item of row; let j = index\">\n\t\t\t\t<td\n\t\t\t\t\t*ngIf=\"item && model.getHeader(j) && model.getHeader(j).visible\"\n\t\t\t\t\tibmTableData\n\t\t\t\t\t[headers]=\"model.getHeaderId(j, item.colSpan)\"\n\t\t\t\t\t[item]=\"item\"\n\t\t\t\t\t[title]=\"item.title\"\n\t\t\t\t\t[class]=\"model.getHeader(j).className\"\n\t\t\t\t\t[ngStyle]=\"model.getHeader(j).style\"\n\t\t\t\t\t[skeleton]=\"skeleton\"\n\t\t\t\t\t[attr.colspan]=\"item.colSpan\"\n\t\t\t\t\t[attr.rowspan]=\"item.rowSpan\"\n\t\t\t\t\t(click)=\"onRowClick()\"\n\t\t\t\t\t(keydown.enter)=\"onRowClick()\">\n\t\t\t\t</td>\n\t\t\t\t<td\n\t\t\t\t\t*ngIf=\"item && model.getHeader(j) == null\"\n\t\t\t\t\tibmTableData\n\t\t\t\t\t[headers]=\"model.getHeaderId(j, item.colSpan)\"\n\t\t\t\t\t[item]=\"item\"\n\t\t\t\t\t[title]=\"item.title\"\n\t\t\t\t\t[skeleton]=\"skeleton\"\n\t\t\t\t\t[attr.colspan]=\"item.colSpan\"\n\t\t\t\t\t[attr.rowspan]=\"item.rowSpan\"\n\t\t\t\t\t(click)=\"onRowClick()\"\n\t\t\t\t\t(keydown.enter)=\"onRowClick()\">\n\t\t\t\t</td>\n\t\t\t</ng-container>\n\t\t</ng-container>\n\t\t<ng-content></ng-content>\n\t"
                }] }
    ];
    /** @nocollapse */
    TableRowComponent.ctorParameters = function () { return [
        { type: I18n }
    ]; };
    TableRowComponent.propDecorators = {
        model: [{ type: Input }],
        row: [{ type: Input }],
        expanded: [{ type: Input }],
        expandable: [{ type: Input }],
        selected: [{ type: Input }],
        size: [{ type: Input }],
        enableSingleSelect: [{ type: Input }],
        expandButtonAriaLabel: [{ type: Input }],
        checkboxLabel: [{ type: Input }],
        showSelectionColumn: [{ type: Input }],
        showSelectionColumnCheckbox: [{ type: Input }],
        selectionLabelColumn: [{ type: Input }],
        skeleton: [{ type: Input }],
        selectRow: [{ type: Output }],
        deselectRow: [{ type: Output }],
        expandRow: [{ type: Output }],
        rowClick: [{ type: Output }],
        selectedClass: [{ type: HostBinding, args: ["class.bx--data-table--selected",] }],
        parentRowClass: [{ type: HostBinding, args: ["class.bx--parent-row",] }],
        expandableRowClass: [{ type: HostBinding, args: ["class.bx--expandable-row",] }],
        selectableClass: [{ type: HostBinding, args: ["class.tbody_row--selectable",] }],
        isParentRow: [{ type: HostBinding, args: ["attr.data-parent-row",] }],
        isAccessible: [{ type: HostBinding, args: ["attr.tabindex",] }],
        onHostClick: [{ type: HostListener, args: ["click",] }]
    };
    return TableRowComponent;
}());
export { TableRowComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFibGUtcm93LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2NhcmJvbi1jb21wb25lbnRzLWFuZ3VsYXIvdGFibGUvIiwic291cmNlcyI6WyJib2R5L3RhYmxlLXJvdy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNOLFNBQVMsRUFDVCxLQUFLLEVBQ0wsTUFBTSxFQUNOLFlBQVksRUFDWixXQUFXLEVBQ1gsWUFBWSxFQUNaLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUNsRCxPQUFPLEVBQUUsSUFBSSxFQUFlLE1BQU0sZ0NBQWdDLENBQUM7QUFLbkU7SUFnTUMsMkJBQXNCLElBQVU7UUFBVixTQUFJLEdBQUosSUFBSSxDQUFNO1FBNUd2QixhQUFRLEdBQUcsS0FBSyxDQUFDO1FBRWpCLGVBQVUsR0FBRyxLQUFLLENBQUM7UUFFbkIsYUFBUSxHQUFHLEtBQUssQ0FBQztRQUUxQjs7V0FFRztRQUNNLFNBQUksR0FBaUIsSUFBSSxDQUFDO1FBRW5DOztXQUVHO1FBQ00sdUJBQWtCLEdBQUcsS0FBSyxDQUFDO1FBb0JwQzs7V0FFRztRQUNNLHdCQUFtQixHQUFHLElBQUksQ0FBQztRQUVwQzs7O1dBR0c7UUFDTSxnQ0FBMkIsR0FBRyxJQUFJLENBQUM7UUFjbkMsYUFBUSxHQUFHLEtBQUssQ0FBQztRQUUxQjs7V0FFRztRQUNPLGNBQVMsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBRXpDOztXQUVHO1FBQ08sZ0JBQVcsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBRTNDOztXQUVHO1FBQ08sY0FBUyxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFFekM7Ozs7V0FJRztRQUNPLGFBQVEsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBMEI5QixtQkFBYyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLG9CQUFvQixDQUFD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O2tDQUl0QyxXQUFXLFNBQUMsNkJBQTZCOzhCQUl6QyxXQUFXLFNBQUMsc0JBQXNCOytCQUlsQyxXQUFXLFNBQUMsZUFBZTs4QkFTM0IsWUFBWSxTQUFDLE9BQU87O0lBMEJ0Qix3QkFBQztDQUFBLEFBNU5ELElBNE5DO1NBaEpZLGlCQUFpQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG5cdENvbXBvbmVudCxcblx0SW5wdXQsXG5cdE91dHB1dCxcblx0RXZlbnRFbWl0dGVyLFxuXHRIb3N0QmluZGluZyxcblx0SG9zdExpc3RlbmVyXG59IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQgeyBUYWJsZU1vZGVsIH0gZnJvbSBcIi4uL3RhYmxlLW1vZGVsLmNsYXNzXCI7XG5pbXBvcnQgeyBJMThuLCBPdmVycmlkYWJsZSB9IGZyb20gXCJjYXJib24tY29tcG9uZW50cy1hbmd1bGFyL2kxOG5cIjtcbmltcG9ydCB7IFRhYmxlSXRlbSB9IGZyb20gXCIuLi90YWJsZS1pdGVtLmNsYXNzXCI7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSBcInJ4anNcIjtcbmltcG9ydCB7IFRhYmxlUm93U2l6ZSB9IGZyb20gXCIuLi90YWJsZS50eXBlc1wiO1xuXG5AQ29tcG9uZW50KHtcblx0Ly8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBjb21wb25lbnQtc2VsZWN0b3Jcblx0c2VsZWN0b3I6IFwiW2libVRhYmxlUm93XVwiLFxuXHR0ZW1wbGF0ZTogYFxuXHRcdDxuZy1jb250YWluZXIgKm5nSWY9XCJtb2RlbFwiPlxuXHRcdFx0PHRkXG5cdFx0XHRcdCpuZ0lmPVwibW9kZWwuaGFzRXhwYW5kYWJsZVJvd3MoKVwiXG5cdFx0XHRcdGlibVRhYmxlRXhwYW5kQnV0dG9uXG5cdFx0XHRcdGNsYXNzPVwiYngtLXRhYmxlLWV4cGFuZC12MlwiXG5cdFx0XHRcdFtleHBhbmRlZF09XCJleHBhbmRlZFwiXG5cdFx0XHRcdFtleHBhbmRhYmxlXT1cImV4cGFuZGFibGVcIlxuXHRcdFx0XHRbc2tlbGV0b25dPVwic2tlbGV0b25cIlxuXHRcdFx0XHRbYXJpYUxhYmVsXT1cImdldEV4cGFuZEJ1dHRvbkFyaWFMYWJlbCgpXCJcblx0XHRcdFx0W2hlYWRlcnNdPVwibW9kZWwuZ2V0SGVhZGVySWQoJ2V4cGFuZCcpXCJcblx0XHRcdFx0KGV4cGFuZFJvdyk9XCJleHBhbmRSb3cuZW1pdCgpXCI+XG5cdFx0XHQ8L3RkPlxuXHRcdFx0PG5nLWNvbnRhaW5lciAqbmdJZj1cIiFza2VsZXRvbiAmJiBzaG93U2VsZWN0aW9uQ29sdW1uICYmICFlbmFibGVTaW5nbGVTZWxlY3RcIj5cblx0XHRcdFx0PHRkXG5cdFx0XHRcdFx0Km5nSWY9XCIhc2hvd1NlbGVjdGlvbkNvbHVtbkNoZWNrYm94OyBlbHNlIHRhYmxlQ2hlY2tib3hUZW1wbGF0ZVwiPlxuXHRcdFx0XHQ8L3RkPlxuXHRcdFx0XHQ8bmctdGVtcGxhdGUgI3RhYmxlQ2hlY2tib3hUZW1wbGF0ZT5cblx0XHRcdFx0XHQ8dGRcblx0XHRcdFx0XHRcdGlibVRhYmxlQ2hlY2tib3hcblx0XHRcdFx0XHRcdGNsYXNzPVwiYngtLXRhYmxlLWNvbHVtbi1jaGVja2JveFwiXG5cdFx0XHRcdFx0XHRbc2l6ZV09XCJzaXplXCJcblx0XHRcdFx0XHRcdFtzZWxlY3RlZF09XCJzZWxlY3RlZFwiXG5cdFx0XHRcdFx0XHRbbGFiZWxdPVwiZ2V0Q2hlY2tib3hMYWJlbCgpXCJcblx0XHRcdFx0XHRcdFtyb3ddPVwicm93XCJcblx0XHRcdFx0XHRcdFtza2VsZXRvbl09XCJza2VsZXRvblwiXG5cdFx0XHRcdFx0XHRbaGVhZGVyc109XCJtb2RlbC5nZXRIZWFkZXJJZCgnc2VsZWN0JylcIlxuXHRcdFx0XHRcdFx0KGNoYW5nZSk9XCJvblNlbGVjdGlvbkNoYW5nZSgpXCI+XG5cdFx0XHRcdFx0PC90ZD5cblx0XHRcdFx0PC9uZy10ZW1wbGF0ZT5cblx0XHRcdDwvbmctY29udGFpbmVyPlxuXHRcdFx0PHRkXG5cdFx0XHRcdCpuZ0lmPVwiIXNrZWxldG9uICYmIHNob3dTZWxlY3Rpb25Db2x1bW4gJiYgZW5hYmxlU2luZ2xlU2VsZWN0XCJcblx0XHRcdFx0aWJtVGFibGVSYWRpb1xuXHRcdFx0XHRbc2VsZWN0ZWRdPVwic2VsZWN0ZWRcIlxuXHRcdFx0XHRbbGFiZWxdPVwiZ2V0Q2hlY2tib3hMYWJlbCgpXCJcblx0XHRcdFx0W3Jvd109XCJyb3dcIlxuXHRcdFx0XHRbc2tlbGV0b25dPVwic2tlbGV0b25cIlxuXHRcdFx0XHRbaGVhZGVyc109XCJtb2RlbC5nZXRIZWFkZXJJZCgnc2VsZWN0JylcIlxuXHRcdFx0XHQoY2hhbmdlKT1cIm9uU2VsZWN0aW9uQ2hhbmdlKClcIj5cblx0XHRcdDwvdGQ+XG5cdFx0XHQ8bmctY29udGFpbmVyICpuZ0Zvcj1cImxldCBpdGVtIG9mIHJvdzsgbGV0IGogPSBpbmRleFwiPlxuXHRcdFx0XHQ8dGRcblx0XHRcdFx0XHQqbmdJZj1cIml0ZW0gJiYgbW9kZWwuZ2V0SGVhZGVyKGopICYmIG1vZGVsLmdldEhlYWRlcihqKS52aXNpYmxlXCJcblx0XHRcdFx0XHRpYm1UYWJsZURhdGFcblx0XHRcdFx0XHRbaGVhZGVyc109XCJtb2RlbC5nZXRIZWFkZXJJZChqLCBpdGVtLmNvbFNwYW4pXCJcblx0XHRcdFx0XHRbaXRlbV09XCJpdGVtXCJcblx0XHRcdFx0XHRbdGl0bGVdPVwiaXRlbS50aXRsZVwiXG5cdFx0XHRcdFx0W2NsYXNzXT1cIm1vZGVsLmdldEhlYWRlcihqKS5jbGFzc05hbWVcIlxuXHRcdFx0XHRcdFtuZ1N0eWxlXT1cIm1vZGVsLmdldEhlYWRlcihqKS5zdHlsZVwiXG5cdFx0XHRcdFx0W3NrZWxldG9uXT1cInNrZWxldG9uXCJcblx0XHRcdFx0XHRbYXR0ci5jb2xzcGFuXT1cIml0ZW0uY29sU3BhblwiXG5cdFx0XHRcdFx0W2F0dHIucm93c3Bhbl09XCJpdGVtLnJvd1NwYW5cIlxuXHRcdFx0XHRcdChjbGljayk9XCJvblJvd0NsaWNrKClcIlxuXHRcdFx0XHRcdChrZXlkb3duLmVudGVyKT1cIm9uUm93Q2xpY2soKVwiPlxuXHRcdFx0XHQ8L3RkPlxuXHRcdFx0XHQ8dGRcblx0XHRcdFx0XHQqbmdJZj1cIml0ZW0gJiYgbW9kZWwuZ2V0SGVhZGVyKGopID09IG51bGxcIlxuXHRcdFx0XHRcdGlibVRhYmxlRGF0YVxuXHRcdFx0XHRcdFtoZWFkZXJzXT1cIm1vZGVsLmdldEhlYWRlcklkKGosIGl0ZW0uY29sU3BhbilcIlxuXHRcdFx0XHRcdFtpdGVtXT1cIml0ZW1cIlxuXHRcdFx0XHRcdFt0aXRsZV09XCJpdGVtLnRpdGxlXCJcblx0XHRcdFx0XHRbc2tlbGV0b25dPVwic2tlbGV0b25cIlxuXHRcdFx0XHRcdFthdHRyLmNvbHNwYW5dPVwiaXRlbS5jb2xTcGFuXCJcblx0XHRcdFx0XHRbYXR0ci5yb3dzcGFuXT1cIml0ZW0ucm93U3BhblwiXG5cdFx0XHRcdFx0KGNsaWNrKT1cIm9uUm93Q2xpY2soKVwiXG5cdFx0XHRcdFx0KGtleWRvd24uZW50ZXIpPVwib25Sb3dDbGljaygpXCI+XG5cdFx0XHRcdDwvdGQ+XG5cdFx0XHQ8L25nLWNvbnRhaW5lcj5cblx0XHQ8L25nLWNvbnRhaW5lcj5cblx0XHQ8bmctY29udGVudD48L25nLWNvbnRlbnQ+XG5cdGBcbn0pXG5leHBvcnQgY2xhc3MgVGFibGVSb3dDb21wb25lbnQge1xuXHQvKipcblx0ICogYFRhYmxlTW9kZWxgIHdpdGggZGF0YSB0aGUgdGFibGUgaXMgdG8gZGlzcGxheS5cblx0ICovXG5cdEBJbnB1dCgpIG1vZGVsOiBUYWJsZU1vZGVsO1xuXG5cdEBJbnB1dCgpIHJvdzogVGFibGVJdGVtW107XG5cblx0QElucHV0KCkgZXhwYW5kZWQgPSBmYWxzZTtcblxuXHRASW5wdXQoKSBleHBhbmRhYmxlID0gZmFsc2U7XG5cblx0QElucHV0KCkgc2VsZWN0ZWQgPSBmYWxzZTtcblxuXHQvKipcblx0ICogU2l6ZSBvZiB0aGUgdGFibGUgcm93cy5cblx0ICovXG5cdEBJbnB1dCgpIHNpemU6IFRhYmxlUm93U2l6ZSA9IFwibWRcIjtcblxuXHQvKipcblx0ICogQ29udHJvbHMgd2hldGhlciB0byBlbmFibGUgbXVsdGlwbGUgb3Igc2luZ2xlIHJvdyBzZWxlY3Rpb24uXG5cdCAqL1xuXHRASW5wdXQoKSBlbmFibGVTaW5nbGVTZWxlY3QgPSBmYWxzZTtcblxuXHRASW5wdXQoKVxuXHRzZXQgZXhwYW5kQnV0dG9uQXJpYUxhYmVsKHZhbHVlOiBzdHJpbmcgfCBPYnNlcnZhYmxlPHN0cmluZz4pIHtcblx0XHR0aGlzLl9leHBhbmRCdXR0b25BcmlhTGFiZWwub3ZlcnJpZGUodmFsdWUpO1xuXHR9XG5cblx0Z2V0IGV4cGFuZEJ1dHRvbkFyaWFMYWJlbCgpIHtcblx0XHRyZXR1cm4gdGhpcy5fZXhwYW5kQnV0dG9uQXJpYUxhYmVsLnZhbHVlO1xuXHR9XG5cblx0QElucHV0KClcblx0c2V0IGNoZWNrYm94TGFiZWwodmFsdWU6IHN0cmluZyB8IE9ic2VydmFibGU8c3RyaW5nPikge1xuXHRcdHRoaXMuX2NoZWNrYm94TGFiZWwub3ZlcnJpZGUodmFsdWUpO1xuXHR9XG5cblx0Z2V0IGNoZWNrYm94TGFiZWwoKSB7XG5cdFx0cmV0dXJuIHRoaXMuX2NoZWNrYm94TGFiZWwudmFsdWU7XG5cdH1cblxuXHQvKipcblx0ICogQ29udHJvbHMgd2hldGhlciB0byBzaG93IHRoZSBzZWxlY3Rpb24gY2hlY2tib3hlcyBjb2x1bW4gb3Igbm90LlxuXHQgKi9cblx0QElucHV0KCkgc2hvd1NlbGVjdGlvbkNvbHVtbiA9IHRydWU7XG5cblx0LyoqXG5cdCAqIFNob3dzIG9yIGhpZGUgdGhlIGNoZWNrYm94IGluIHRoZSBzZWxlY3Rpb24gY29sdW1uIHdoZW4gYHNob3dTZWxlY3Rpb25Db2x1bW5gXG5cdCAqIGlzIHNldCB0byB0cnVlXG5cdCAqL1xuXHRASW5wdXQoKSBzaG93U2VsZWN0aW9uQ29sdW1uQ2hlY2tib3ggPSB0cnVlO1xuXG5cdC8qKlxuXHQgKiBVc2VkIHRvIHBvcHVsYXRlIHRoZSByb3cgc2VsZWN0aW9uIGNoZWNrYm94IGxhYmVsIHdpdGggYSB1c2VmdWwgdmFsdWUgaWYgc2V0LlxuXHQgKlxuXHQgKiBFeGFtcGxlOlxuXHQgKiBgYGBcblx0ICogPGlibS10YWJsZSBbc2VsZWN0aW9uTGFiZWxDb2x1bW5dPVwiMFwiPjwvaWJtLXRhYmxlPlxuXHQgKiA8IS0tIHJlc3VsdHMgaW4gYXJpYS1sYWJlbD1cIlNlbGVjdCBmaXJzdCBjb2x1bW4gdmFsdWVcIlxuXHQgKiAod2hlcmUgXCJmaXJzdCBjb2x1bW4gdmFsdWVcIiBpcyB0aGUgdmFsdWUgb2YgdGhlIGZpcnN0IGNvbHVtbiBpbiB0aGUgcm93IC0tPlxuXHQgKiBgYGBcblx0ICovXG5cdEBJbnB1dCgpIHNlbGVjdGlvbkxhYmVsQ29sdW1uOiBudW1iZXI7XG5cblx0QElucHV0KCkgc2tlbGV0b24gPSBmYWxzZTtcblxuXHQvKipcblx0ICogRW1pdHMgd2hlbiB0aGUgcm93IGlzIHNlbGVjdGVkLlxuXHQgKi9cblx0QE91dHB1dCgpIHNlbGVjdFJvdyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuXHQvKipcblx0ICogRW1pdHMgd2hlbiB0aGUgcm93IGlzIGRlc2VsZWN0ZWQuXG5cdCAqL1xuXHRAT3V0cHV0KCkgZGVzZWxlY3RSb3cgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cblx0LyoqXG5cdCAqIEVtaXRzIHdoZW4gdGhlIHJvdyBpcyBleHBhbmRlZFxuXHQgKi9cblx0QE91dHB1dCgpIGV4cGFuZFJvdyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuXHQvKipcblx0ICogRW1pdHMgd2hlbiBhIHJvdyBpcyBjbGlja2VkIHJlZ2FyZGxlc3Mgb2YgYGVuYWJsZVNpbmdsZVNlbGVjdGAgb3IgYHNob3dTZWxlY3Rpb25Db2x1bW5gLlxuXHQgKiBTaG91bGQgb25seSBnZXQgZW1pdHRlZCB3aGVuIGEgcm93IGl0ZW0gaXMgc2VsZWN0ZWQgZXhjbHVkaW5nIGV4cGFuZCBidXR0b25zLFxuXHQgKiBjaGVja2JveGVzLCBvciByYWRpb3MuXG5cdCAqL1xuXHRAT3V0cHV0KCkgcm93Q2xpY2sgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cblx0QEhvc3RCaW5kaW5nKFwiY2xhc3MuYngtLWRhdGEtdGFibGUtLXNlbGVjdGVkXCIpIGdldCBzZWxlY3RlZENsYXNzKCkge1xuXHRcdHJldHVybiB0aGlzLnNlbGVjdGVkO1xuXHR9XG5cblx0QEhvc3RCaW5kaW5nKFwiY2xhc3MuYngtLXBhcmVudC1yb3dcIikgZ2V0IHBhcmVudFJvd0NsYXNzKCkge1xuXHRcdHJldHVybiB0aGlzLmV4cGFuZGFibGU7XG5cdH1cblxuXHRASG9zdEJpbmRpbmcoXCJjbGFzcy5ieC0tZXhwYW5kYWJsZS1yb3dcIikgZ2V0IGV4cGFuZGFibGVSb3dDbGFzcygpIHtcblx0XHRyZXR1cm4gdGhpcy5leHBhbmRlZDtcblx0fVxuXG5cdEBIb3N0QmluZGluZyhcImNsYXNzLnRib2R5X3Jvdy0tc2VsZWN0YWJsZVwiKSBnZXQgc2VsZWN0YWJsZUNsYXNzKCkge1xuXHRcdHJldHVybiBmYWxzZTsgLy8gdGhpcy5zaW5nbGVTZWxlY3Rcblx0fVxuXG5cdEBIb3N0QmluZGluZyhcImF0dHIuZGF0YS1wYXJlbnQtcm93XCIpIGdldCBpc1BhcmVudFJvdygpIHtcblx0XHRyZXR1cm4gdGhpcy5leHBhbmRhYmxlID8gdHJ1ZSA6IG51bGw7XG5cdH1cblxuXHRASG9zdEJpbmRpbmcoXCJhdHRyLnRhYmluZGV4XCIpIGdldCBpc0FjY2Vzc2libGUoKSB7XG5cdFx0cmV0dXJuIHRoaXMuZW5hYmxlU2luZ2xlU2VsZWN0ICYmICF0aGlzLnNob3dTZWxlY3Rpb25Db2x1bW4gPyAwIDogbnVsbDtcblx0fVxuXG5cdHByb3RlY3RlZCBfY2hlY2tib3hMYWJlbCA9IHRoaXMuaTE4bi5nZXRPdmVycmlkYWJsZShcIlRBQkxFLkNIRUNLQk9YX1JPV1wiKTtcblx0cHJvdGVjdGVkIF9leHBhbmRCdXR0b25BcmlhTGFiZWwgPSB0aGlzLmkxOG4uZ2V0T3ZlcnJpZGFibGUoXCJUQUJMRS5FWFBBTkRfQlVUVE9OXCIpO1xuXG5cdGNvbnN0cnVjdG9yKHByb3RlY3RlZCBpMThuOiBJMThuKSB7IH1cblxuXHRASG9zdExpc3RlbmVyKFwiY2xpY2tcIilcblx0b25Ib3N0Q2xpY2soKSB7XG5cdFx0aWYgKHRoaXMuZW5hYmxlU2luZ2xlU2VsZWN0ICYmICF0aGlzLnNob3dTZWxlY3Rpb25Db2x1bW4pIHtcblx0XHRcdHRoaXMub25TZWxlY3Rpb25DaGFuZ2UoKTtcblx0XHR9XG5cdH1cblxuXHRvblJvd0NsaWNrKCkge1xuXHRcdHRoaXMucm93Q2xpY2suZW1pdCgpO1xuXHR9XG5cblx0b25TZWxlY3Rpb25DaGFuZ2UoKSB7XG5cdFx0aWYgKHRoaXMuc2VsZWN0ZWQpIHtcblx0XHRcdHRoaXMuZGVzZWxlY3RSb3cuZW1pdCgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnNlbGVjdFJvdy5lbWl0KCk7XG5cdFx0fVxuXHR9XG5cblx0Z2V0Q2hlY2tib3hMYWJlbCgpOiBPYnNlcnZhYmxlPHN0cmluZz4ge1xuXHRcdHJldHVybiB0aGlzLl9jaGVja2JveExhYmVsLnN1YmplY3Q7XG5cdH1cblxuXHRnZXRFeHBhbmRCdXR0b25BcmlhTGFiZWwoKTogT2JzZXJ2YWJsZTxzdHJpbmc+IHtcblx0XHRyZXR1cm4gdGhpcy5fZXhwYW5kQnV0dG9uQXJpYUxhYmVsLnN1YmplY3Q7XG5cdH1cbn1cbiJdfQ==